import{_ as j,r as b,u as G,j as J,o as z,c as o,g as t,a as e,b as h,F as I,d as q,t as m,f as se,w as _,v as S,p as M,n as H,e as W,q as _e,s as me,x as X,i as be,h as ge,m as Q,k as fe}from"./index.DUoj9obe.js";import ye from"./CarsStock.C3J1zlI5.js";import ke from"./SellBillsView.CGA4_IMs.js";import Ee from"./WarehousesView.j6XM8hFJ.js";const $e={class:"clients-view"},Ce={class:"header"},we={class:"content"},he={class:"clients-table"},Se={class:"id-document-cell"},De=["onClick"],Ae=["src","alt"],Ne=["href"],Te={key:2},Ue=["onClick"],Pe=["onClick"],Re={key:0,class:"dialog-overlay"},Ve={class:"dialog"},Be={class:"form-group"},Oe={class:"file-upload"},Ie={key:0,class:"error-message"},qe={class:"dialog-actions"},Le=["disabled"],Fe={key:1,class:"dialog-overlay"},Me={class:"dialog"},xe={class:"form-group"},We=["readonly"],He={class:"file-upload"},Ye={key:0,class:"current-file"},Je=["href"],Qe={key:0,class:"error-message"},je={class:"dialog-actions"},Ge=["disabled"],ze={__name:"ClientsView",setup(L){const A=b([]),{callApi:$,uploadFile:P,getFileUrl:R,error:k}=G(),c=b(!1),N=b(!1),v=b(null),C=b(null),T=b(""),f=b(null),g=b(null),y=J(()=>{var E;return((E=C.value)==null?void 0:E.role_id)===1}),r=E=>{if(!E)return!1;const i=E.split(".").pop().toLowerCase();return["jpg","jpeg","png","gif","webp"].includes(i)},d=E=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(E),p=b({name:"",address:"",email:"",mobiles:"",id_no:""}),w=async()=>{const E=await $({query:`
      SELECT * FROM clients where is_broker = 0
      ORDER BY name ASC
    `,params:[]});E.success&&(A.value=E.data)},B=(E,i=!1)=>{const u=E.target.files[0];i?g.value=u:f.value=u},U=async()=>{if(!d(p.value.email)){T.value="Please enter a valid email address";return}try{const E=await $({query:`
      INSERT INTO clients (name, address, email, mobiles, id_no, is_broker)
      VALUES (?, ?, ?, ?, ?, 0)
    `,params:[p.value.name,p.value.address,p.value.email,p.value.mobiles,p.value.id_no]});if(E.success){const i=E.insertId;if(f.value)try{const u=`${i}.${f.value.name.split(".").pop()}`,x=await P(f.value,"ids",u);x.success&&await $({query:"UPDATE clients SET id_copy_path = ? WHERE id = ?",params:[x.relativePath,i]})}catch(u){console.error("Error uploading file:",u),k.value="Client created but failed to upload ID document"}c.value=!1,T.value="",f.value=null,p.value={name:"",address:"",email:"",mobiles:"",id_no:""},await w()}else k.value=E.error,console.error("Error adding client:",E.error)}catch(E){k.value=E.message,console.error("Error in add client process:",E)}},F=E=>{v.value={...E},g.value=null,N.value=!0},V=async()=>{if(!d(v.value.email)){T.value="Please enter a valid email address";return}try{const E=await $({query:`
      UPDATE clients 
      SET name = ?, address = ?, email = ?, mobiles = ?, id_no = ?, is_broker = 0
      WHERE id = ?
    `,params:[v.value.name,v.value.address,v.value.email,v.value.mobiles,v.value.id_no,v.value.id]});if(E.success){if(g.value)try{const i=`${v.value.id}.${g.value.name.split(".").pop()}`,u=await P(g.value,"ids",i);u.success&&await $({query:"UPDATE clients SET id_copy_path = ? WHERE id = ?",params:[u.relativePath,v.value.id]})}catch(i){console.error("Error uploading file:",i),k.value="Client updated but failed to upload new ID document"}N.value=!1,v.value=null,g.value=null,T.value="",await w()}else k.value=E.error,console.error("Error updating client:",E.error)}catch(E){k.value=E.message,console.error("Error in update client process:",E)}},O=async E=>{confirm("Are you sure you want to delete this client?")&&(await $({query:"DELETE FROM clients WHERE id = ?",params:[E.id]})).success&&await w()},K=E=>{E&&window.open(R(E),"_blank")};return z(()=>{const E=localStorage.getItem("user");E&&(C.value=JSON.parse(E),w())}),(E,i)=>(t(),o("div",$e,[e("div",Ce,[i[15]||(i[15]=e("h2",null,"Clients Management",-1)),e("button",{onClick:i[0]||(i[0]=u=>c.value=!0),class:"add-btn"},"Add Client")]),e("div",we,[e("table",he,[i[16]||(i[16]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Address"),e("th",null,"Email"),e("th",null,"Mobile"),e("th",null,"ID No"),e("th",null,"ID Document"),e("th",null,"Actions")])],-1)),e("tbody",null,[(t(!0),o(I,null,q(A.value,u=>(t(),o("tr",{key:u.id},[e("td",null,m(u.name),1),e("td",null,m(u.address),1),e("td",null,m(u.email),1),e("td",null,m(u.mobiles),1),e("td",null,m(u.id_no),1),e("td",Se,[u.id_copy_path&&r(u.id_copy_path)?(t(),o("div",{key:0,class:"image-preview",onClick:x=>K(u.id_copy_path)},[e("img",{src:se(R)(u.id_copy_path),alt:"ID for "+u.name},null,8,Ae)],8,De)):u.id_copy_path?(t(),o("a",{key:1,href:se(R)(u.id_copy_path),target:"_blank",class:"document-link"}," View Document ",8,Ne)):(t(),o("span",Te,"No ID"))]),e("td",null,[e("button",{onClick:x=>F(u),class:"btn edit-btn"},"Edit",8,Ue),y.value?(t(),o("button",{key:0,onClick:x=>O(u),class:"btn delete-btn"},"Delete",8,Pe)):h("",!0)])]))),128))])])]),c.value?(t(),o("div",Re,[e("div",Ve,[i[18]||(i[18]=e("h3",null,"Add New Client",-1)),e("div",Be,[_(e("input",{"onUpdate:modelValue":i[1]||(i[1]=u=>p.value.name=u),placeholder:"Name",class:"input-field"},null,512),[[S,p.value.name]]),_(e("input",{"onUpdate:modelValue":i[2]||(i[2]=u=>p.value.address=u),placeholder:"Address",class:"input-field"},null,512),[[S,p.value.address]]),_(e("input",{"onUpdate:modelValue":i[3]||(i[3]=u=>p.value.email=u),placeholder:"Email",class:M(["input-field",{error:T.value&&p.value.email}])},null,2),[[S,p.value.email]]),_(e("input",{"onUpdate:modelValue":i[4]||(i[4]=u=>p.value.mobiles=u),placeholder:"Mobile",class:"input-field"},null,512),[[S,p.value.mobiles]]),_(e("input",{"onUpdate:modelValue":i[5]||(i[5]=u=>p.value.id_no=u),placeholder:"ID No",class:"input-field"},null,512),[[S,p.value.id_no]]),e("div",Oe,[i[17]||(i[17]=e("label",{for:"id-document"},"ID Document:",-1)),e("input",{type:"file",id:"id-document",onChange:i[6]||(i[6]=u=>B(u)),accept:"image/*,.pdf",class:"file-input"},null,32)]),T.value?(t(),o("div",Ie,m(T.value),1)):h("",!0)]),e("div",qe,[e("button",{onClick:U,class:"btn save-btn",disabled:!y.value},"Add",8,Le),e("button",{onClick:i[7]||(i[7]=u=>c.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),N.value?(t(),o("div",Fe,[e("div",Me,[i[21]||(i[21]=e("h3",null,"Edit Client",-1)),e("div",xe,[_(e("input",{"onUpdate:modelValue":i[8]||(i[8]=u=>v.value.name=u),placeholder:"Name",class:"input-field",readonly:!y.value},null,8,We),[[S,v.value.name]]),_(e("input",{"onUpdate:modelValue":i[9]||(i[9]=u=>v.value.address=u),placeholder:"Address",class:"input-field"},null,512),[[S,v.value.address]]),_(e("input",{"onUpdate:modelValue":i[10]||(i[10]=u=>v.value.email=u),placeholder:"Email",class:M(["input-field",{error:T.value&&v.value.email}])},null,2),[[S,v.value.email]]),_(e("input",{"onUpdate:modelValue":i[11]||(i[11]=u=>v.value.mobiles=u),placeholder:"Mobile",class:"input-field"},null,512),[[S,v.value.mobiles]]),_(e("input",{"onUpdate:modelValue":i[12]||(i[12]=u=>v.value.id_no=u),placeholder:"ID No",class:"input-field"},null,512),[[S,v.value.id_no]]),e("div",He,[i[20]||(i[20]=e("label",{for:"edit-id-document"},"ID Document:",-1)),v.value.id_copy_path?(t(),o("div",Ye,[i[19]||(i[19]=H(" Current: ")),e("a",{href:v.value.id_copy_path,target:"_blank"},"View ID",8,Je)])):h("",!0),e("input",{type:"file",id:"edit-id-document",onChange:i[13]||(i[13]=u=>B(u,!0)),accept:"image/*,.pdf",class:"file-input"},null,32)]),T.value?(t(),o("div",Qe,m(T.value),1)):h("",!0)]),e("div",je,[e("button",{onClick:V,class:"btn save-btn",disabled:!y.value},"Save",8,Ge),e("button",{onClick:i[14]||(i[14]=u=>N.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},Ke=j(ze,[["__scopeId","data-v-c10137e8"]]),Xe={class:"clients-view"},Ze={class:"header"},el={class:"content"},ll={class:"clients-table"},tl=["onClick"],sl=["onClick"],al={key:0,class:"dialog-overlay"},ol={class:"dialog"},nl={class:"form-group"},il={key:0,class:"error-message"},ul={class:"dialog-actions"},dl=["disabled"],rl={key:1,class:"dialog-overlay"},cl={class:"dialog"},vl={class:"form-group"},pl=["readonly"],_l={key:0,class:"error-message"},bl={class:"dialog-actions"},ml=["disabled"],gl={__name:"BrokersView",setup(L){const A=b([]),{callApi:$,error:P}=G(),R=b(!1),k=b(!1),c=b(null),N=b(null),v=b(""),C=J(()=>{var w;return((w=N.value)==null?void 0:w.role_id)===1}),T=w=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w),f=b({name:"",address:"",email:"",mobiles:"",id_no:""}),g=async()=>{const w=await $({query:`
      SELECT * FROM clients where is_broker = 1
      ORDER BY name ASC
    `,params:[]});w.success&&(A.value=w.data)},y=async()=>{if(!T(f.value.email)){v.value="Please enter a valid email address";return}const w=await $({query:`
      INSERT INTO clients (name, address, email, mobiles, id_no, is_broker)
      VALUES (?, ?, ?, ?, ?, 1)
    `,params:[f.value.name,f.value.address,f.value.email,f.value.mobiles,f.value.id_no]});w.success?(R.value=!1,v.value="",f.value={name:"",address:"",email:"",mobiles:"",id_no:""},await g()):(P.value=w.error,console.error("Error adding client:",w.error))},r=w=>{c.value={...w},k.value=!0},d=async()=>{if(!T(c.value.email)){v.value="Please enter a valid email address";return}const w=await $({query:`
      UPDATE clients 
      SET name = ?, address = ?, email = ?, mobiles = ?, id_no = ?, is_broker = 1
      WHERE id = ?
    `,params:[c.value.name,c.value.address,c.value.email,c.value.mobiles,c.value.id_no,c.value.id]});w.success?(k.value=!1,c.value=null,v.value="",await g()):(P.value=w.error,console.error("Error updating client:",w.error))},p=async w=>{confirm("Are you sure you want to delete this client?")&&(await $({query:"DELETE FROM clients WHERE id = ?",params:[w.id]})).success&&await g()};return z(()=>{const w=localStorage.getItem("user");w&&(N.value=JSON.parse(w),g())}),(w,B)=>(t(),o("div",Xe,[e("div",Ze,[B[13]||(B[13]=e("h2",null,"Brokers Management",-1)),e("button",{onClick:B[0]||(B[0]=U=>R.value=!0),class:"add-btn"},"Add Client")]),e("div",el,[e("table",ll,[B[14]||(B[14]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Address"),e("th",null,"Email"),e("th",null,"Mobile"),e("th",null,"ID No"),e("th",null,"Actions")])],-1)),e("tbody",null,[(t(!0),o(I,null,q(A.value,U=>(t(),o("tr",{key:U.id},[e("td",null,m(U.name),1),e("td",null,m(U.address),1),e("td",null,m(U.email),1),e("td",null,m(U.mobiles),1),e("td",null,m(U.id_no),1),e("td",null,[e("button",{onClick:F=>r(U),class:"btn edit-btn"},"Edit",8,tl),C.value?(t(),o("button",{key:0,onClick:F=>p(U),class:"btn delete-btn"},"Delete",8,sl)):h("",!0)])]))),128))])])]),R.value?(t(),o("div",al,[e("div",ol,[B[15]||(B[15]=e("h3",null,"Add New Client",-1)),e("div",nl,[_(e("input",{"onUpdate:modelValue":B[1]||(B[1]=U=>f.value.name=U),placeholder:"Name",class:"input-field"},null,512),[[S,f.value.name]]),_(e("input",{"onUpdate:modelValue":B[2]||(B[2]=U=>f.value.address=U),placeholder:"Address",class:"input-field"},null,512),[[S,f.value.address]]),_(e("input",{"onUpdate:modelValue":B[3]||(B[3]=U=>f.value.email=U),placeholder:"Email",class:M(["input-field",{error:v.value&&f.value.email}])},null,2),[[S,f.value.email]]),_(e("input",{"onUpdate:modelValue":B[4]||(B[4]=U=>f.value.mobiles=U),placeholder:"Mobile",class:"input-field"},null,512),[[S,f.value.mobiles]]),_(e("input",{"onUpdate:modelValue":B[5]||(B[5]=U=>f.value.id_no=U),placeholder:"ID No",class:"input-field"},null,512),[[S,f.value.id_no]]),v.value?(t(),o("div",il,m(v.value),1)):h("",!0)]),e("div",ul,[e("button",{onClick:y,class:"btn save-btn",disabled:!C.value},"Add",8,dl),e("button",{onClick:B[6]||(B[6]=U=>R.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),k.value?(t(),o("div",rl,[e("div",cl,[B[16]||(B[16]=e("h3",null,"Edit Client",-1)),e("div",vl,[_(e("input",{"onUpdate:modelValue":B[7]||(B[7]=U=>c.value.name=U),placeholder:"Name",class:"input-field",readonly:!C.value},null,8,pl),[[S,c.value.name]]),_(e("input",{"onUpdate:modelValue":B[8]||(B[8]=U=>c.value.address=U),placeholder:"Address",class:"input-field"},null,512),[[S,c.value.address]]),_(e("input",{"onUpdate:modelValue":B[9]||(B[9]=U=>c.value.email=U),placeholder:"Email",class:M(["input-field",{error:v.value&&c.value.email}])},null,2),[[S,c.value.email]]),_(e("input",{"onUpdate:modelValue":B[10]||(B[10]=U=>c.value.mobiles=U),placeholder:"Mobile",class:"input-field"},null,512),[[S,c.value.mobiles]]),_(e("input",{"onUpdate:modelValue":B[11]||(B[11]=U=>c.value.id_no=U),placeholder:"ID No",class:"input-field"},null,512),[[S,c.value.id_no]]),v.value?(t(),o("div",_l,m(v.value),1)):h("",!0)]),e("div",bl,[e("button",{onClick:d,class:"btn save-btn",disabled:!C.value},"Save",8,ml),e("button",{onClick:B[12]||(B[12]=U=>k.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},fl=j(gl,[["__scopeId","data-v-8051a3ee"]]),yl={class:"suppliers-view"},kl={class:"header"},El={class:"content"},$l={class:"suppliers-table"},Cl=["onClick"],wl=["onClick"],hl={key:0,class:"dialog-overlay"},Sl={class:"dialog"},Dl={class:"form-group"},Al={class:"dialog-actions"},Nl={key:1,class:"dialog-overlay"},Tl={class:"dialog"},Ul={class:"form-group"},Pl={class:"dialog-actions"},Rl={__name:"SuppliersView",setup(L){const A=b([]),{callApi:$,error:P}=G(),R=b(!1),k=b(!1),c=b(null),N=b(null),v=J(()=>{var d;return((d=N.value)==null?void 0:d.role_id)===1}),C=b({name:"",contact_info:"",notes:""}),T=async()=>{const d=await $({query:`
      SELECT * FROM suppliers
      ORDER BY name ASC
    `,params:[]});d.success&&(A.value=d.data)},f=async()=>{const d=await $({query:`
      INSERT INTO suppliers (name, contact_info, notes)
      VALUES (?, ?, ?)
    `,params:[C.value.name,C.value.contact_info,C.value.notes]});d.success?(R.value=!1,C.value={name:"",contact_info:"",notes:""},await T()):(P.value=d.error,console.error("Error adding supplier:",d.error))},g=d=>{c.value={...d},k.value=!0},y=async()=>{const d=await $({query:`
      UPDATE suppliers 
      SET name = ?, contact_info = ?, notes = ?
      WHERE id = ?
    `,params:[c.value.name,c.value.contact_info,c.value.notes,c.value.id]});d.success?(k.value=!1,c.value=null,await T()):(P.value=d.error,console.error("Error updating supplier:",d.error))},r=async d=>{confirm("Are you sure you want to delete this supplier?")&&(await $({query:"DELETE FROM suppliers WHERE id = ?",params:[d.id]})).success&&await T()};return z(()=>{const d=localStorage.getItem("user");d&&(N.value=JSON.parse(d),T())}),(d,p)=>(t(),o("div",yl,[e("div",kl,[p[9]||(p[9]=e("h2",null,"Suppliers Management",-1)),e("button",{onClick:p[0]||(p[0]=w=>R.value=!0),class:"add-btn"},"Add Supplier")]),e("div",El,[e("table",$l,[p[10]||(p[10]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Contact Info"),e("th",null,"Notes"),e("th",null,"Actions")])],-1)),e("tbody",null,[(t(!0),o(I,null,q(A.value,w=>(t(),o("tr",{key:w.id},[e("td",null,m(w.name),1),e("td",null,m(w.contact_info),1),e("td",null,m(w.notes),1),e("td",null,[e("button",{onClick:B=>g(w),class:"btn edit-btn"},"Edit",8,Cl),v.value?(t(),o("button",{key:0,onClick:B=>r(w),class:"btn delete-btn"},"Delete",8,wl)):h("",!0)])]))),128))])])]),R.value?(t(),o("div",hl,[e("div",Sl,[p[11]||(p[11]=e("h3",null,"Add New Supplier",-1)),e("div",Dl,[_(e("input",{"onUpdate:modelValue":p[1]||(p[1]=w=>C.value.name=w),placeholder:"Name",class:"input-field"},null,512),[[S,C.value.name]]),_(e("textarea",{"onUpdate:modelValue":p[2]||(p[2]=w=>C.value.contact_info=w),placeholder:"Contact Information",class:"input-field textarea"},null,512),[[S,C.value.contact_info]]),_(e("textarea",{"onUpdate:modelValue":p[3]||(p[3]=w=>C.value.notes=w),placeholder:"Notes",class:"input-field textarea"},null,512),[[S,C.value.notes]])]),e("div",Al,[e("button",{onClick:f,class:"btn save-btn"},"Save"),e("button",{onClick:p[4]||(p[4]=w=>R.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),k.value?(t(),o("div",Nl,[e("div",Tl,[p[12]||(p[12]=e("h3",null,"Edit Supplier",-1)),e("div",Ul,[_(e("input",{"onUpdate:modelValue":p[5]||(p[5]=w=>c.value.name=w),placeholder:"Name",class:"input-field"},null,512),[[S,c.value.name]]),_(e("textarea",{"onUpdate:modelValue":p[6]||(p[6]=w=>c.value.contact_info=w),placeholder:"Contact Information",class:"input-field textarea"},null,512),[[S,c.value.contact_info]]),_(e("textarea",{"onUpdate:modelValue":p[7]||(p[7]=w=>c.value.notes=w),placeholder:"Notes",class:"input-field textarea"},null,512),[[S,c.value.notes]])]),e("div",Pl,[e("button",{onClick:y,class:"btn save-btn"},"Save"),e("button",{onClick:p[8]||(p[8]=w=>k.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},Vl=j(Rl,[["__scopeId","data-v-c8ee631a"]]),Bl={class:"models-view"},Ol={class:"section"},Il={class:"header"},ql={class:"data-table"},Ll=["onClick"],Fl=["onClick"],Ml={class:"section"},xl={class:"header"},Wl={class:"data-table"},Hl=["onClick"],Yl=["onClick"],Jl={key:0,class:"dialog-overlay"},Ql={class:"dialog"},jl={class:"form-group"},Gl={class:"dialog-actions"},zl={key:1,class:"dialog-overlay"},Kl={class:"dialog"},Xl={class:"form-group"},Zl={class:"dialog-actions"},et={key:2,class:"dialog-overlay"},lt={class:"dialog"},tt={class:"form-group"},st={class:"form-group"},at=["value"],ot={class:"form-group"},nt={class:"form-group"},it={class:"dialog-buttons"},ut={key:3,class:"dialog-overlay"},dt={class:"dialog"},rt={class:"form-group"},ct={class:"form-group"},vt=["value"],pt={class:"form-group"},_t={class:"form-group"},bt={class:"dialog-buttons"},mt={__name:"CarModelsView",setup(L){const{callApi:A}=G(),$=b(!1),P=b(!1),R=b(!1),k=b(!1),c=b([]),N=b([]),v=b(null),C=b(null),T=b(null),f=J(()=>{var E;return((E=T.value)==null?void 0:E.role_id)===1}),g=b({brand:""}),y=b({car_name:"",notes:"",is_big_car:!1,id_brand:null}),r=async()=>{const E=await A({query:"SELECT * FROM brands ORDER BY brand ASC",params:[]});E.success&&(c.value=E.data)},d=async()=>{const E=await A({query:`
      SELECT cn.*, b.brand 
      FROM cars_names cn
      LEFT JOIN brands b ON cn.id_brand = b.id 
      ORDER BY cn.car_name ASC
    `,params:[]});E.success&&(N.value=E.data)},p=async()=>{const E=await A({query:"INSERT INTO brands (brand) VALUES (?)",params:[g.value.brand]});E.success?($.value=!1,g.value={brand:""},await r()):console.log(E.error)},w=async()=>{const E=await A({query:"INSERT INTO cars_names (car_name, notes, is_big_car, id_brand) VALUES (?, ?, ?, ?)",params:[y.value.car_name,y.value.notes,y.value.is_big_car?1:0,y.value.id_brand]});E.success?(R.value=!1,y.value={car_name:"",notes:"",is_big_car:!1,id_brand:null},await d()):console.log(E.error)},B=E=>{v.value={...E},P.value=!0},U=E=>{C.value={...E},k.value=!0},F=async()=>{const E=await A({query:"UPDATE brands SET brand = ? WHERE id = ?",params:[v.value.brand,v.value.id]});E.success?(P.value=!1,v.value=null,await r()):console.log(E.error)},V=async()=>{const E=await A({query:"UPDATE cars_names SET car_name = ?, notes = ?, is_big_car = ?, id_brand = ? WHERE id = ?",params:[C.value.car_name,C.value.notes,C.value.is_big_car?1:0,C.value.id_brand,C.value.id]});E.success?(k.value=!1,C.value=null,await d()):console.log(E.error)},O=async E=>{confirm("Are you sure you want to delete this brand?")&&(await A({query:"DELETE FROM brands WHERE id = ?",params:[E.id]})).success&&await r()},K=async E=>{confirm("Are you sure you want to delete this car name?")&&(await A({query:"DELETE FROM cars_names WHERE id = ?",params:[E.id]})).success&&await d()};return z(()=>{const E=localStorage.getItem("user");E&&(T.value=JSON.parse(E),r(),d())}),(E,i)=>(t(),o("div",Bl,[e("div",Ol,[e("div",Il,[i[16]||(i[16]=e("h2",null,"Brands Management",-1)),e("button",{onClick:i[0]||(i[0]=u=>$.value=!0),class:"add-btn"},"Add Brand")]),e("table",ql,[i[17]||(i[17]=e("thead",null,[e("tr",null,[e("th",null,"Brand"),e("th",null,"Actions")])],-1)),e("tbody",null,[(t(!0),o(I,null,q(c.value,u=>(t(),o("tr",{key:u.id},[e("td",null,m(u.brand),1),e("td",null,[e("button",{onClick:x=>B(u),class:"btn edit-btn"},"Edit",8,Ll),f.value?(t(),o("button",{key:0,onClick:x=>O(u),class:"btn delete-btn"},"Delete",8,Fl)):h("",!0)])]))),128))])])]),e("div",Ml,[e("div",xl,[i[18]||(i[18]=e("h2",null,"Car Names Management",-1)),e("button",{onClick:i[1]||(i[1]=u=>R.value=!0),class:"add-btn"},"Add Car Name")]),e("table",Wl,[i[19]||(i[19]=e("thead",null,[e("tr",null,[e("th",null,"Car Name"),e("th",null,"Brand"),e("th",null,"Notes"),e("th",null,"Big Car"),e("th",null,"Actions")])],-1)),e("tbody",null,[(t(!0),o(I,null,q(N.value,u=>(t(),o("tr",{key:u.id},[e("td",null,m(u.car_name),1),e("td",null,m(u.brand),1),e("td",null,m(u.notes),1),e("td",null,m(u.is_big_car?"Yes":"No"),1),e("td",null,[e("button",{onClick:x=>U(u),class:"btn edit-btn"},"Edit",8,Hl),f.value?(t(),o("button",{key:0,onClick:x=>K(u),class:"btn delete-btn"},"Delete",8,Yl)):h("",!0)])]))),128))])])]),$.value?(t(),o("div",Jl,[e("div",Ql,[i[20]||(i[20]=e("h3",null,"Add New Brand",-1)),e("div",jl,[_(e("input",{"onUpdate:modelValue":i[2]||(i[2]=u=>g.value.brand=u),placeholder:"Brand Name",class:"input-field"},null,512),[[S,g.value.brand]])]),e("div",Gl,[e("button",{onClick:p,class:"btn save-btn"},"Save"),e("button",{onClick:i[3]||(i[3]=u=>$.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),P.value?(t(),o("div",zl,[e("div",Kl,[i[21]||(i[21]=e("h3",null,"Edit Brand",-1)),e("div",Xl,[_(e("input",{"onUpdate:modelValue":i[4]||(i[4]=u=>v.value.brand=u),placeholder:"Brand Name",class:"input-field"},null,512),[[S,v.value.brand]])]),e("div",Zl,[e("button",{onClick:F,class:"btn save-btn"},"Save"),e("button",{onClick:i[5]||(i[5]=u=>P.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),R.value?(t(),o("div",et,[e("div",lt,[i[24]||(i[24]=e("h3",null,"Add New Car Name",-1)),e("div",tt,[_(e("input",{"onUpdate:modelValue":i[6]||(i[6]=u=>y.value.car_name=u),placeholder:"Car Name"},null,512),[[S,y.value.car_name]])]),e("div",st,[_(e("select",{"onUpdate:modelValue":i[7]||(i[7]=u=>y.value.id_brand=u)},[i[22]||(i[22]=e("option",{value:""},"Select Brand",-1)),(t(!0),o(I,null,q(c.value,u=>(t(),o("option",{key:u.id,value:u.id},m(u.brand),9,at))),128))],512),[[W,y.value.id_brand]])]),e("div",ot,[_(e("input",{"onUpdate:modelValue":i[8]||(i[8]=u=>y.value.notes=u),placeholder:"Notes"},null,512),[[S,y.value.notes]])]),e("div",nt,[e("label",null,[_(e("input",{type:"checkbox","onUpdate:modelValue":i[9]||(i[9]=u=>y.value.is_big_car=u)},null,512),[[_e,y.value.is_big_car]]),i[23]||(i[23]=H(" Big Car "))])]),e("div",it,[e("button",{onClick:w,class:"btn save-btn"},"Save"),e("button",{onClick:i[10]||(i[10]=u=>R.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),k.value?(t(),o("div",ut,[e("div",dt,[i[27]||(i[27]=e("h3",null,"Edit Car Name",-1)),e("div",rt,[_(e("input",{"onUpdate:modelValue":i[11]||(i[11]=u=>C.value.car_name=u),placeholder:"Car Name"},null,512),[[S,C.value.car_name]])]),e("div",ct,[_(e("select",{"onUpdate:modelValue":i[12]||(i[12]=u=>C.value.id_brand=u)},[i[25]||(i[25]=e("option",{value:""},"Select Brand",-1)),(t(!0),o(I,null,q(c.value,u=>(t(),o("option",{key:u.id,value:u.id},m(u.brand),9,vt))),128))],512),[[W,C.value.id_brand]])]),e("div",pt,[_(e("input",{"onUpdate:modelValue":i[13]||(i[13]=u=>C.value.notes=u),placeholder:"Notes"},null,512),[[S,C.value.notes]])]),e("div",_t,[e("label",null,[_(e("input",{type:"checkbox","onUpdate:modelValue":i[14]||(i[14]=u=>C.value.is_big_car=u)},null,512),[[_e,C.value.is_big_car]]),i[26]||(i[26]=H(" Big Car "))])]),e("div",bt,[e("button",{onClick:V,class:"btn save-btn"},"Save"),e("button",{onClick:i[15]||(i[15]=u=>k.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},gt=j(mt,[["__scopeId","data-v-1ce5e605"]]),ft={class:"colors-view"},yt={class:"header"},kt={class:"content"},Et={class:"colors-table"},$t=["onClick"],Ct=["onClick"],wt={key:0,class:"dialog-overlay"},ht={class:"dialog"},St={class:"form-group"},Dt={class:"dialog-actions"},At={key:1,class:"dialog-overlay"},Nt={class:"dialog"},Tt={class:"form-group"},Ut={class:"dialog-actions"},Pt={__name:"ColorsView",setup(L){const A=b([]),{callApi:$}=G(),P=b(!1),R=b(!1),k=b(null),c=b(null),N=J(()=>{var r;return((r=c.value)==null?void 0:r.role_id)===1}),v=b({color:""}),C=async()=>{const r=await $({query:"SELECT * FROM colors ORDER BY color ASC",params:[]});r.success&&(A.value=r.data)},T=async()=>{(await $({query:"INSERT INTO colors (color) VALUES (?)",params:[v.value.color]})).success&&(P.value=!1,v.value={color:""},await C())},f=r=>{k.value={...r},R.value=!0},g=async()=>{(await $({query:"UPDATE colors SET color = ? WHERE id = ?",params:[k.value.color,k.value.id]})).success&&(R.value=!1,k.value=null,await C())},y=async r=>{confirm("Are you sure you want to delete this color?")&&(await $({query:"DELETE FROM colors WHERE id = ?",params:[r.id]})).success&&await C()};return z(()=>{const r=localStorage.getItem("user");r&&(c.value=JSON.parse(r),C())}),(r,d)=>(t(),o("div",ft,[e("div",yt,[d[5]||(d[5]=e("h2",null,"Colors Management",-1)),e("button",{onClick:d[0]||(d[0]=p=>P.value=!0),class:"add-btn"},"Add Color")]),e("div",kt,[e("table",Et,[d[6]||(d[6]=e("thead",null,[e("tr",null,[e("th",null,"Color"),e("th",null,"Actions")])],-1)),e("tbody",null,[(t(!0),o(I,null,q(A.value,p=>(t(),o("tr",{key:p.id},[e("td",null,m(p.color),1),e("td",null,[e("button",{onClick:w=>f(p),class:"btn edit-btn"},"Edit",8,$t),N.value?(t(),o("button",{key:0,onClick:w=>y(p),class:"btn delete-btn"},"Delete",8,Ct)):h("",!0)])]))),128))])])]),P.value?(t(),o("div",wt,[e("div",ht,[d[7]||(d[7]=e("h3",null,"Add New Color",-1)),e("div",St,[_(e("input",{"onUpdate:modelValue":d[1]||(d[1]=p=>v.value.color=p),placeholder:"Color Name",class:"input-field"},null,512),[[S,v.value.color]])]),e("div",Dt,[e("button",{onClick:T,class:"btn save-btn"},"Save"),e("button",{onClick:d[2]||(d[2]=p=>P.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),R.value?(t(),o("div",At,[e("div",Nt,[d[8]||(d[8]=e("h3",null,"Edit Color",-1)),e("div",Tt,[_(e("input",{"onUpdate:modelValue":d[3]||(d[3]=p=>k.value.color=p),placeholder:"Color Name",class:"input-field"},null,512),[[S,k.value.color]])]),e("div",Ut,[e("button",{onClick:g,class:"btn save-btn"},"Save"),e("button",{onClick:d[4]||(d[4]=p=>R.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},Rt=j(Pt,[["__scopeId","data-v-4eb1323d"]]),Vt={class:"ports-view"},Bt={class:"header"},Ot={class:"content"},It={class:"ports-table"},qt=["onClick"],Lt=["onClick"],Ft={key:0,class:"dialog-overlay"},Mt={class:"dialog"},xt={class:"form-group"},Wt={class:"dialog-actions"},Ht={key:1,class:"dialog-overlay"},Yt={class:"dialog"},Jt={class:"form-group"},Qt={class:"dialog-actions"},jt={__name:"DischargePortsView",setup(L){const A=b([]),{callApi:$}=G(),P=b(!1),R=b(!1),k=b(null),c=b(null),N=J(()=>{var r;return((r=c.value)==null?void 0:r.role_id)===1}),v=b({discharge_port:""}),C=async()=>{const r=await $({query:"SELECT * FROM discharge_ports ORDER BY discharge_port ASC",params:[]});r.success&&(A.value=r.data)},T=async()=>{(await $({query:"INSERT INTO discharge_ports (discharge_port) VALUES (?)",params:[v.value.discharge_port]})).success&&(P.value=!1,v.value={discharge_port:""},await C())},f=r=>{k.value={...r},R.value=!0},g=async()=>{(await $({query:"UPDATE discharge_ports SET discharge_port = ? WHERE id = ?",params:[k.value.discharge_port,k.value.id]})).success&&(R.value=!1,k.value=null,await C())},y=async r=>{confirm("Are you sure you want to delete this discharge port?")&&(await $({query:"DELETE FROM discharge_ports WHERE id = ?",params:[r.id]})).success&&await C()};return z(()=>{const r=localStorage.getItem("user");r&&(c.value=JSON.parse(r),C())}),(r,d)=>(t(),o("div",Vt,[e("div",Bt,[d[5]||(d[5]=e("h2",null,"Discharge Ports Management",-1)),e("button",{onClick:d[0]||(d[0]=p=>P.value=!0),class:"add-btn"},"Add Discharge Port")]),e("div",Ot,[e("table",It,[d[6]||(d[6]=e("thead",null,[e("tr",null,[e("th",null,"Discharge Port"),e("th",null,"Actions")])],-1)),e("tbody",null,[(t(!0),o(I,null,q(A.value,p=>(t(),o("tr",{key:p.id},[e("td",null,m(p.discharge_port),1),e("td",null,[e("button",{onClick:w=>f(p),class:"btn edit-btn"},"Edit",8,qt),N.value?(t(),o("button",{key:0,onClick:w=>y(p),class:"btn delete-btn"},"Delete",8,Lt)):h("",!0)])]))),128))])])]),P.value?(t(),o("div",Ft,[e("div",Mt,[d[7]||(d[7]=e("h3",null,"Add New Discharge Port",-1)),e("div",xt,[_(e("input",{"onUpdate:modelValue":d[1]||(d[1]=p=>v.value.discharge_port=p),placeholder:"Discharge Port Name",class:"input-field"},null,512),[[S,v.value.discharge_port]])]),e("div",Wt,[e("button",{onClick:T,class:"btn save-btn"},"Save"),e("button",{onClick:d[2]||(d[2]=p=>P.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),R.value?(t(),o("div",Ht,[e("div",Yt,[d[8]||(d[8]=e("h3",null,"Edit Discharge Port",-1)),e("div",Jt,[_(e("input",{"onUpdate:modelValue":d[3]||(d[3]=p=>k.value.discharge_port=p),placeholder:"Discharge Port Name",class:"input-field"},null,512),[[S,k.value.discharge_port]])]),e("div",Qt,[e("button",{onClick:g,class:"btn save-btn"},"Save"),e("button",{onClick:d[4]||(d[4]=p=>R.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},Gt=j(jt,[["__scopeId","data-v-d7d6cc70"]]),zt={class:"ports-view"},Kt={class:"header"},Xt={class:"content"},Zt={class:"ports-table"},es=["onClick"],ls=["onClick"],ts={key:0,class:"dialog-overlay"},ss={class:"dialog"},as={class:"form-group"},os={class:"dialog-actions"},ns={key:1,class:"dialog-overlay"},is={class:"dialog"},us={class:"form-group"},ds={class:"dialog-actions"},rs={__name:"LoadingPortsView",setup(L){const A=b([]),{callApi:$}=G(),P=b(!1),R=b(!1),k=b(null),c=b(null),N=J(()=>{var r;return((r=c.value)==null?void 0:r.role_id)===1}),v=b({loading_port:""}),C=async()=>{const r=await $({query:"SELECT * FROM loading_ports ORDER BY loading_port ASC",params:[]});r.success&&(A.value=r.data)},T=async()=>{(await $({query:"INSERT INTO loading_ports (loading_port) VALUES (?)",params:[v.value.loading_port]})).success&&(P.value=!1,v.value={loading_port:""},await C())},f=r=>{k.value={...r},R.value=!0},g=async()=>{(await $({query:"UPDATE loading_ports SET loading_port = ? WHERE id = ?",params:[k.value.loading_port,k.value.id]})).success&&(R.value=!1,k.value=null,await C())},y=async r=>{confirm("Are you sure you want to delete this loading port?")&&(await $({query:"DELETE FROM loading_ports WHERE id = ?",params:[r.id]})).success&&await C()};return z(()=>{const r=localStorage.getItem("user");r&&(c.value=JSON.parse(r),C())}),(r,d)=>(t(),o("div",zt,[e("div",Kt,[d[5]||(d[5]=e("h2",null,"Loading Ports Management",-1)),e("button",{onClick:d[0]||(d[0]=p=>P.value=!0),class:"add-btn"},"Add Loading Port")]),e("div",Xt,[e("table",Zt,[d[6]||(d[6]=e("thead",null,[e("tr",null,[e("th",null,"Loading Port"),e("th",null,"Actions")])],-1)),e("tbody",null,[(t(!0),o(I,null,q(A.value,p=>(t(),o("tr",{key:p.id},[e("td",null,m(p.loading_port),1),e("td",null,[e("button",{onClick:w=>f(p),class:"btn edit-btn"},"Edit",8,es),N.value?(t(),o("button",{key:0,onClick:w=>y(p),class:"btn delete-btn"},"Delete",8,ls)):h("",!0)])]))),128))])])]),P.value?(t(),o("div",ts,[e("div",ss,[d[7]||(d[7]=e("h3",null,"Add New Loading Port",-1)),e("div",as,[_(e("input",{"onUpdate:modelValue":d[1]||(d[1]=p=>v.value.loading_port=p),placeholder:"Loading Port Name",class:"input-field"},null,512),[[S,v.value.loading_port]])]),e("div",os,[e("button",{onClick:T,class:"btn save-btn"},"Save"),e("button",{onClick:d[2]||(d[2]=p=>P.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),R.value?(t(),o("div",ns,[e("div",is,[d[8]||(d[8]=e("h3",null,"Edit Loading Port",-1)),e("div",us,[_(e("input",{"onUpdate:modelValue":d[3]||(d[3]=p=>k.value.loading_port=p),placeholder:"Loading Port Name",class:"input-field"},null,512),[[S,k.value.loading_port]])]),e("div",ds,[e("button",{onClick:g,class:"btn save-btn"},"Save"),e("button",{onClick:d[4]||(d[4]=p=>R.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},cs=j(rs,[["__scopeId","data-v-b6aa02ef"]]),vs={class:"master-section"},ps={key:0,class:"toolbar"},_s={class:"bill-info"},bs={class:"bill-id"},ms={class:"bill-details"},gs={class:"detail-item"},fs={class:"value"},ys={class:"detail-item"},ks={class:"value"},Es={class:"detail-item"},$s={class:"value"},Cs={class:"detail-item"},ws={class:"value"},hs={class:"detail-item"},Ss={class:"toolbar-actions"},Ds={class:"data-table"},As=["onClick"],Ns=["href"],Ts={key:1,class:"no-document"},Us={__name:"BuyBillsTable",props:{buyBills:{type:Array,required:!0},selectedBill:{type:Object,default:null}},emits:["select-bill"],setup(L,{emit:A}){const{getFileUrl:$}=G(),P=k=>k?new Date(k).toLocaleDateString():"N/A",R=k=>{const c=Number(k);return isNaN(c)?"N/A":c.toFixed(2)};return(k,c)=>(t(),o("div",vs,[L.selectedBill?(t(),o("div",ps,[e("div",_s,[e("div",bs," Purchase #"+m(L.selectedBill.id),1),e("div",ms,[e("div",gs,[c[1]||(c[1]=e("span",{class:"label"},"Supplier:",-1)),e("span",fs,m(L.selectedBill.supplier_name),1)]),e("div",ys,[c[2]||(c[2]=e("span",{class:"label"},"Amount:",-1)),e("span",ks,m(R(L.selectedBill.amount)),1)]),e("div",Es,[c[3]||(c[3]=e("span",{class:"label"},"Paid:",-1)),e("span",$s,m(R(L.selectedBill.payed)),1)]),e("div",Cs,[c[4]||(c[4]=e("span",{class:"label"},"Balance:",-1)),e("span",ws,m(R(L.selectedBill.amount-L.selectedBill.payed)),1)]),e("div",hs,[c[5]||(c[5]=e("span",{class:"label"},"Status:",-1)),e("span",{class:M(["value",L.selectedBill.is_stock_updated?"status-updated":"status-pending"])},m(L.selectedBill.is_stock_updated?"Updated":"Pending"),3)])])]),e("div",Ss,[me(k.$slots,"actions",{bill:L.selectedBill},void 0,!0)])])):h("",!0),e("table",Ds,[c[6]||(c[6]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Date"),e("th",null,"Supplier"),e("th",null,"Bill Ref"),e("th",null,"Amount"),e("th",null,"Paid"),e("th",null,"Balance"),e("th",null,"Status"),e("th",null,"PI Document")])],-1)),e("tbody",null,[(t(!0),o(I,null,q(L.buyBills,N=>{var v;return t(),o("tr",{key:N.id,class:M({selected:((v=L.selectedBill)==null?void 0:v.id)===N.id}),onClick:C=>k.$emit("select-bill",N)},[e("td",null,m(N.id),1),e("td",null,m(P(N.date_buy)),1),e("td",null,m(N.supplier_name),1),e("td",null,m(N.bill_ref||"N/A"),1),e("td",null,m(R(N.amount)),1),e("td",null,m(R(N.payed)),1),e("td",null,m(R(N.amount-N.payed)),1),e("td",null,[e("span",{class:M(N.is_stock_updated?"status-updated":"status-pending")},m(N.is_stock_updated?"Updated":"Pending"),3)]),e("td",null,[N.pi_path?(t(),o("a",{key:0,href:se($)(N.pi_path),target:"_blank",class:"pi-document-link",onClick:c[0]||(c[0]=X(()=>{},["stop"]))}," View PI ",8,Ns)):(t(),o("span",Ts,"No document"))])],10,As)}),128))])])]))}},Ps=j(Us,[["__scopeId","data-v-1d466006"]]),Rs={class:"detail-section"},Vs={class:"detail-header"},Bs={class:"button-group"},Os=["disabled","title"],Is=["disabled","title"],qs={class:"data-table"},Ls={class:"actions"},Fs=["onClick","disabled","title"],Ms=["onClick","disabled","title"],xs={key:0,class:"dialog-overlay"},Ws={class:"dialog"},Hs={class:"form-group"},Ys={class:"form-group"},Js={class:"form-row"},Qs={class:"form-group half"},js={class:"form-group half"},Gs={class:"form-group"},zs={class:"form-group"},Ks={class:"dialog-buttons"},Xs={__name:"BuyDetailsTable",props:{buyDetails:{type:Array,required:!0},isAdmin:{type:Boolean,default:!1}},emits:["add-detail","delete-detail","update-detail"],setup(L,{emit:A}){const{callApi:$}=G(),P=L,R=A,k=b(!1),c=b(null),N=J(()=>{var g;return((g=P.buyDetails[0])==null?void 0:g.is_stock_updated)===1}),v=(g,y)=>{if(y){alert("Cannot delete details - Stock has already been updated");return}confirm("Are you sure you want to delete this detail?")&&R("delete-detail",g)},C=g=>{c.value={...g},k.value=!0},T=()=>{R("update-detail",c.value),k.value=!1,c.value=null},f=async()=>{if(!P.buyDetails.length){alert("No details to process");return}if(confirm("Are you sure you want to update the stock? This action cannot be undone.")){for(const y of P.buyDetails)for(let r=0;r<y.QTY;r++){const d=await $({query:`
            INSERT INTO cars_stock 
            (id_buy_details,price_cell)
            VALUES (?,?)
          `,params:[y.id,y.price_sell]});if(!d.success){alert("Error creating stock entry"),console.error("Error creating stock entry:",d.error);return}}const g=await $({query:"UPDATE buy_bill SET is_stock_updated = 1 WHERE id = ?",params:[P.buyDetails[0].id_buy_bill]});g.success?(alert("Stock has been successfully updated"),R("update-detail",P.buyDetails[0])):(console.error("Error updating is_stock_updated flag:",g.error),alert("Error updating stock"))}};return(g,y)=>(t(),o(I,null,[e("div",Rs,[e("div",Vs,[y[8]||(y[8]=e("h3",null,"Purchase Details",-1)),e("div",Bs,[e("button",{onClick:f,class:M(["stock-btn",{disabled:N.value}]),disabled:N.value,title:N.value?"Stock has already been updated":"Update stock"}," Update Stock ",10,Os),e("button",{onClick:y[0]||(y[0]=r=>g.$emit("add-detail")),class:M(["add-btn",{disabled:N.value}]),disabled:N.value,title:N.value?"Cannot add details - Stock has been updated":"Add new detail"}," Add Detail ",10,Is)])]),e("table",qs,[y[9]||(y[9]=e("thead",null,[e("tr",null,[e("th",null,"Car"),e("th",null,"Color"),e("th",null,"Quantity"),e("th",null,"Amount"),e("th",null,"Year"),e("th",null,"Month"),e("th",null,"Price Sell"),e("th",null,"Actions")])],-1)),e("tbody",null,[(t(!0),o(I,null,q(L.buyDetails,r=>(t(),o("tr",{key:r.id},[e("td",null,m(r.car_name),1),e("td",null,m(r.color),1),e("td",null,m(r.QTY),1),e("td",null,m(r.amount),1),e("td",null,m(r.year),1),e("td",null,m(r.month),1),e("td",null,m(r.price_sell),1),e("td",Ls,[e("button",{onClick:d=>C(r),class:M(["edit-btn",{disabled:r.is_stock_updated}]),disabled:r.is_stock_updated,title:r.is_stock_updated?"Cannot edit - Stock has been updated":"Edit this detail"}," Edit ",10,Fs),e("button",{onClick:d=>v(r.id,r.is_stock_updated),class:M(["delete-btn",{disabled:r.is_stock_updated}]),disabled:r.is_stock_updated,title:r.is_stock_updated?"Cannot delete - Stock has been updated":"Delete this detail"}," Delete ",10,Ms)])]))),128))])])]),k.value&&c.value?(t(),o("div",xs,[e("div",Ws,[y[17]||(y[17]=e("h3",null,"Edit Purchase Detail",-1)),e("form",{onSubmit:X(T,["prevent"])},[e("div",Hs,[y[10]||(y[10]=e("label",{for:"edit-qty"},"Quantity",-1)),_(e("input",{type:"number",id:"edit-qty","onUpdate:modelValue":y[1]||(y[1]=r=>c.value.QTY=r),min:"1",required:""},null,512),[[S,c.value.QTY]])]),e("div",Ys,[y[11]||(y[11]=e("label",{for:"edit-amount"},"Amount",-1)),_(e("input",{type:"number",id:"edit-amount","onUpdate:modelValue":y[2]||(y[2]=r=>c.value.amount=r),step:"0.01",required:""},null,512),[[S,c.value.amount]])]),e("div",Js,[e("div",Qs,[y[12]||(y[12]=e("label",{for:"edit-year"},"Year",-1)),_(e("input",{type:"number",id:"edit-year","onUpdate:modelValue":y[3]||(y[3]=r=>c.value.year=r),required:""},null,512),[[S,c.value.year]])]),e("div",js,[y[13]||(y[13]=e("label",{for:"edit-month"},"Month",-1)),_(e("input",{type:"number",id:"edit-month","onUpdate:modelValue":y[4]||(y[4]=r=>c.value.month=r),min:"1",max:"12",required:""},null,512),[[S,c.value.month]])])]),e("div",Gs,[y[14]||(y[14]=e("label",{for:"edit-price-sell"},"Price Sell",-1)),_(e("input",{type:"number",id:"edit-price-sell","onUpdate:modelValue":y[5]||(y[5]=r=>c.value.price_sell=r),step:"0.01",required:""},null,512),[[S,c.value.price_sell]])]),e("div",zs,[y[15]||(y[15]=e("label",{for:"edit-notes"},"Notes",-1)),_(e("textarea",{id:"edit-notes","onUpdate:modelValue":y[6]||(y[6]=r=>c.value.notes=r),rows:"3"},null,512),[[S,c.value.notes]])]),e("div",Ks,[e("button",{type:"button",onClick:y[7]||(y[7]=r=>k.value=!1),class:"cancel-btn"}," Cancel "),y[16]||(y[16]=e("button",{type:"submit",class:"submit-btn"}," Save Changes ",-1))])],32)])])):h("",!0)],64))}},Zs=j(Xs,[["__scopeId","data-v-25287d99"]]),ea={class:"buy-view"},la={class:"content"},ta={class:"master-detail-vertical"},sa=["onClick","disabled"],aa=["onClick","disabled"];const oa=["onClick","disabled"],na={key:0,class:"dialog-overlay"},ia={class:"dialog"},ua={class:"form-group"},da=["value"],ra={class:"form-group"},ca={class:"form-group"},va={class:"form-group"},pa=["href"],_a={class:"dialog-buttons"},ba={key:1,class:"dialog-overlay"},ma={class:"dialog"},ga={class:"form-group"},fa=["value"],ya={class:"form-group"},ka={class:"form-group"},Ea={class:"form-group"},$a=["href"],Ca={key:1,class:"validation-message"},wa={class:"dialog-buttons"},ha={key:2,class:"dialog-overlay"},Sa={class:"dialog"},Da={class:"form-group"},Aa=["value"],Na={class:"form-group"},Ta=["value"],Ua={class:"form-group"},Pa={class:"form-group"},Ra={class:"form-row"},Va={class:"form-group half"},Ba={class:"form-group half"},Oa={class:"form-group"},Ia={class:"form-group"},qa={class:"form-group checkbox"},La={class:"dialog-buttons"},Fa={__name:"BuyView",setup(L){const{callApi:A,uploadFile:$,getFileUrl:P}=G();be();const R=b([]),k=b(null),c=b([]),N=b([]),v=b([]),C=b([]),T=b(!1),f=b(!1),g=b(!1),y=b(null),r=b(JSON.parse(localStorage.getItem("user"))),d=J(()=>{var D;return((D=r.value)==null?void 0:D.role_id)===1}),p=D=>D.amount>0&&!D.is_stock_updated,w=async D=>{if(confirm("Are you sure you want to update the stock? This action cannot be undone."))try{(await A({query:`
        UPDATE buy_bill 
        SET is_stock_updated = 1 
        WHERE id = ?
      `,params:[D.id]})).success?await x():alert("Failed to update stock")}catch(n){console.error("Error updating stock:",n),alert("Failed to update stock")}},B=async D=>{var n;if(confirm("Are you sure you want to delete this purchase and all its details? This action cannot be undone."))try{if(D.is_stock_updated){alert("Cannot delete a purchase that has already been updated in stock");return}if(!(await A({query:"DELETE FROM buy_payments WHERE id_buy_bill = ?",params:[D.id]})).success)throw new Error("Failed to delete related payments");if(!(await A({query:"DELETE FROM buy_details WHERE id_buy_bill = ?",params:[D.id]})).success)throw new Error("Failed to delete purchase details");if((await A({query:"DELETE FROM buy_bill WHERE id = ? AND is_stock_updated = 0",params:[D.id]})).success)((n=k.value)==null?void 0:n.id)===D.id&&(k.value=null,c.value=[]),await x();else throw new Error("Failed to delete purchase")}catch(a){console.error("Error deleting purchase:",a),alert(a.message||"Failed to delete purchase")}},U=D=>{y.value=D,V.value={id_supplier:D.id_supplier,date_buy:D.date_buy.slice(0,16),bill_ref:D.bill_ref||"",pi_path:D.pi_path||"",pi_file:null},f.value=!0},F=()=>{y.value=null,V.value={id_supplier:null,date_buy:new Date().toISOString().slice(0,16),bill_ref:"",pi_path:"",pi_file:null},T.value=!0},V=b({id_supplier:null,date_buy:new Date().toISOString().slice(0,16),amount:0,bill_ref:"",pi_path:"",pi_file:null}),O=b({id_car_name:null,id_color:null,amount:0,notes:"",QTY:1,year:new Date().getFullYear(),month:new Date().getMonth()+1,is_used_car:!1,id_buy_bill:null}),K=D=>{const n=D.target.files[0];if(!n)return;if(!["application/pdf","image/jpeg","image/png","image/gif","image/webp"].includes(n.type)){alert("Only PDF and image files (JPEG, PNG, GIF, WEBP) are allowed"),D.target.value="";return}V.value.pi_file=n},E=async()=>{const D=await A({query:"SELECT * FROM suppliers ORDER BY name ASC",params:[]});D.success&&(N.value=D.data)},i=async()=>{var D;try{if(!V.value.pi_file){alert("PI document is required. Please select a file.");return}try{const a=new Date,l=a.getTime(),s=a.toISOString().split("T")[0],Y=a.toISOString().split("T")[1].split(".")[0].replace(/:/g,"-"),ce=((D=N.value.find(pe=>pe.id===V.value.id_supplier))==null?void 0:D.name)||"unknown",ve=V.value.pi_file.name.split(".").pop().toLowerCase(),le=`pi_purchase_${ce.replace(/\s+/g,"_")}_${s}_${Y}_${l}.${ve}`,te=await $(V.value.pi_file,"purchase_pi",le);if(!te.success)throw new Error(te.message||"Failed to upload PI document");V.value.pi_path=`purchase_pi/${le}`}catch(a){throw console.error("Upload error:",a),new Error(`Failed to upload PI document: ${a.message}`)}const n=await A({query:`
        INSERT INTO buy_bill (id_supplier, date_buy, bill_ref, pi_path)
        VALUES (?, ?, ?, ?)
      `,params:[V.value.id_supplier,V.value.date_buy,V.value.bill_ref,V.value.pi_path]});if(n.success)T.value=!1,await x(),V.value={id_supplier:null,date_buy:new Date().toISOString().slice(0,16),bill_ref:"",pi_path:"",pi_file:null};else throw new Error(n.error||"Failed to add purchase")}catch(n){console.error("Error adding purchase:",n),alert(n.message)}},u=async()=>{var D;try{if(!V.value.pi_file&&!V.value.pi_path){alert("PI document is required. Please select a file.");return}if(V.value.pi_file)try{const a=new Date,l=a.getTime(),s=a.toISOString().split("T")[0],Y=a.toISOString().split("T")[1].split(".")[0].replace(/:/g,"-"),ce=((D=N.value.find(pe=>pe.id===V.value.id_supplier))==null?void 0:D.name)||"unknown",ve=V.value.pi_file.name.split(".").pop().toLowerCase(),le=`pi_purchase_${ce.replace(/\s+/g,"_")}_${s}_${Y}_${l}.${ve}`,te=await $(V.value.pi_file,"purchase_pi",le);if(!te.success)throw new Error(te.message||"Failed to upload PI document");V.value.pi_path=`purchase_pi/${le}`}catch(a){throw console.error("Upload error:",a),new Error(`Failed to upload PI document: ${a.message}`)}const n=await A({query:`
        UPDATE buy_bill 
        SET id_supplier = ?, date_buy = ?, bill_ref = ?, pi_path = ?
        WHERE id = ?
      `,params:[V.value.id_supplier,V.value.date_buy,V.value.bill_ref,V.value.pi_path,y.value.id]});if(n.success)f.value=!1,y.value=null,await x(),V.value={id_supplier:null,date_buy:new Date().toISOString().slice(0,16),bill_ref:"",pi_path:"",pi_file:null};else throw new Error(n.error||"Failed to update purchase")}catch(n){console.error("Error updating purchase:",n),alert(n.message)}},x=async()=>{const D=await A({query:`
      SELECT 
        bb.*,
        s.name as supplier_name,
        COALESCE((
          SELECT SUM(amount * QTY)
          FROM buy_details
          WHERE id_buy_bill = bb.id
        ), 0) as calculated_amount
      FROM buy_bill bb 
      LEFT JOIN suppliers s ON bb.id_supplier = s.id 
      ORDER BY bb.date_buy DESC
    `,params:[]});D.success&&(R.value=D.data.map(n=>({...n,amount:Number(n.calculated_amount),payed:Number(n.payed)})))},Z=async D=>{const n=await A({query:`
      SELECT bd.*, cn.car_name, c.color, bb.is_stock_updated
      FROM buy_details bd
      LEFT JOIN cars_names cn ON bd.id_car_name = cn.id
      LEFT JOIN colors c ON bd.id_color = c.id
      LEFT JOIN buy_bill bb ON bd.id_buy_bill = bb.id
      WHERE bd.id_buy_bill = ?
    `,params:[D]});n.success?c.value=n.data:console.error("Error fetching details:",n.error)},ae=D=>{k.value=D,Z(D.id)},oe=async()=>{const D=await A({query:"SELECT * FROM cars_names ORDER BY car_name ASC",params:[]});D.success&&(v.value=D.data)},ne=async()=>{const D=await A({query:"SELECT * FROM colors ORDER BY color ASC",params:[]});D.success&&(C.value=D.data)},ee=async D=>{const n=await A({query:`
      UPDATE buy_bill 
      SET amount = (
        SELECT COALESCE(SUM(amount * QTY), 0)
        FROM buy_details
        WHERE id_buy_bill = ?
      )
      WHERE id = ?
    `,params:[D,D]});n.success||console.error("Error updating bill amount:",n.error)},ie=async()=>{const D=await A({query:`
      INSERT INTO buy_details 
      (id_car_name, id_color, amount, notes, QTY, year, month, is_used_car, id_buy_bill, price_sell)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `,params:[O.value.id_car_name,O.value.id_color,O.value.amount,O.value.notes,O.value.QTY,O.value.year,O.value.month,O.value.is_used_car?1:0,k.value.id,O.value.price_sell]});D.success?(await ee(k.value.id),g.value=!1,await Z(k.value.id),await x(),O.value={id_car_name:null,id_color:null,amount:0,notes:"",QTY:1,year:new Date().getFullYear(),month:new Date().getMonth()+1,is_used_car:!1,id_buy_bill:null}):console.error("Error adding detail:",D.error)};z(()=>{x(),E(),oe(),ne()});const ue=async D=>{const n=await A({query:"DELETE FROM buy_details WHERE id = ?",params:[D]});n.success?(await ee(k.value.id),await Z(k.value.id),await x()):(alert("Failed to delete detail. Please try again."),console.error("Error deleting detail:",n.error))},de=async D=>{const n=await A({query:`
      UPDATE buy_details 
      SET QTY = ?, amount = ?, year = ?, month = ?, notes = ?, price_sell = ?
      WHERE id = ?
    `,params:[D.QTY,D.amount,D.year,D.month,D.notes,D.price_sell,D.id]});n.success?(await ee(k.value.id),await Z(k.value.id),await x()):(alert("Failed to update detail. Please try again."),console.error("Error updating detail:",n.error))},re=D=>{window.open(`/buy-payments/${D.id}`,"_blank")};return(D,n)=>(t(),o("div",ea,[e("div",{class:"header"},[n[19]||(n[19]=e("h2",null,"Buy Management",-1)),e("button",{onClick:F,class:"add-btn"},"Add New Purchase")]),e("div",la,[e("div",ta,[ge(Ps,{buyBills:R.value,selectedBill:k.value,onSelectBill:ae},{actions:fe(({bill:a})=>[e("button",{onClick:X(l=>re(a),["stop"]),class:"payment-btn",disabled:a.is_stock_updated}," Payments ",8,sa),e("button",{onClick:X(l=>U(a),["stop"]),class:"action-btn edit-btn",disabled:a.is_stock_updated}," Edit ",8,aa),h("",!0),d.value?(t(),o("button",{key:1,onClick:X(l=>B(a),["stop"]),class:"action-btn delete-btn",disabled:a.is_stock_updated}," Delete ",8,oa)):h("",!0)]),_:1},8,["buyBills","selectedBill"]),k.value?(t(),Q(Zs,{key:0,buyDetails:c.value,isAdmin:d.value,onAddDetail:n[0]||(n[0]=a=>g.value=!0),onDeleteDetail:ue,onUpdateDetail:de},null,8,["buyDetails","isAdmin"])):h("",!0)])]),T.value?(t(),o("div",na,[e("div",ia,[n[26]||(n[26]=e("h3",null,"Add New Purchase",-1)),e("form",{onSubmit:X(i,["prevent"])},[e("div",ua,[n[21]||(n[21]=e("label",null,"Supplier",-1)),_(e("select",{"onUpdate:modelValue":n[1]||(n[1]=a=>V.value.id_supplier=a),required:""},[n[20]||(n[20]=e("option",{value:""},"Select Supplier",-1)),(t(!0),o(I,null,q(N.value,a=>(t(),o("option",{key:a.id,value:a.id},m(a.name),9,da))),128))],512),[[W,V.value.id_supplier]])]),e("div",ra,[n[22]||(n[22]=e("label",null,"Date",-1)),_(e("input",{type:"datetime-local","onUpdate:modelValue":n[2]||(n[2]=a=>V.value.date_buy=a),required:""},null,512),[[S,V.value.date_buy]])]),e("div",ca,[n[23]||(n[23]=e("label",null,[H("Bill Reference "),e("span",{class:"required"},"*")],-1)),_(e("input",{type:"text","onUpdate:modelValue":n[3]||(n[3]=a=>V.value.bill_ref=a),placeholder:"Enter bill reference number",required:""},null,512),[[S,V.value.bill_ref]])]),e("div",va,[n[24]||(n[24]=e("label",null,[H("PI Document (PDF or Image) "),e("span",{class:"required"},"*")],-1)),e("input",{type:"file",onChange:K,accept:".pdf,.jpg,.jpeg,.png,.gif,.webp",required:""},null,32),V.value.pi_path?(t(),o("a",{key:0,href:se(P)(V.value.pi_path),target:"_blank",class:"current-file-link"}," View Current PI Document ",8,pa)):h("",!0)]),e("div",_a,[e("button",{type:"button",onClick:n[4]||(n[4]=a=>T.value=!1),class:"cancel-btn"}," Cancel "),n[25]||(n[25]=e("button",{type:"submit",class:"submit-btn"}," Add Purchase ",-1))])],32)])])):h("",!0),f.value?(t(),o("div",ba,[e("div",ma,[n[33]||(n[33]=e("h3",null,"Edit Purchase",-1)),e("form",{onSubmit:X(u,["prevent"])},[e("div",ga,[n[28]||(n[28]=e("label",null,"Supplier",-1)),_(e("select",{"onUpdate:modelValue":n[5]||(n[5]=a=>V.value.id_supplier=a),required:""},[n[27]||(n[27]=e("option",{value:""},"Select Supplier",-1)),(t(!0),o(I,null,q(N.value,a=>(t(),o("option",{key:a.id,value:a.id},m(a.name),9,fa))),128))],512),[[W,V.value.id_supplier]])]),e("div",ya,[n[29]||(n[29]=e("label",null,"Date",-1)),_(e("input",{type:"datetime-local","onUpdate:modelValue":n[6]||(n[6]=a=>V.value.date_buy=a),required:""},null,512),[[S,V.value.date_buy]])]),e("div",ka,[n[30]||(n[30]=e("label",null,[H("Bill Reference "),e("span",{class:"required"},"*")],-1)),_(e("input",{type:"text","onUpdate:modelValue":n[7]||(n[7]=a=>V.value.bill_ref=a),placeholder:"Enter bill reference number",required:""},null,512),[[S,V.value.bill_ref]])]),e("div",Ea,[n[31]||(n[31]=e("label",null,[H("PI Document (PDF or Image) "),e("span",{class:"required"},"*")],-1)),e("input",{type:"file",onChange:K,accept:".pdf,.jpg,.jpeg,.png,.gif,.webp"},null,32),V.value.pi_path?(t(),o("a",{key:0,href:se(P)(V.value.pi_path),target:"_blank",class:"current-file-link"}," View Current PI Document ",8,$a)):h("",!0),!V.value.pi_path&&!V.value.pi_file?(t(),o("div",Ca," PI document is required ")):h("",!0)]),e("div",wa,[e("button",{type:"button",onClick:n[8]||(n[8]=a=>f.value=!1),class:"cancel-btn"}," Cancel "),n[32]||(n[32]=e("button",{type:"submit",class:"submit-btn"}," Update Purchase ",-1))])],32)])])):h("",!0),g.value?(t(),o("div",ha,[e("div",Sa,[n[46]||(n[46]=e("h3",null,"Add Purchase Detail",-1)),e("form",{onSubmit:X(ie,["prevent"])},[e("div",Da,[n[35]||(n[35]=e("label",null,"Car",-1)),_(e("select",{"onUpdate:modelValue":n[9]||(n[9]=a=>O.value.id_car_name=a),required:""},[n[34]||(n[34]=e("option",{value:""},"Select Car",-1)),(t(!0),o(I,null,q(v.value,a=>(t(),o("option",{key:a.id,value:a.id},m(a.car_name),9,Aa))),128))],512),[[W,O.value.id_car_name]])]),e("div",Na,[n[37]||(n[37]=e("label",null,"Color",-1)),_(e("select",{"onUpdate:modelValue":n[10]||(n[10]=a=>O.value.id_color=a),required:""},[n[36]||(n[36]=e("option",{value:""},"Select Color",-1)),(t(!0),o(I,null,q(C.value,a=>(t(),o("option",{key:a.id,value:a.id},m(a.color),9,Ta))),128))],512),[[W,O.value.id_color]])]),e("div",Ua,[n[38]||(n[38]=e("label",null,"Quantity",-1)),_(e("input",{type:"number","onUpdate:modelValue":n[11]||(n[11]=a=>O.value.QTY=a),min:"1",required:""},null,512),[[S,O.value.QTY]])]),e("div",Pa,[n[39]||(n[39]=e("label",null,"Amount",-1)),_(e("input",{type:"number","onUpdate:modelValue":n[12]||(n[12]=a=>O.value.amount=a),step:"0.01",required:""},null,512),[[S,O.value.amount]])]),e("div",Ra,[e("div",Va,[n[40]||(n[40]=e("label",null,"Year",-1)),_(e("input",{type:"number","onUpdate:modelValue":n[13]||(n[13]=a=>O.value.year=a),required:""},null,512),[[S,O.value.year]])]),e("div",Ba,[n[41]||(n[41]=e("label",null,"Month",-1)),_(e("input",{type:"number","onUpdate:modelValue":n[14]||(n[14]=a=>O.value.month=a),min:"1",max:"12",required:""},null,512),[[S,O.value.month]])])]),e("div",Oa,[n[42]||(n[42]=e("label",null,"Price Sell",-1)),_(e("input",{type:"number","onUpdate:modelValue":n[15]||(n[15]=a=>O.value.price_sell=a),step:"0.01",required:""},null,512),[[S,O.value.price_sell]])]),e("div",Ia,[n[43]||(n[43]=e("label",null,"Notes",-1)),_(e("textarea",{"onUpdate:modelValue":n[16]||(n[16]=a=>O.value.notes=a),rows:"3"},null,512),[[S,O.value.notes]])]),e("div",qa,[e("label",null,[_(e("input",{type:"checkbox","onUpdate:modelValue":n[17]||(n[17]=a=>O.value.is_used_car=a)},null,512),[[_e,O.value.is_used_car]]),n[44]||(n[44]=H(" Used Car "))])]),e("div",La,[e("button",{type:"button",onClick:n[18]||(n[18]=a=>g.value=!1),class:"cancel-btn"}," Cancel "),n[45]||(n[45]=e("button",{type:"submit",class:"submit-btn"}," Add Detail ",-1))])],32)])])):h("",!0)]))}},Ma=j(Fa,[["__scopeId","data-v-f071b48d"]]),xa={class:"sell-view"},Wa={class:"header"},Ha={key:0,class:"selected-bill"},Ya={class:"bill-id"},Ja={class:"content"},Qa={key:0,class:"loading"},ja={key:1,class:"error"},Ga={key:2,class:"tables-container"},za={class:"sell-bills-table"},Ka=["onClick"],Xa=["onClick"],Za=["onClick"],eo={key:0,class:"car-stock-table"},lo={key:0,class:"loading"},to={key:1,class:"no-data"},so={key:2},ao=["onClick"],oo=["onClick"],no={key:1,class:"available-cars-table"},io={key:0,class:"loading"},uo={key:1,class:"no-data"},ro={key:2},co=["onClick"],vo={key:1,class:"dialog-overlay"},po={class:"dialog"},_o={class:"form-group"},bo=["value"],mo={class:"form-group"},go={class:"form-group"},fo=["value"],yo={class:"form-group"},ko=["value"],Eo={class:"form-group"},$o={class:"dialog-buttons"},Co={key:2,class:"dialog-overlay"},wo={class:"dialog"},ho={class:"form-group"},So=["value"],Do={class:"form-group"},Ao={class:"form-group"},No={class:"dialog-buttons"},To={key:3,class:"dialog-overlay"},Uo={class:"dialog"},Po={class:"form-group"},Ro=["value"],Vo={class:"form-group"},Bo={class:"form-group"},Oo=["value"],Io={class:"form-group"},qo=["value"],Lo={class:"form-group"},Fo={class:"form-group"},Mo={class:"dialog-buttons"},xo={key:4,class:"dialog-overlay"},Wo={class:"dialog"},Ho={class:"form-group"},Yo=["value"],Jo={class:"form-group"},Qo={class:"form-group"},jo=["value"],Go={class:"form-group"},zo=["value"],Ko={class:"form-group"},Xo={class:"dialog-buttons"},Zo={key:5,class:"dialog-overlay"},en={class:"dialog"},ln={class:"form-group"},tn=["value"],sn={class:"form-group"},an={class:"form-group"},on={class:"dialog-buttons"},nn={key:6,class:"dialog-overlay"},un={class:"dialog"},dn={class:"form-group"},rn=["value"],cn={class:"form-group"},vn={class:"form-group"},pn={class:"dialog-buttons"},_n={__name:"SellView",setup(L){const{callApi:A}=G(),$=b([]),P=b([]),R=b([]),k=b(!0),c=b(!1),N=b(!1),v=b(null),C=b(null),T=b(!1),f=b(!1),g=b(null),y=b([]),r=b([]),d=b([]),p=b(!1),w=b({id:null,id_broker:null,date_sell:"",notes:""}),B=b(!1),U=b(null),F=b({id_broker:null,date_sell:new Date().toISOString().split("T")[0],notes:""}),V=b([]),O=async()=>{k.value=!0,v.value=null;try{const a=await A({query:`
        SELECT 
          sb.id,
          sb.date_sell,
          sb.notes,
          c.name as broker_name,
          c.mobiles as broker_mobile
        FROM sell_bill sb
        LEFT JOIN clients c ON sb.id_broker = c.id AND c.is_broker = 1
        ORDER BY sb.date_sell DESC
      `,params:[]});a.success?$.value=a.data:v.value=a.error||"Failed to fetch sell bills"}catch(a){v.value=a.message||"An error occurred"}finally{k.value=!1}},K=async()=>{try{const a=await A({query:`
        SELECT id, name, mobiles
        FROM clients
        WHERE is_broker = 1
        ORDER BY name ASC
      `,params:[]});a.success&&(V.value=a.data)}catch(a){console.error("Error fetching brokers:",a)}},E=async a=>{C.value=a.id,await i(a.id)},i=async a=>{c.value=!0;try{const l=await A({query:`
        SELECT 
          cs.id,
          cs.vin,
          cs.price_cell,
          cs.date_loding,
          cs.date_sell,
          cs.notes,
          cs.freight,
          cs.path_documents,
          cs.sell_pi_path,
          cs.buy_pi_path,
          c.name as client_name,
          cn.car_name,
          clr.color,
          lp.loading_port,
          dp.discharge_port,
          bd.price_sell as buy_price
        FROM cars_stock cs
        LEFT JOIN clients c ON cs.id_client = c.id
        LEFT JOIN buy_details bd ON cs.id_buy_details = bd.id
        LEFT JOIN cars_names cn ON bd.id_car_name = cn.id
        LEFT JOIN colors clr ON bd.id_color = clr.id
        LEFT JOIN loading_ports lp ON cs.id_port_loading = lp.id
        LEFT JOIN discharge_ports dp ON cs.id_port_discharge = dp.id
        WHERE cs.id_sell = ? AND cs.hidden = 0
        ORDER BY cs.id DESC
      `,params:[a]});l.success?P.value=l.data:v.value=l.error||"Failed to fetch cars stock"}catch(l){v.value=l.message||"An error occurred"}finally{c.value=!1}},u=async()=>{N.value=!0;try{const a=await A({query:`
        SELECT 
          cs.id,
          cs.vin,
          cs.price_cell,
          cs.date_loding,
          cs.notes,
          cs.freight,
          c.name as client_name,
          cn.car_name,
          clr.color,
          lp.loading_port,
          dp.discharge_port,
          bd.price_sell as buy_price
        FROM cars_stock cs
        LEFT JOIN clients c ON cs.id_client = c.id
        LEFT JOIN buy_details bd ON cs.id_buy_details = bd.id
        LEFT JOIN cars_names cn ON bd.id_car_name = cn.id
        LEFT JOIN colors clr ON bd.id_color = clr.id
        LEFT JOIN loading_ports lp ON cs.id_port_loading = lp.id
        LEFT JOIN discharge_ports dp ON cs.id_port_discharge = dp.id
        WHERE cs.id_sell IS NULL AND cs.hidden = 0
        ORDER BY cs.id DESC
      `,params:[]});a.success?R.value=a.data:v.value=a.error||"Failed to fetch available cars"}catch(a){v.value=a.message||"An error occurred"}finally{N.value=!1}},x=async()=>{try{const a=await A({query:`
        INSERT INTO sell_bill (id_broker, date_sell, notes)
        VALUES (?, ?, ?)
      `,params:[F.value.id_broker,F.value.date_sell,F.value.notes]});a.success?(T.value=!1,F.value={id_broker:null,date_sell:new Date().toISOString().split("T")[0],notes:""},await O()):v.value=a.error||"Failed to add sell bill"}catch(a){v.value=a.message||"An error occurred"}},Z=async()=>{try{const a=await A({query:"SELECT * FROM loading_ports ORDER BY loading_port ASC",params:[]});a.success&&(y.value=a.data)}catch(a){console.error("Error fetching loading ports:",a)}},ae=async()=>{try{const a=await A({query:"SELECT * FROM discharge_ports ORDER BY discharge_port ASC",params:[]});a.success&&(r.value=a.data)}catch(a){console.error("Error fetching discharge ports:",a)}},oe=async()=>{try{const a=await A({query:"SELECT * FROM clients WHERE is_broker = 0 ORDER BY name ASC",params:[]});a.success&&(d.value=a.data)}catch(a){console.error("Error fetching clients:",a)}},ne=a=>{g.value={...a},f.value=!0},ee=async()=>{if(!C.value){alert("Please select a bill first");return}if(!g.value.id_client){alert("Client name is required");return}if(!g.value.id_port_discharge){alert("Discharge port is required");return}if(!g.value.price_cell){alert("Selling price is required");return}try{const a=await A({query:`
        UPDATE cars_stock 
        SET id_sell = ?,
            id_client = ?,
            vin = ?,
            id_port_loading = ?,
            id_port_discharge = ?,
            price_cell = ?
        WHERE id = ?
      `,params:[C.value,g.value.id_client,g.value.vin,g.value.id_port_loading,g.value.id_port_discharge,g.value.price_cell,g.value.id]});a.success?(f.value=!1,await i(C.value),await u()):v.value=a.error||"Failed to assign car to bill"}catch(a){v.value=a.message||"An error occurred"}},ie=async a=>{try{const l=await A({query:`
        UPDATE cars_stock 
        SET id_client = NULL,
            id_port_discharge = NULL,
            id_sell = NULL
        WHERE id = ?
      `,params:[a]});l.success?(await i(C.value),await u()):v.value=l.error||"Failed to unassign car"}catch(l){v.value=l.message||"An error occurred"}},ue=(a,l)=>{l.stopPropagation(),w.value={id:a.id,id_broker:a.id_broker,date_sell:a.date_sell.split("T")[0],notes:a.notes||""},p.value=!0},de=async()=>{try{const a=await A({query:`
        UPDATE sell_bill 
        SET id_broker = ?, 
            date_sell = ?, 
            notes = ?
        WHERE id = ?
      `,params:[w.value.id_broker,w.value.date_sell,w.value.notes,w.value.id]});a.success?(p.value=!1,await O(),C.value===w.value.id&&await i(C.value)):v.value=a.error||"Failed to update sell bill"}catch(a){v.value=a.message||"An error occurred"}},re=async(a,l)=>{if(l.stopPropagation(),!!confirm("Are you sure you want to delete this sell bill? This will also unassign all cars from this bill."))try{const s=await A({query:`
        UPDATE cars_stock 
        SET id_sell = NULL 
        WHERE id_sell = ?
      `,params:[a]});if(!s.success){v.value=s.error||"Failed to unassign cars from bill";return}const Y=await A({query:`
        DELETE FROM sell_bill 
        WHERE id = ?
      `,params:[a]});Y.success?(C.value===a&&(C.value=null,P.value=[]),await O(),await u()):v.value=Y.error||"Failed to delete sell bill"}catch(s){v.value=s.message||"An error occurred"}};z(async()=>{await O(),await K(),await u(),await Z(),await ae(),await oe()});const D=a=>{U.value={...a},B.value=!0},n=async()=>{if(U.value)try{const a=await A({query:`
        UPDATE cars_stock 
        SET id_client = ?,
            vin = ?,
            id_port_loading = ?,
            id_port_discharge = ?,
            price_cell = ?,
            notes = ?
        WHERE id = ?
      `,params:[U.value.id_client,U.value.vin,U.value.id_port_loading,U.value.id_port_discharge,U.value.price_cell,U.value.notes,U.value.id]});a.success?(B.value=!1,await i(C.value)):v.value=a.error||"Failed to update car"}catch(a){v.value=a.message||"An error occurred"}};return(a,l)=>(t(),o("div",xa,[e("div",Wa,[l[32]||(l[32]=e("h2",null,"Sell Bills Management",-1)),e("button",{class:"add-btn",onClick:l[0]||(l[0]=s=>T.value=!0)}," Add New Sell Bill ")]),C.value?(t(),o("div",Ha,[l[33]||(l[33]=H(" Selected Bill ID: ")),e("span",Ya,m(C.value),1)])):h("",!0),e("div",Ja,[k.value?(t(),o("div",Qa,"Loading...")):v.value?(t(),o("div",ja,m(v.value),1)):(t(),o("div",Ga,[e("div",za,[l[35]||(l[35]=e("h3",null,"Sell Bills",-1)),e("table",null,[l[34]||(l[34]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Date"),e("th",null,"Broker"),e("th",null,"Notes"),e("th",null,"Actions")])],-1)),e("tbody",null,[(t(!0),o(I,null,q($.value,s=>(t(),o("tr",{key:s.id,onClick:Y=>E(s),class:M({selected:C.value===s.id})},[e("td",null,m(s.id),1),e("td",null,m(new Date(s.date_sell).toLocaleDateString()),1),e("td",null,m(s.broker_name||"N/A"),1),e("td",null,m(s.notes||"N/A"),1),e("td",null,[e("button",{onClick:Y=>ue(s,Y),class:"btn edit-btn"},"Edit",8,Xa),e("button",{class:"btn delete-btn",onClick:Y=>re(s.id,Y)},"Delete",8,Za)])],10,Ka))),128))])])]),C.value?(t(),o("div",eo,[l[37]||(l[37]=e("h3",null,"Cars in Selected Bill",-1)),c.value?(t(),o("div",lo,"Loading cars...")):P.value.length===0?(t(),o("div",to," No cars found for this sell bill ")):(t(),o("table",so,[l[36]||(l[36]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Car"),e("th",null,"Color"),e("th",null,"VIN"),e("th",null,"Client"),e("th",null,"Loading Port"),e("th",null,"Discharge Port"),e("th",null,"Buy Price"),e("th",null,"Sell Price"),e("th",null,"Profit"),e("th",null,"Actions")])],-1)),e("tbody",null,[(t(!0),o(I,null,q(P.value,s=>(t(),o("tr",{key:s.id},[e("td",null,m(s.id),1),e("td",null,m(s.car_name||"N/A"),1),e("td",null,m(s.color||"N/A"),1),e("td",null,m(s.vin||"N/A"),1),e("td",null,m(s.client_name||"N/A"),1),e("td",null,m(s.loading_port||"N/A"),1),e("td",null,m(s.discharge_port||"N/A"),1),e("td",null,"$"+m(s.buy_price||0),1),e("td",null,"$"+m(s.price_cell||0),1),e("td",null,"$"+m(s.price_cell-s.buy_price||0),1),e("td",null,[e("button",{onClick:Y=>D(s),class:"edit-btn"},"Edit",8,ao),e("button",{onClick:Y=>ie(s.id),class:"unassign-btn"},"Unassign",8,oo)])]))),128))])]))])):h("",!0),C.value?(t(),o("div",no,[l[39]||(l[39]=e("h3",null,"Available Cars",-1)),N.value?(t(),o("div",io,"Loading...")):R.value.length===0?(t(),o("div",uo,"No available cars")):(t(),o("table",ro,[l[38]||(l[38]=e("thead",null,[e("tr",null,[e("th",null,"Car"),e("th",null,"Color"),e("th",null,"VIN"),e("th",null,"Buy Price"),e("th",null,"Actions")])],-1)),e("tbody",null,[(t(!0),o(I,null,q(R.value,s=>(t(),o("tr",{key:s.id},[e("td",null,m(s.car_name||"N/A"),1),e("td",null,m(s.color||"N/A"),1),e("td",null,m(s.vin||"N/A"),1),e("td",null,"$"+m(s.buy_price||0),1),e("td",null,"$"+m(s.price_cell||0),1),e("td",null,"$"+m(s.price_cell-s.buy_price||0),1),e("td",null,[e("button",{onClick:Y=>ne(s),class:"assign-btn"},"Assign to Bill",8,co)])]))),128))])]))])):h("",!0)]))]),f.value?(t(),o("div",vo,[e("div",po,[l[48]||(l[48]=e("h2",null,"Assign Car to Bill",-1)),e("div",_o,[l[41]||(l[41]=e("label",{for:"client"},[H("Client: "),e("span",{class:"required"},"*")],-1)),_(e("select",{id:"client","onUpdate:modelValue":l[1]||(l[1]=s=>g.value.id_client=s),required:""},[l[40]||(l[40]=e("option",{value:""},"Select Client",-1)),(t(!0),o(I,null,q(d.value,s=>(t(),o("option",{key:s.id,value:s.id},m(s.name),9,bo))),128))],512),[[W,g.value.id_client]])]),e("div",mo,[l[42]||(l[42]=e("label",{for:"vin"},"VIN:",-1)),_(e("input",{type:"text",id:"vin","onUpdate:modelValue":l[2]||(l[2]=s=>g.value.vin=s)},null,512),[[S,g.value.vin]])]),e("div",go,[l[44]||(l[44]=e("label",{for:"loading-port"},"Loading Port:",-1)),_(e("select",{id:"loading-port","onUpdate:modelValue":l[3]||(l[3]=s=>g.value.id_port_loading=s)},[l[43]||(l[43]=e("option",{value:""},"Select Loading Port",-1)),(t(!0),o(I,null,q(y.value,s=>(t(),o("option",{key:s.id,value:s.id},m(s.loading_port),9,fo))),128))],512),[[W,g.value.id_port_loading]])]),e("div",yo,[l[46]||(l[46]=e("label",{for:"discharge-port"},[H("Discharge Port: "),e("span",{class:"required"},"*")],-1)),_(e("select",{id:"discharge-port","onUpdate:modelValue":l[4]||(l[4]=s=>g.value.id_port_discharge=s),required:""},[l[45]||(l[45]=e("option",{value:""},"Select Discharge Port",-1)),(t(!0),o(I,null,q(r.value,s=>(t(),o("option",{key:s.id,value:s.id},m(s.discharge_port),9,ko))),128))],512),[[W,g.value.id_port_discharge]])]),e("div",Eo,[l[47]||(l[47]=e("label",{for:"sell-price"},[H("Sell Price: "),e("span",{class:"required"},"*")],-1)),_(e("input",{type:"number",id:"sell-price","onUpdate:modelValue":l[5]||(l[5]=s=>g.value.price_cell=s),required:""},null,512),[[S,g.value.price_cell]])]),e("div",$o,[e("button",{onClick:ee,class:"primary"},"Assign"),e("button",{onClick:l[6]||(l[6]=s=>f.value=!1)},"Cancel")])])])):h("",!0),T.value?(t(),o("div",Co,[e("div",wo,[l[53]||(l[53]=e("h3",null,"Add New Sell Bill",-1)),e("div",ho,[l[50]||(l[50]=e("label",{for:"broker"},"Broker:",-1)),_(e("select",{id:"broker","onUpdate:modelValue":l[7]||(l[7]=s=>F.value.id_broker=s)},[l[49]||(l[49]=e("option",{value:""},"Select Broker",-1)),(t(!0),o(I,null,q(V.value,s=>(t(),o("option",{key:s.id,value:s.id},m(s.name),9,So))),128))],512),[[W,F.value.id_broker]])]),e("div",Do,[l[51]||(l[51]=e("label",{for:"date"},"Date:",-1)),_(e("input",{type:"date",id:"date","onUpdate:modelValue":l[8]||(l[8]=s=>F.value.date_sell=s)},null,512),[[S,F.value.date_sell]])]),e("div",Ao,[l[52]||(l[52]=e("label",{for:"notes"},"Notes:",-1)),_(e("textarea",{id:"notes","onUpdate:modelValue":l[9]||(l[9]=s=>F.value.notes=s)},null,512),[[S,F.value.notes]])]),e("div",No,[e("button",{onClick:l[10]||(l[10]=s=>T.value=!1)},"Cancel"),e("button",{onClick:x,class:"primary"},"Add")])])])):h("",!0),B.value?(t(),o("div",To,[e("div",Uo,[l[63]||(l[63]=e("h3",null,"Edit Car Details",-1)),e("div",Po,[l[55]||(l[55]=e("label",{for:"edit-car-client"},"Client:",-1)),_(e("select",{id:"edit-car-client","onUpdate:modelValue":l[11]||(l[11]=s=>U.value.id_client=s)},[l[54]||(l[54]=e("option",{value:""},"Select Client",-1)),(t(!0),o(I,null,q(d.value,s=>(t(),o("option",{key:s.id,value:s.id},m(s.name),9,Ro))),128))],512),[[W,U.value.id_client]])]),e("div",Vo,[l[56]||(l[56]=e("label",{for:"edit-car-vin"},"VIN:",-1)),_(e("input",{type:"text",id:"edit-car-vin","onUpdate:modelValue":l[12]||(l[12]=s=>U.value.vin=s)},null,512),[[S,U.value.vin]])]),e("div",Bo,[l[58]||(l[58]=e("label",{for:"edit-car-loading-port"},"Loading Port:",-1)),_(e("select",{id:"edit-car-loading-port","onUpdate:modelValue":l[13]||(l[13]=s=>U.value.id_port_loading=s)},[l[57]||(l[57]=e("option",{value:""},"Select Loading Port",-1)),(t(!0),o(I,null,q(y.value,s=>(t(),o("option",{key:s.id,value:s.id},m(s.loading_port),9,Oo))),128))],512),[[W,U.value.id_port_loading]])]),e("div",Io,[l[60]||(l[60]=e("label",{for:"edit-car-discharge-port"},"Discharge Port:",-1)),_(e("select",{id:"edit-car-discharge-port","onUpdate:modelValue":l[14]||(l[14]=s=>U.value.id_port_discharge=s)},[l[59]||(l[59]=e("option",{value:""},"Select Discharge Port",-1)),(t(!0),o(I,null,q(r.value,s=>(t(),o("option",{key:s.id,value:s.id},m(s.discharge_port),9,qo))),128))],512),[[W,U.value.id_port_discharge]])]),e("div",Lo,[l[61]||(l[61]=e("label",{for:"edit-car-price"},"Selling Price:",-1)),_(e("input",{type:"number",id:"edit-car-price","onUpdate:modelValue":l[15]||(l[15]=s=>U.value.price_cell=s)},null,512),[[S,U.value.price_cell]])]),e("div",Fo,[l[62]||(l[62]=e("label",{for:"edit-car-notes"},"Notes:",-1)),_(e("textarea",{id:"edit-car-notes","onUpdate:modelValue":l[16]||(l[16]=s=>U.value.notes=s)},null,512),[[S,U.value.notes]])]),e("div",Mo,[e("button",{onClick:n,class:"primary"},"Update"),e("button",{onClick:l[17]||(l[17]=s=>B.value=!1)},"Cancel")])])])):h("",!0),f.value?(t(),o("div",xo,[e("div",Wo,[l[72]||(l[72]=e("h2",null,"Assign Car to Bill",-1)),e("div",Ho,[l[65]||(l[65]=e("label",{for:"client"},[H("Client: "),e("span",{class:"required"},"*")],-1)),_(e("select",{id:"client","onUpdate:modelValue":l[18]||(l[18]=s=>g.value.id_client=s),required:""},[l[64]||(l[64]=e("option",{value:""},"Select Client",-1)),(t(!0),o(I,null,q(d.value,s=>(t(),o("option",{key:s.id,value:s.id},m(s.name),9,Yo))),128))],512),[[W,g.value.id_client]])]),e("div",Jo,[l[66]||(l[66]=e("label",{for:"vin"},"VIN:",-1)),_(e("input",{type:"text",id:"vin","onUpdate:modelValue":l[19]||(l[19]=s=>g.value.vin=s)},null,512),[[S,g.value.vin]])]),e("div",Qo,[l[68]||(l[68]=e("label",{for:"loading-port"},"Loading Port:",-1)),_(e("select",{id:"loading-port","onUpdate:modelValue":l[20]||(l[20]=s=>g.value.id_port_loading=s)},[l[67]||(l[67]=e("option",{value:""},"Select Loading Port",-1)),(t(!0),o(I,null,q(y.value,s=>(t(),o("option",{key:s.id,value:s.id},m(s.loading_port),9,jo))),128))],512),[[W,g.value.id_port_loading]])]),e("div",Go,[l[70]||(l[70]=e("label",{for:"discharge-port"},[H("Discharge Port: "),e("span",{class:"required"},"*")],-1)),_(e("select",{id:"discharge-port","onUpdate:modelValue":l[21]||(l[21]=s=>g.value.id_port_discharge=s),required:""},[l[69]||(l[69]=e("option",{value:""},"Select Discharge Port",-1)),(t(!0),o(I,null,q(r.value,s=>(t(),o("option",{key:s.id,value:s.id},m(s.discharge_port),9,zo))),128))],512),[[W,g.value.id_port_discharge]])]),e("div",Ko,[l[71]||(l[71]=e("label",{for:"sell-price"},[H("Sell Price: "),e("span",{class:"required"},"*")],-1)),_(e("input",{type:"number",id:"sell-price","onUpdate:modelValue":l[22]||(l[22]=s=>g.value.price_cell=s),required:""},null,512),[[S,g.value.price_cell]])]),e("div",Xo,[e("button",{onClick:ee,class:"primary"},"Assign"),e("button",{onClick:l[23]||(l[23]=s=>f.value=!1)},"Cancel")])])])):h("",!0),T.value?(t(),o("div",Zo,[e("div",en,[l[77]||(l[77]=e("h3",null,"Add New Sell Bill",-1)),e("div",ln,[l[74]||(l[74]=e("label",{for:"broker"},"Broker:",-1)),_(e("select",{id:"broker","onUpdate:modelValue":l[24]||(l[24]=s=>F.value.id_broker=s)},[l[73]||(l[73]=e("option",{value:""},"Select Broker",-1)),(t(!0),o(I,null,q(V.value,s=>(t(),o("option",{key:s.id,value:s.id},m(s.name),9,tn))),128))],512),[[W,F.value.id_broker]])]),e("div",sn,[l[75]||(l[75]=e("label",{for:"date"},"Date:",-1)),_(e("input",{type:"date",id:"date","onUpdate:modelValue":l[25]||(l[25]=s=>F.value.date_sell=s)},null,512),[[S,F.value.date_sell]])]),e("div",an,[l[76]||(l[76]=e("label",{for:"notes"},"Notes:",-1)),_(e("textarea",{id:"notes","onUpdate:modelValue":l[26]||(l[26]=s=>F.value.notes=s)},null,512),[[S,F.value.notes]])]),e("div",on,[e("button",{onClick:l[27]||(l[27]=s=>T.value=!1)},"Cancel"),e("button",{onClick:x,class:"primary"},"Add")])])])):h("",!0),p.value?(t(),o("div",nn,[e("div",un,[l[82]||(l[82]=e("h3",null,"Edit Sell Bill",-1)),e("div",dn,[l[79]||(l[79]=e("label",{for:"edit-broker"},"Broker:",-1)),_(e("select",{id:"edit-broker","onUpdate:modelValue":l[28]||(l[28]=s=>w.value.id_broker=s)},[l[78]||(l[78]=e("option",{value:""},"Select Broker",-1)),(t(!0),o(I,null,q(V.value,s=>(t(),o("option",{key:s.id,value:s.id},m(s.name),9,rn))),128))],512),[[W,w.value.id_broker]])]),e("div",cn,[l[80]||(l[80]=e("label",{for:"edit-date"},"Date:",-1)),_(e("input",{type:"date",id:"edit-date","onUpdate:modelValue":l[29]||(l[29]=s=>w.value.date_sell=s)},null,512),[[S,w.value.date_sell]])]),e("div",vn,[l[81]||(l[81]=e("label",{for:"edit-notes"},"Notes:",-1)),_(e("textarea",{id:"edit-notes","onUpdate:modelValue":l[30]||(l[30]=s=>w.value.notes=s)},null,512),[[S,w.value.notes]])]),e("div",pn,[e("button",{onClick:l[31]||(l[31]=s=>p.value=!1)},"Cancel"),e("button",{onClick:de,class:"primary"},"Update")])])])):h("",!0)]))}},bn=j(_n,[["__scopeId","data-v-a7fbf0a4"]]),mn={class:"cars-view"},gn={class:"sidebar"},fn={class:"sidebar-top"},yn=["disabled"],kn=["disabled"],En=["disabled"],$n={class:"sidebar-bottom"},Cn={class:"main-content"},wn={class:"content"},hn={key:0,class:"empty-state"},Sn={__name:"CarsView",setup(L){const A=be(),$=b(null),P=T=>{$.value=T},R=()=>{A.push("/")},k=J(()=>{const T=localStorage.getItem("user");return T?JSON.parse(T):null}),c=J(()=>{var T;return k.value?((T=k.value)==null?void 0:T.role_id)===1:(A.push("/login"),!1)}),N=J(()=>{var T;return c.value?!0:(T=user.value.permissions)==null?void 0:T.some(f=>f.permission_name==="can_purchase_cars")}),v=J(()=>{var T;return c.value?!0:(T=user.value.permissions)==null?void 0:T.some(f=>f.permission_name==="can_sell_cars")}),C=J(()=>{var T;return c.value?!0:(T=user.value.permissions)==null?void 0:T.some(f=>f.permission_name==="can_c_car_stock")});return(T,f)=>(t(),o("div",mn,[e("div",gn,[e("div",fn,[e("button",{onClick:R,class:"sidebar-btn return-btn"}," Return to Dashboard "),e("button",{disabled:!N.value,onClick:f[0]||(f[0]=g=>P("buy")),class:M([{active:$.value==="buy"},"sidebar-btn buy-btn"])}," Purchases ",10,yn),h("",!0),e("button",{disabled:!v.value,onClick:f[2]||(f[2]=g=>P("sell-bills")),class:M([{active:$.value==="sell-bills"},"sidebar-btn sell-bills-btn"])}," Sells ",10,kn),e("button",{disabled:!C.value,onClick:f[3]||(f[3]=g=>P("stock")),class:M([{active:$.value==="stock"},"sidebar-btn stock-btn"])}," Cars Stock ",10,En)]),e("div",$n,[f[12]||(f[12]=e("div",{class:"sidebar-section-title"},"Settings",-1)),N.value?(t(),o("button",{key:0,onClick:f[4]||(f[4]=g=>P("models")),class:M([{active:$.value==="models"},"sidebar-btn"])}," Car Models ",2)):h("",!0),N.value?(t(),o("button",{key:1,onClick:f[5]||(f[5]=g=>P("colors")),class:M([{active:$.value==="colors"},"sidebar-btn"])}," Colors ",2)):h("",!0),N.value?(t(),o("button",{key:2,onClick:f[6]||(f[6]=g=>P("discharge-ports")),class:M([{active:$.value==="discharge-ports"},"sidebar-btn"])}," Discharge Ports ",2)):h("",!0),N.value?(t(),o("button",{key:3,onClick:f[7]||(f[7]=g=>P("loading-ports")),class:M([{active:$.value==="loading-ports"},"sidebar-btn"])}," Loading Ports ",2)):h("",!0),v.value?(t(),o("button",{key:4,onClick:f[8]||(f[8]=g=>P("clients")),class:M([{active:$.value==="clients"},"sidebar-btn"])}," Clients ",2)):h("",!0),v.value?(t(),o("button",{key:5,onClick:f[9]||(f[9]=g=>P("brokers")),class:M([{active:$.value==="brokers"},"sidebar-btn"])}," Brokers ",2)):h("",!0),N.value?(t(),o("button",{key:6,onClick:f[10]||(f[10]=g=>P("suppliers")),class:M([{active:$.value==="suppliers"},"sidebar-btn"])}," Suppliers ",2)):h("",!0),N.value?(t(),o("button",{key:7,onClick:f[11]||(f[11]=g=>P("warehouses")),class:M([{active:$.value==="warehouses"},"sidebar-btn"])}," Warehouses ",2)):h("",!0)])]),e("div",Cn,[f[13]||(f[13]=e("h1",null,"Cars Management",-1)),e("div",wn,[$.value?h("",!0):(t(),o("div",hn," Please select an option from the sidebar ")),$.value==="buy"?(t(),Q(Ma,{key:1})):h("",!0),$.value==="sell"?(t(),Q(bn,{key:2})):h("",!0),$.value==="sell-bills"?(t(),Q(ke,{key:3})):h("",!0),$.value==="stock"?(t(),Q(ye,{key:4})):h("",!0),$.value==="models"?(t(),Q(gt,{key:5})):h("",!0),$.value==="colors"?(t(),Q(Rt,{key:6})):h("",!0),$.value==="discharge-ports"?(t(),Q(Gt,{key:7})):h("",!0),$.value==="loading-ports"?(t(),Q(cs,{key:8})):h("",!0),$.value==="clients"?(t(),Q(Ke,{key:9})):h("",!0),$.value==="brokers"?(t(),Q(fl,{key:10})):h("",!0),$.value==="suppliers"?(t(),Q(Vl,{key:11})):h("",!0),$.value==="warehouses"?(t(),Q(Ee,{key:12})):h("",!0)])])]))}},Un=j(Sn,[["__scopeId","data-v-5717d124"]]);export{Un as default};
//# sourceMappingURL=CarsView.4LyWpsaN.js.map
