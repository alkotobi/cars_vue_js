import{_ as R,u as k,r as f,j as l,o as h,c as A,a as s,h as p,k as i,l as g,m as _,b as v,t as r,i as w,g as d,n as u}from"./index.DUoj9obe.js";const x={class:"transfers-page"},E={class:"sidebar"},U={class:"nav-buttons"},V={class:"main-content"},y={class:"statistics-container"},B={class:"statistics-grid"},C={class:"stat-card"},L={class:"stat-value"},N={class:"stat-card"},F={class:"stat-value"},M={class:"stat-card"},O={class:"stat-value"},I={class:"stat-card"},j={class:"stat-value"},q={class:"stat-card"},H={class:"stat-value"},J={__name:"TransfersView",setup(W){w();const{callApi:m}=k(),a=f(null),c=f([]),S=l(()=>{var e;return a.value?a.value.role_id===1?!0:(e=a.value.permissions)==null?void 0:e.some(t=>t.permission_name==="is_exchange_sender"):!1}),D=l(()=>{var e;return a.value?a.value.role_id===1?!0:(e=a.value.permissions)==null?void 0:e.some(t=>t.permission_name==="is_exchange_receiver"):!1}),P=l(()=>{var e;return((e=a.value)==null?void 0:e.role_id)===1}),o=l(()=>{if(!c.value.length)return{totalSent:0,totalReceived:0,totalPending:0,totalPendingDA:0,totalPendingUSD:0};const e=c.value.reduce((t,n)=>(t.totalSent++,n.date_receive?t.totalReceived++:(t.totalPending++,t.totalPendingDA+=parseFloat(n.amount_sending_da),t.totalPendingUSD+=parseFloat(n.amount_sending_da)/parseFloat(n.rate)),t),{totalSent:0,totalReceived:0,totalPending:0,totalPendingDA:0,totalPendingUSD:0});return e.totalPendingUSD=Math.round(e.totalPendingUSD*100)/100,e}),T=async()=>{const e=await m({query:`
      SELECT t.* 
      FROM transfers t
      WHERE t.id_user_do_transfer = ?
      ORDER BY t.date_do_transfer DESC
    `,params:[a.value.id]});e.success&&(c.value=e.data)};return h(()=>{const e=localStorage.getItem("user");e&&(a.value=JSON.parse(e),T())}),(e,t)=>{const n=g("router-link"),b=g("router-view");return d(),A("div",x,[s("div",E,[p(n,{to:"/dashboard",class:"dashboard-btn"},{default:i(()=>t[0]||(t[0]=[u("â† Return to Dashboard")])),_:1,__:[0]}),s("div",U,[P.value?(d(),_(n,{key:0,to:"/transfers-list",class:"nav-btn"},{default:i(()=>t[1]||(t[1]=[u(" Transfers List ")])),_:1,__:[1]})):v("",!0),S.value?(d(),_(n,{key:1,to:"/send",class:"nav-btn"},{default:i(()=>t[2]||(t[2]=[u(" Send Transfer ")])),_:1,__:[2]})):v("",!0),D.value?(d(),_(n,{key:2,to:"/receive",class:"nav-btn"},{default:i(()=>t[3]||(t[3]=[u(" Receive Transfer ")])),_:1,__:[3]})):v("",!0)])]),s("div",V,[s("div",y,[t[9]||(t[9]=s("h2",null,"Transfer Statistics",-1)),s("div",B,[s("div",C,[t[4]||(t[4]=s("span",{class:"stat-label"},"Total Sent",-1)),s("span",L,r(o.value.totalSent),1)]),s("div",N,[t[5]||(t[5]=s("span",{class:"stat-label"},"Total Received",-1)),s("span",F,r(o.value.totalReceived),1)]),s("div",M,[t[6]||(t[6]=s("span",{class:"stat-label"},"Pending Transfers",-1)),s("span",O,r(o.value.totalPending),1)]),s("div",I,[t[7]||(t[7]=s("span",{class:"stat-label"},"Total Pending (DA)",-1)),s("span",j,r(o.value.totalPendingDA.toLocaleString())+" DA",1)]),s("div",q,[t[8]||(t[8]=s("span",{class:"stat-label"},"Total Pending (USD)",-1)),s("span",H,"$"+r(o.value.totalPendingUSD.toLocaleString()),1)])])]),p(b)])])}}},$=R(J,[["__scopeId","data-v-0fe8bcc9"]]);export{$ as default};
//# sourceMappingURL=TransfersView.Cnl8wTl6.js.map
