import{_ as x,r as f,j as L,u as T,o as M,c as r,t as c,a as e,F as E,d as S,p as q,b as $,g as d,x as Y,w as u,v as g,e as k,s as J,h as P,i as K}from"./index.e4AY3vWr.js";const W={class:"cars-stock-table"},j={key:0,class:"loading"},H={key:1,class:"error"},z={key:2,class:"empty-state"},G={key:3,class:"cars-table"},Q={class:"document-links"},X=["href"],Z=["href"],ee=["href"],le=["disabled","onClick"],te={class:"dropdown"},se=["onClick"],ae={key:0,class:"dropdown-menu"},ie=["onClick"],oe={__name:"CarStockTable",props:{cars:Array,onEdit:{type:Function,default:()=>{}},filters:{type:Object,default:()=>({basic:"",advanced:null})}},emits:["refresh"],setup(V,{expose:O,emit:N}){const v=f({}),h=V,D=f(null),R=L(()=>{var n;return D.value?D.value.role_id===1?!0:(n=D.value.permissions)==null?void 0:n.some(m=>m.permission_name==="can_edit_cars_prop"):!1}),{callApi:A}=T(),C=f([]),w=f(!0),b=f(null),y=async()=>{w.value=!0,b.value=null;try{let n=`
      SELECT 
        cs.id,
        cs.vin,
        cs.price_cell,
        cs.date_loding,
        cs.date_sell,
        cs.notes,
        cs.freight,
        cs.path_documents,
        cs.sell_pi_path,
        cs.buy_pi_path,
        cs.id_client,
        cs.id_port_loading,
        cs.id_port_discharge,
        cs.id_buy_details,
        cs.date_send_documents,
        cs.id_sell_pi,
        cs.id_sell,
        cs.export_lisence_ref,
        cs.id_warehouse,
        cs.in_wharhouse_date,
        cs.date_get_documents_from_supp,
        cs.date_get_keys_from_supp,
        c.name as client_name,
        cn.car_name,
        clr.color,
        lp.loading_port,
        dp.discharge_port,
        bd.price_sell as buy_price,
        w.warhouse_name as warehouse_name
      FROM cars_stock cs
      LEFT JOIN clients c ON cs.id_client = c.id
      LEFT JOIN buy_details bd ON cs.id_buy_details = bd.id
      LEFT JOIN cars_names cn ON bd.id_car_name = cn.id
      LEFT JOIN colors clr ON bd.id_color = clr.id
      LEFT JOIN loading_ports lp ON cs.id_port_loading = lp.id
      LEFT JOIN discharge_ports dp ON cs.id_port_discharge = dp.id
      LEFT JOIN warehouses w ON cs.id_warehouse = w.id
      WHERE cs.hidden = 0
    `;const m=[];if(h.filters){if(h.filters.basic&&h.filters.basic.trim()!==""){const l=`%${h.filters.basic.trim()}%`;n+=`
          AND (
            cs.id LIKE ? OR
            cn.car_name LIKE ? OR
            clr.color LIKE ? OR
            cs.vin LIKE ? OR
            lp.loading_port LIKE ? OR
            dp.discharge_port LIKE ? OR
            c.name LIKE ? OR
            w.warhouse_name LIKE ?
          )
        `;for(let s=0;s<8;s++)m.push(l)}if(h.filters.advanced){const l=h.filters.advanced;l.id&&l.id.trim()!==""&&(n+=" AND cs.id = ?",m.push(l.id.trim())),l.car_name&&l.car_name.trim()!==""&&(n+=" AND cn.car_name = ?",m.push(l.car_name.trim())),l.color&&l.color.trim()!==""&&(n+=" AND clr.color = ?",m.push(l.color.trim())),l.vin&&l.vin.trim()!==""&&(n+=" AND cs.vin LIKE ?",m.push(`%${l.vin.trim()}%`)),l.loading_port&&l.loading_port.trim()!==""&&(n+=" AND lp.loading_port = ?",m.push(l.loading_port.trim())),l.discharge_port&&l.discharge_port.trim()!==""&&(n+=" AND dp.discharge_port = ?",m.push(l.discharge_port.trim())),l.freight_min&&l.freight_min.trim()!==""&&(n+=" AND cs.freight >= ?",m.push(parseFloat(l.freight_min.trim()))),l.freight_max&&l.freight_max.trim()!==""&&(n+=" AND cs.freight <= ?",m.push(parseFloat(l.freight_max.trim()))),l.price_min&&l.price_min.trim()!==""&&(n+=" AND cs.price_cell >= ?",m.push(parseFloat(l.price_min.trim()))),l.price_max&&l.price_max.trim()!==""&&(n+=" AND cs.price_cell <= ?",m.push(parseFloat(l.price_max.trim()))),l.loading_date_from&&l.loading_date_from.trim()!==""&&(n+=" AND cs.date_loding >= ?",m.push(l.loading_date_from.trim())),l.loading_date_to&&l.loading_date_to.trim()!==""&&(n+=" AND cs.date_loding <= ?",m.push(l.loading_date_to.trim())),l.status&&l.status.trim()!==""&&(l.status==="available"?n+=" AND (cs.date_sell IS NULL AND cs.id_client IS NULL)":l.status==="sold"&&(n+=" AND (cs.date_sell IS NOT NULL OR cs.id_client IS NOT NULL)")),l.client&&l.client.trim()!==""&&(n+=" AND c.name = ?",m.push(l.client.trim())),l.warehouse&&l.warehouse.trim()!==""&&(n+=" AND w.name = ?",m.push(l.warehouse.trim()))}}n+=" ORDER BY cs.id DESC";const _=await A({query:n,params:m});_.success?C.value=_.data:b.value=_.error||"Failed to fetch cars stock"}catch(n){b.value=n.message||"An error occurred"}finally{w.value=!1}},o=n=>{h.onEdit(n)},F=n=>{v.value[n]=!v.value[n]},I=n=>{alert(`VIN action triggered for car with ID: ${n.id}`),v.value[n.id]=!1};return M(()=>{const n=localStorage.getItem("user");n&&(D.value=JSON.parse(n),y())}),O({fetchCarsStock:y}),(n,m)=>(d(),r("div",W,[w.value?(d(),r("div",j,"Loading...")):b.value?(d(),r("div",H,c(b.value),1)):C.value.length===0?(d(),r("div",z,"No cars in stock")):(d(),r("table",G,[m[0]||(m[0]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Car"),e("th",null,"Color"),e("th",null,"VIN"),e("th",null,"Loading Port"),e("th",null,"Discharge Port"),e("th",null,"Freight"),e("th",null,"Price Cell"),e("th",null,"Loading Date"),e("th",null,"Status"),e("th",null,"Client"),e("th",null,"Documents"),e("th",null,"Actions")])],-1)),e("tbody",null,[(d(!0),r(E,null,S(C.value,_=>(d(),r("tr",{key:_.id},[e("td",null,c(_.id),1),e("td",null,c(_.car_name||"N/A"),1),e("td",null,c(_.color||"N/A"),1),e("td",null,c(_.vin||"N/A"),1),e("td",null,c(_.loading_port||"N/A"),1),e("td",null,c(_.discharge_port||"N/A"),1),e("td",null,c(_.freight?"$"+_.freight:"N/A"),1),e("td",null,c(_.price_cell?"$"+_.price_cell:"N/A"),1),e("td",null,c(_.date_loding?new Date(_.date_loding).toLocaleDateString():"N/A"),1),e("td",{class:q(_.date_sell||_.client_name?"status-sold":"status-available")},c(_.date_sell||_.client_name?"Sold":"Available"),3),e("td",null,c(_.client_name||"N/A"),1),e("td",null,[e("div",Q,[_.path_documents?(d(),r("a",{key:0,href:_.path_documents,target:"_blank"},"Documents",8,X)):$("",!0),_.sell_pi_path?(d(),r("a",{key:1,href:_.sell_pi_path,target:"_blank"},"Sell PI",8,Z)):$("",!0),_.buy_pi_path?(d(),r("a",{key:2,href:_.buy_pi_path,target:"_blank"},"Buy PI",8,ee)):$("",!0)])]),e("td",null,[e("button",{disabled:!R.value,onClick:l=>o(_),class:"edit-btn"},"Edit",8,le),e("div",te,[e("button",{onClick:l=>F(_.id),class:"dropdown-toggle"},"Actions",8,se),v.value[_.id]?(d(),r("ul",ae,[e("li",null,[e("button",{onClick:l=>I(_)},"VIN",8,ie)])])):$("",!0)])])]))),128))])]))]))}},ne=x(oe,[["__scopeId","data-v-2ce1ec15"]]),re={class:"car-stock-form"},de={key:0,class:"error"},ue={class:"form-grid"},_e={class:"form-section"},pe={class:"form-group"},ve=["disabled"],ce={class:"form-group"},me=["value"],fe={class:"form-group"},ge={class:"form-section"},be={class:"form-group"},he=["disabled"],ye={class:"form-group"},De={class:"form-group"},ke=["disabled"],Ee={class:"form-group"},Se=["disabled"],Ne=["value"],we={class:"form-group"},Ce={class:"form-section"},Re={class:"form-group"},Ae=["value"],Oe={class:"form-group"},$e=["disabled"],Fe=["value"],Ie={class:"form-group"},Le={class:"form-group"},Ve={class:"form-section"},Ue={class:"form-group"},xe={class:"form-group"},Pe={class:"form-group"},Te={class:"form-group"},Be={class:"form-group"},Me={class:"form-section"},qe={class:"form-group"},Ye=["value"],Je={class:"form-group"},Ke={class:"form-group"},We={class:"form-group"},je={class:"form-group"},He={class:"form-actions"},ze=["disabled"],Ge={__name:"CarStockForm",props:{carData:{type:Object,required:!0}},emits:["save","cancel"],setup(V,{emit:O}){const N=V,v=f(null),h=L(()=>{var p;return v.value?v.value.role_id===1?!0:(p=v.value.permissions)==null?void 0:p.some(t=>t.permission_name==="can_edit_vin"):!1}),D=L(()=>{var p;return v.value?v.value.role_id===1?!0:(p=v.value.permissions)==null?void 0:p.some(t=>t.permission_name==="can_edit_car_client_name"):!1}),R=L(()=>{var p;return v.value?v.value.role_id===1?!0:(p=v.value.permissions)==null?void 0:p.some(t=>t.permission_name==="can_edit_cars_sell_price"):!1}),A=L(()=>{var p;return v.value?v.value.role_id===1?!0:(p=v.value.permissions)==null?void 0:p.some(t=>t.permission_name==="can_edit_cars_sell_rate"):!1}),C=L(()=>{var p;return v.value?v.value.role_id===1?!0:(p=v.value.permissions)==null?void 0:p.some(t=>t.permission_name==="can_edit_cars_discharge_port"):!1}),w=O,{callApi:b}=T(),y=f(!1),o=f(null),F=f([]),I=f([]),n=f([]),m=f([]),_=f([]),l=f({id:null,notes:"",id_buy_details:null,date_sell:null,id_client:null,price_cell:null,freight:null,id_port_loading:null,id_port_discharge:null,vin:"",path_documents:"",date_loding:null,date_send_documents:null,id_sell_pi:"",sell_pi_path:"",buy_pi_path:"",id_sell:null,export_lisence_ref:"",id_warehouse:null,in_wharhouse_date:null,date_get_documents_from_supp:null,date_get_keys_from_supp:null,rate:null});Y(()=>N.carData,p=>{p&&(l.value={...p},["date_sell","date_loding","date_send_documents","in_wharhouse_date","date_get_documents_from_supp","date_get_keys_from_supp"].forEach(a=>{if(l.value[a]){const U=new Date(l.value[a]);isNaN(U)||(l.value[a]=U.toISOString().split("T")[0])}}))},{immediate:!0});const s=async()=>{try{const p=await b({query:"SELECT id, name FROM clients ORDER BY name ASC",params:[]});p.success&&(F.value=p.data);const t=await b({query:"SELECT id, loading_port FROM loading_ports ORDER BY loading_port ASC",params:[]});t.success&&(I.value=t.data);const a=await b({query:"SELECT id, discharge_port FROM discharge_ports ORDER BY discharge_port ASC",params:[]});a.success&&(n.value=a.data);const U=await b({query:`
        SELECT bd.id, cn.car_name, clr.color 
        FROM buy_details bd
        LEFT JOIN cars_names cn ON bd.id_car_name = cn.id
        LEFT JOIN colors clr ON bd.id_color = clr.id
        ORDER BY bd.id DESC
      `,params:[]});U.success&&(m.value=U.data);const B=await b({query:"SELECT id, warhouse_name as name FROM warehouses ORDER BY warhouse_name ASC",params:[]});B.success&&(_.value=B.data)}catch(p){o.value=p.message||"Failed to fetch reference data"}},i=async()=>{y.value=!0,o.value=null;try{const p=await b({query:`
        UPDATE cars_stock
        SET 
          notes = ?,
          id_buy_details = ?,
          date_sell = ?,
          id_client = ?,
          price_cell = ?,
          freight = ?,
          id_port_loading = ?,
          id_port_discharge = ?,
          vin = ?,
          path_documents = ?,
          date_loding = ?,
          date_send_documents = ?,
          id_sell_pi = ?,
          sell_pi_path = ?,
          buy_pi_path = ?,
          id_sell = ?,
          export_lisence_ref = ?,
          id_warehouse = ?,
          in_wharhouse_date = ?,
          date_get_documents_from_supp = ?,
          date_get_keys_from_supp = ?,
          rate=?
        WHERE id = ?
      `,params:[l.value.notes||null,l.value.id_buy_details||null,l.value.date_sell||null,l.value.id_client||null,l.value.price_cell||null,l.value.freight||null,l.value.id_port_loading||null,l.value.id_port_discharge||null,l.value.vin||null,l.value.path_documents||null,l.value.date_loding||null,l.value.date_send_documents||null,l.value.id_sell_pi||null,l.value.sell_pi_path||null,l.value.buy_pi_path||null,l.value.id_sell||null,l.value.export_lisence_ref||null,l.value.id_warehouse||null,l.value.in_wharhouse_date||null,l.value.date_get_documents_from_supp||null,l.value.date_get_keys_from_supp||null,l.value.rate||null,l.value.id]});p.success?w("save"):o.value=p.error||"Failed to update car"}catch(p){o.value=p.message||"An error occurred"}finally{y.value=!1}};return M(()=>{const p=localStorage.getItem("user");p&&(v.value=JSON.parse(p),s())}),(p,t)=>(d(),r("div",re,[t[55]||(t[55]=e("h3",null,"Edit Car Stock",-1)),o.value?(d(),r("div",de,c(o.value),1)):$("",!0),e("form",{onSubmit:J(i,["prevent"])},[e("div",ue,[e("div",_e,[t[27]||(t[27]=e("h4",null,"Basic Information",-1)),e("div",pe,[t[23]||(t[23]=e("label",{for:"vin"},"VIN:",-1)),u(e("input",{disabled:!h.value,type:"text",id:"vin","onUpdate:modelValue":t[0]||(t[0]=a=>l.value.vin=a)},null,8,ve),[[g,l.value.vin]])]),e("div",ce,[t[25]||(t[25]=e("label",{for:"id_buy_details"},"Buy Details:",-1)),u(e("select",{id:"id_buy_details","onUpdate:modelValue":t[1]||(t[1]=a=>l.value.id_buy_details=a)},[t[24]||(t[24]=e("option",{value:""},"Select Buy Details",-1)),(d(!0),r(E,null,S(m.value,a=>(d(),r("option",{key:a.id,value:a.id},c(a.car_name)+" - "+c(a.color)+" (ID: "+c(a.id)+") ",9,me))),128))],512),[[k,l.value.id_buy_details]])]),e("div",fe,[t[26]||(t[26]=e("label",{for:"notes"},"Notes:",-1)),u(e("textarea",{id:"notes","onUpdate:modelValue":t[2]||(t[2]=a=>l.value.notes=a)},null,512),[[g,l.value.notes]])])]),e("div",ge,[t[34]||(t[34]=e("h4",null,"Pricing and Client",-1)),e("div",be,[t[28]||(t[28]=e("label",{for:"price_cell"},"Price Cell:",-1)),u(e("input",{disabled:!R.value,type:"number",id:"price_cell","onUpdate:modelValue":t[3]||(t[3]=a=>l.value.price_cell=a),step:"0.01"},null,8,he),[[g,l.value.price_cell]])]),e("div",ye,[t[29]||(t[29]=e("label",{for:"freight"},"Freight:",-1)),u(e("input",{type:"number",id:"freight","onUpdate:modelValue":t[4]||(t[4]=a=>l.value.freight=a),step:"0.01"},null,512),[[g,l.value.freight]])]),e("div",De,[t[30]||(t[30]=e("label",{for:"rate"},"Rate:",-1)),u(e("input",{disabled:!A.value,type:"number",id:"rate","onUpdate:modelValue":t[5]||(t[5]=a=>l.value.rate=a),step:"0.01"},null,8,ke),[[g,l.value.rate]])]),e("div",Ee,[t[32]||(t[32]=e("label",{for:"id_client"},"Client:",-1)),u(e("select",{disabled:!D.value,id:"id_client","onUpdate:modelValue":t[6]||(t[6]=a=>l.value.id_client=a)},[t[31]||(t[31]=e("option",{value:""},"Select Client",-1)),(d(!0),r(E,null,S(F.value,a=>(d(),r("option",{key:a.id,value:a.id},c(a.name),9,Ne))),128))],8,Se),[[k,l.value.id_client]])]),e("div",we,[t[33]||(t[33]=e("label",{for:"date_sell"},"Sell Date:",-1)),u(e("input",{type:"date",id:"date_sell","onUpdate:modelValue":t[7]||(t[7]=a=>l.value.date_sell=a)},null,512),[[g,l.value.date_sell]])])]),e("div",Ce,[t[41]||(t[41]=e("h4",null,"Ports and Shipping",-1)),e("div",Re,[t[36]||(t[36]=e("label",{for:"id_port_loading"},"Loading Port:",-1)),u(e("select",{id:"id_port_loading","onUpdate:modelValue":t[8]||(t[8]=a=>l.value.id_port_loading=a)},[t[35]||(t[35]=e("option",{value:""},"Select Loading Port",-1)),(d(!0),r(E,null,S(I.value,a=>(d(),r("option",{key:a.id,value:a.id},c(a.loading_port),9,Ae))),128))],512),[[k,l.value.id_port_loading]])]),e("div",Oe,[t[38]||(t[38]=e("label",{for:"id_port_discharge"},"Discharge Port:",-1)),u(e("select",{disabled:!C.value,id:"id_port_discharge","onUpdate:modelValue":t[9]||(t[9]=a=>l.value.id_port_discharge=a)},[t[37]||(t[37]=e("option",{value:""},"Select Discharge Port",-1)),(d(!0),r(E,null,S(n.value,a=>(d(),r("option",{key:a.id,value:a.id},c(a.discharge_port),9,Fe))),128))],8,$e),[[k,l.value.id_port_discharge]])]),e("div",Ie,[t[39]||(t[39]=e("label",{for:"date_loding"},"Loading Date:",-1)),u(e("input",{type:"date",id:"date_loding","onUpdate:modelValue":t[10]||(t[10]=a=>l.value.date_loding=a)},null,512),[[g,l.value.date_loding]])]),e("div",Le,[t[40]||(t[40]=e("label",{for:"export_lisence_ref"},"Export License Ref:",-1)),u(e("input",{type:"text",id:"export_lisence_ref","onUpdate:modelValue":t[11]||(t[11]=a=>l.value.export_lisence_ref=a)},null,512),[[g,l.value.export_lisence_ref]])])]),e("div",Ve,[t[47]||(t[47]=e("h4",null,"Documents",-1)),e("div",Ue,[t[42]||(t[42]=e("label",{for:"path_documents"},"Documents Path:",-1)),u(e("input",{type:"text",id:"path_documents","onUpdate:modelValue":t[12]||(t[12]=a=>l.value.path_documents=a)},null,512),[[g,l.value.path_documents]])]),e("div",xe,[t[43]||(t[43]=e("label",{for:"sell_pi_path"},"Sell PI Path:",-1)),u(e("input",{type:"text",id:"sell_pi_path","onUpdate:modelValue":t[13]||(t[13]=a=>l.value.sell_pi_path=a)},null,512),[[g,l.value.sell_pi_path]])]),e("div",Pe,[t[44]||(t[44]=e("label",{for:"buy_pi_path"},"Buy PI Path:",-1)),u(e("input",{type:"text",id:"buy_pi_path","onUpdate:modelValue":t[14]||(t[14]=a=>l.value.buy_pi_path=a)},null,512),[[g,l.value.buy_pi_path]])]),e("div",Te,[t[45]||(t[45]=e("label",{for:"date_send_documents"},"Documents Send Date:",-1)),u(e("input",{type:"date",id:"date_send_documents","onUpdate:modelValue":t[15]||(t[15]=a=>l.value.date_send_documents=a)},null,512),[[g,l.value.date_send_documents]])]),e("div",Be,[t[46]||(t[46]=e("label",{for:"date_get_documents_from_supp"},"Documents From Supplier Date:",-1)),u(e("input",{type:"date",id:"date_get_documents_from_supp","onUpdate:modelValue":t[16]||(t[16]=a=>l.value.date_get_documents_from_supp=a)},null,512),[[g,l.value.date_get_documents_from_supp]])])]),e("div",Me,[t[54]||(t[54]=e("h4",null,"Warehouse and Additional Info",-1)),e("div",qe,[t[49]||(t[49]=e("label",{for:"id_warehouse"},"Warehouse:",-1)),u(e("select",{id:"id_warehouse","onUpdate:modelValue":t[17]||(t[17]=a=>l.value.id_warehouse=a)},[t[48]||(t[48]=e("option",{value:""},"Select Warehouse",-1)),(d(!0),r(E,null,S(_.value,a=>(d(),r("option",{key:a.id,value:a.id},c(a.name),9,Ye))),128))],512),[[k,l.value.id_warehouse]])]),e("div",Je,[t[50]||(t[50]=e("label",{for:"in_wharhouse_date"},"Warehouse Date:",-1)),u(e("input",{type:"date",id:"in_wharhouse_date","onUpdate:modelValue":t[18]||(t[18]=a=>l.value.in_wharhouse_date=a)},null,512),[[g,l.value.in_wharhouse_date]])]),e("div",Ke,[t[51]||(t[51]=e("label",{for:"date_get_keys_from_supp"},"Keys From Supplier Date:",-1)),u(e("input",{type:"date",id:"date_get_keys_from_supp","onUpdate:modelValue":t[19]||(t[19]=a=>l.value.date_get_keys_from_supp=a)},null,512),[[g,l.value.date_get_keys_from_supp]])]),e("div",We,[t[52]||(t[52]=e("label",{for:"id_sell"},"Sell Bill ID:",-1)),u(e("input",{type:"number",id:"id_sell","onUpdate:modelValue":t[20]||(t[20]=a=>l.value.id_sell=a)},null,512),[[g,l.value.id_sell]])]),e("div",je,[t[53]||(t[53]=e("label",{for:"id_sell_pi"},"Sell PI ID:",-1)),u(e("input",{type:"text",id:"id_sell_pi","onUpdate:modelValue":t[21]||(t[21]=a=>l.value.id_sell_pi=a)},null,512),[[g,l.value.id_sell_pi]])])])]),e("div",He,[e("button",{type:"button",onClick:t[22]||(t[22]=a=>w("cancel")),class:"cancel-btn"},"Cancel"),e("button",{type:"submit",class:"save-btn",disabled:y.value},c(y.value?"Saving...":"Save Changes"),9,ze)])],32)]))}},Qe=x(Ge,[["__scopeId","data-v-cc90cb10"]]),Xe={class:"car-stock-filter"},Ze={class:"basic-filter"},el={class:"filter-row"},ll={class:"filter-input"},tl={class:"filter-actions"},sl={key:0,class:"advanced-filters"},al={class:"filter-grid"},il={class:"filter-field"},ol={class:"filter-field"},nl=["value"],rl={class:"filter-field"},dl=["value"],ul={class:"filter-field"},_l={class:"filter-field"},pl=["value"],vl={class:"filter-field"},cl=["value"],ml={class:"filter-field"},fl={class:"range-inputs"},gl={class:"filter-field"},bl={class:"range-inputs"},hl={class:"filter-field"},yl={class:"date-inputs"},Dl={class:"filter-field"},kl={class:"filter-field"},El=["value"],Sl={class:"filter-field"},Nl=["value"],wl={__name:"CarStockFilter",emits:["filter"],setup(V,{emit:O}){const N=O,{callApi:v}=T(),h=f([]),D=f([]),R=f([]),A=f([]),C=f([]),w=f([]),b=f(""),y=f(!1),o=f({id:"",car_name:"",color:"",vin:"",loading_port:"",discharge_port:"",freight_min:"",freight_max:"",price_min:"",price_max:"",loading_date_from:"",loading_date_to:"",status:"",client:"",warehouse:""}),F=async()=>{try{const l=await v({query:"SELECT id, car_name FROM cars_names ORDER BY car_name",params:[]});l.success&&(h.value=l.data);const s=await v({query:"SELECT id, color FROM colors ORDER BY color",params:[]});s.success&&(D.value=s.data);const i=await v({query:"SELECT id, loading_port FROM loading_ports ORDER BY loading_port",params:[]});i.success&&(R.value=i.data);const p=await v({query:"SELECT id, discharge_port FROM discharge_ports ORDER BY discharge_port",params:[]});p.success&&(A.value=p.data);const t=await v({query:"SELECT id, name FROM clients ORDER BY name",params:[]});t.success&&(C.value=t.data);const a=await v({query:"SELECT id, name FROM warehouses ORDER BY name",params:[]});a.success&&(w.value=a.data)}catch(l){console.error("Error fetching reference data:",l)}},I=()=>{N("filter",{basic:b.value,advanced:null})},n=()=>{N("filter",{basic:null,advanced:o.value})},m=()=>{b.value="",Object.keys(o.value).forEach(l=>{o.value[l]=""}),N("filter",{basic:"",advanced:null})},_=()=>{y.value=!y.value};return F(),(l,s)=>(d(),r("div",Xe,[e("div",Ze,[e("div",el,[e("div",ll,[u(e("input",{type:"text","onUpdate:modelValue":s[0]||(s[0]=i=>b.value=i),placeholder:"Search by ID, Car, Color, VIN, Ports, Client...",onInput:I},null,544),[[g,b.value]])]),e("div",tl,[e("button",{onClick:_,class:"toggle-btn"},c(y.value?"Hide Advanced":"Show Advanced"),1),e("button",{onClick:m,class:"reset-btn"},"Reset")])])]),y.value?(d(),r("div",sl,[e("div",al,[e("div",il,[s[16]||(s[16]=e("label",{for:"id-filter"},"ID",-1)),u(e("input",{id:"id-filter",type:"text","onUpdate:modelValue":s[1]||(s[1]=i=>o.value.id=i),placeholder:"Car ID"},null,512),[[g,o.value.id]])]),e("div",ol,[s[18]||(s[18]=e("label",{for:"car-name-filter"},"Car",-1)),u(e("select",{id:"car-name-filter","onUpdate:modelValue":s[2]||(s[2]=i=>o.value.car_name=i)},[s[17]||(s[17]=e("option",{value:""},"All Cars",-1)),(d(!0),r(E,null,S(h.value,i=>(d(),r("option",{key:i.id,value:i.car_name},c(i.car_name),9,nl))),128))],512),[[k,o.value.car_name]])]),e("div",rl,[s[20]||(s[20]=e("label",{for:"color-filter"},"Color",-1)),u(e("select",{id:"color-filter","onUpdate:modelValue":s[3]||(s[3]=i=>o.value.color=i)},[s[19]||(s[19]=e("option",{value:""},"All Colors",-1)),(d(!0),r(E,null,S(D.value,i=>(d(),r("option",{key:i.id,value:i.color},c(i.color),9,dl))),128))],512),[[k,o.value.color]])]),e("div",ul,[s[21]||(s[21]=e("label",{for:"vin-filter"},"VIN",-1)),u(e("input",{id:"vin-filter",type:"text","onUpdate:modelValue":s[4]||(s[4]=i=>o.value.vin=i),placeholder:"VIN Number"},null,512),[[g,o.value.vin]])]),e("div",_l,[s[23]||(s[23]=e("label",{for:"loading-port-filter"},"Loading Port",-1)),u(e("select",{id:"loading-port-filter","onUpdate:modelValue":s[5]||(s[5]=i=>o.value.loading_port=i)},[s[22]||(s[22]=e("option",{value:""},"All Loading Ports",-1)),(d(!0),r(E,null,S(R.value,i=>(d(),r("option",{key:i.id,value:i.loading_port},c(i.loading_port),9,pl))),128))],512),[[k,o.value.loading_port]])]),e("div",vl,[s[25]||(s[25]=e("label",{for:"discharge-port-filter"},"Discharge Port",-1)),u(e("select",{id:"discharge-port-filter","onUpdate:modelValue":s[6]||(s[6]=i=>o.value.discharge_port=i)},[s[24]||(s[24]=e("option",{value:""},"All Discharge Ports",-1)),(d(!0),r(E,null,S(A.value,i=>(d(),r("option",{key:i.id,value:i.discharge_port},c(i.discharge_port),9,cl))),128))],512),[[k,o.value.discharge_port]])]),e("div",ml,[s[27]||(s[27]=e("label",null,"Freight Range",-1)),e("div",fl,[u(e("input",{type:"number","onUpdate:modelValue":s[7]||(s[7]=i=>o.value.freight_min=i),placeholder:"Min"},null,512),[[g,o.value.freight_min]]),s[26]||(s[26]=e("span",null,"to",-1)),u(e("input",{type:"number","onUpdate:modelValue":s[8]||(s[8]=i=>o.value.freight_max=i),placeholder:"Max"},null,512),[[g,o.value.freight_max]])])]),e("div",gl,[s[29]||(s[29]=e("label",null,"Price Range",-1)),e("div",bl,[u(e("input",{type:"number","onUpdate:modelValue":s[9]||(s[9]=i=>o.value.price_min=i),placeholder:"Min"},null,512),[[g,o.value.price_min]]),s[28]||(s[28]=e("span",null,"to",-1)),u(e("input",{type:"number","onUpdate:modelValue":s[10]||(s[10]=i=>o.value.price_max=i),placeholder:"Max"},null,512),[[g,o.value.price_max]])])]),e("div",hl,[s[31]||(s[31]=e("label",null,"Loading Date Range",-1)),e("div",yl,[u(e("input",{type:"date","onUpdate:modelValue":s[11]||(s[11]=i=>o.value.loading_date_from=i)},null,512),[[g,o.value.loading_date_from]]),s[30]||(s[30]=e("span",null,"to",-1)),u(e("input",{type:"date","onUpdate:modelValue":s[12]||(s[12]=i=>o.value.loading_date_to=i)},null,512),[[g,o.value.loading_date_to]])])]),e("div",Dl,[s[33]||(s[33]=e("label",{for:"status-filter"},"Status",-1)),u(e("select",{id:"status-filter","onUpdate:modelValue":s[13]||(s[13]=i=>o.value.status=i)},s[32]||(s[32]=[e("option",{value:""},"All Status",-1),e("option",{value:"available"},"Available",-1),e("option",{value:"sold"},"Sold",-1)]),512),[[k,o.value.status]])]),e("div",kl,[s[35]||(s[35]=e("label",{for:"client-filter"},"Client",-1)),u(e("select",{id:"client-filter","onUpdate:modelValue":s[14]||(s[14]=i=>o.value.client=i)},[s[34]||(s[34]=e("option",{value:""},"All Clients",-1)),(d(!0),r(E,null,S(C.value,i=>(d(),r("option",{key:i.id,value:i.name},c(i.name),9,El))),128))],512),[[k,o.value.client]])]),e("div",Sl,[s[37]||(s[37]=e("label",{for:"warehouse-filter"},"Warehouse",-1)),u(e("select",{id:"warehouse-filter","onUpdate:modelValue":s[15]||(s[15]=i=>o.value.warehouse=i)},[s[36]||(s[36]=e("option",{value:""},"All Warehouses",-1)),(d(!0),r(E,null,S(w.value,i=>(d(),r("option",{key:i.id,value:i.name},c(i.name),9,Nl))),128))],512),[[k,o.value.warehouse]])])]),e("div",{class:"advanced-filter-actions"},[e("button",{onClick:n,class:"apply-btn"},"Apply Filters"),e("button",{onClick:m,class:"reset-btn"},"Reset All")])])):$("",!0)]))}},Cl=x(wl,[["__scopeId","data-v-9a3ea348"]]),Rl={class:"cars-stock"},Al={class:"content"},Ol={key:0,class:"dialog-overlay"},$l={class:"dialog"},Fl={__name:"CarsStock",setup(V){const O=K(),N=f(!1),v=f(null),h=f(null),D=f({basic:"",advanced:null}),R=b=>{v.value={...b},N.value=!0},A=()=>{N.value=!1,h.value&&h.value.fetchCarsStock()},C=b=>{D.value=b,h.value&&h.value.fetchCarsStock()},w=()=>{O.push("/warehouses")};return(b,y)=>(d(),r("div",Rl,[y[1]||(y[1]=e("div",{class:"header"},[e("h2",null,"Cars Stock Management")],-1)),e("div",Al,[P(Cl,{onFilter:C}),P(ne,{ref_key:"carStockTableRef",ref:h,onEdit:R,filters:D.value},null,8,["filters"]),e("div",{class:"warehouses-button-container"},[e("button",{onClick:w,class:"warehouses-btn"}," Manage Warehouses ")])]),N.value?(d(),r("div",Ol,[e("div",$l,[P(Qe,{carData:v.value,onSave:A,onCancel:y[0]||(y[0]=o=>N.value=!1)},null,8,["carData"])])])):$("",!0)]))}},Ll=x(Fl,[["__scopeId","data-v-ec68617c"]]);export{Ll as default};
//# sourceMappingURL=CarsStock.DEpmF45H.js.map
