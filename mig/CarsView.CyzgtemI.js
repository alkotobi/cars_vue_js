import{_ as F,r as _,u as Y,j as Q,o as W,c as n,g as a,a as e,b as h,F as R,d as B,t as g,w as b,v as w,p as L,e as q,n as x,q as G,s as K,h as de,m as I,i as re}from"./index.e4AY3vWr.js";import ve from"./CarsStock.DEpmF45H.js";import ce from"./SellBillsView.BlFgE38q.js";import pe from"./WarehousesView.58kdMzMP.js";const be={class:"clients-view"},me={class:"header"},_e={class:"content"},ge={class:"clients-table"},ye=["onClick"],fe=["onClick"],ke={key:0,class:"dialog-overlay"},Ce={class:"dialog"},Ee={class:"form-group"},$e={key:0,class:"error-message"},we={class:"dialog-actions"},Se=["disabled"],Ae={key:1,class:"dialog-overlay"},De={class:"dialog"},he={class:"form-group"},Ne=["readonly"],Ve={key:0,class:"error-message"},Te={class:"dialog-actions"},Ue=["disabled"],Re={__name:"ClientsView",setup(P){const D=_([]),{callApi:$,error:S}=Y(),N=_(!1),A=_(!1),o=_(null),T=_(null),y=_(""),f=Q(()=>{var v;return((v=T.value)==null?void 0:v.role_id)===1}),V=v=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v),c=_({name:"",address:"",email:"",mobiles:"",id_no:""}),d=async()=>{const v=await $({query:`
      SELECT * FROM clients where is_broker = 0
      ORDER BY name ASC
    `,params:[]});v.success&&(D.value=v.data)},U=async()=>{if(!V(c.value.email)){y.value="Please enter a valid email address";return}const v=await $({query:`
      INSERT INTO clients (name, address, email, mobiles, id_no, is_broker)
      VALUES (?, ?, ?, ?, ?, 0)
    `,params:[c.value.name,c.value.address,c.value.email,c.value.mobiles,c.value.id_no]});v.success?(N.value=!1,y.value="",c.value={name:"",address:"",email:"",mobiles:"",id_no:""},await d()):(S.value=v.error,console.error("Error adding client:",v.error))},C=v=>{o.value={...v},A.value=!0},u=async()=>{if(!V(o.value.email)){y.value="Please enter a valid email address";return}const v=await $({query:`
      UPDATE clients 
      SET name = ?, address = ?, email = ?, mobiles = ?, id_no = ?, is_broker = 0
      WHERE id = ?
    `,params:[o.value.name,o.value.address,o.value.email,o.value.mobiles,o.value.id_no,o.value.id]});v.success?(A.value=!1,o.value=null,y.value="",await d()):(S.value=v.error,console.error("Error updating client:",v.error))},i=async v=>{confirm("Are you sure you want to delete this client?")&&(await $({query:"DELETE FROM clients WHERE id = ?",params:[v.id]})).success&&await d()};return W(()=>{const v=localStorage.getItem("user");v&&(T.value=JSON.parse(v),d())}),(v,m)=>(a(),n("div",be,[e("div",me,[m[13]||(m[13]=e("h2",null,"Clients Management",-1)),e("button",{onClick:m[0]||(m[0]=p=>N.value=!0),class:"add-btn"},"Add Client")]),e("div",_e,[e("table",ge,[m[14]||(m[14]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Address"),e("th",null,"Email"),e("th",null,"Mobile"),e("th",null,"ID No"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),n(R,null,B(D.value,p=>(a(),n("tr",{key:p.id},[e("td",null,g(p.name),1),e("td",null,g(p.address),1),e("td",null,g(p.email),1),e("td",null,g(p.mobiles),1),e("td",null,g(p.id_no),1),e("td",null,[e("button",{onClick:O=>C(p),class:"btn edit-btn"},"Edit",8,ye),f.value?(a(),n("button",{key:0,onClick:O=>i(p),class:"btn delete-btn"},"Delete",8,fe)):h("",!0)])]))),128))])])]),N.value?(a(),n("div",ke,[e("div",Ce,[m[15]||(m[15]=e("h3",null,"Add New Client",-1)),e("div",Ee,[b(e("input",{"onUpdate:modelValue":m[1]||(m[1]=p=>c.value.name=p),placeholder:"Name",class:"input-field"},null,512),[[w,c.value.name]]),b(e("input",{"onUpdate:modelValue":m[2]||(m[2]=p=>c.value.address=p),placeholder:"Address",class:"input-field"},null,512),[[w,c.value.address]]),b(e("input",{"onUpdate:modelValue":m[3]||(m[3]=p=>c.value.email=p),placeholder:"Email",class:L(["input-field",{error:y.value&&c.value.email}])},null,2),[[w,c.value.email]]),b(e("input",{"onUpdate:modelValue":m[4]||(m[4]=p=>c.value.mobiles=p),placeholder:"Mobile",class:"input-field"},null,512),[[w,c.value.mobiles]]),b(e("input",{"onUpdate:modelValue":m[5]||(m[5]=p=>c.value.id_no=p),placeholder:"ID No",class:"input-field"},null,512),[[w,c.value.id_no]]),y.value?(a(),n("div",$e,g(y.value),1)):h("",!0)]),e("div",we,[e("button",{onClick:U,class:"btn save-btn",disabled:!f.value},"Add",8,Se),e("button",{onClick:m[6]||(m[6]=p=>N.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),A.value?(a(),n("div",Ae,[e("div",De,[m[16]||(m[16]=e("h3",null,"Edit Client",-1)),e("div",he,[b(e("input",{"onUpdate:modelValue":m[7]||(m[7]=p=>o.value.name=p),placeholder:"Name",class:"input-field",readonly:!f.value},null,8,Ne),[[w,o.value.name]]),b(e("input",{"onUpdate:modelValue":m[8]||(m[8]=p=>o.value.address=p),placeholder:"Address",class:"input-field"},null,512),[[w,o.value.address]]),b(e("input",{"onUpdate:modelValue":m[9]||(m[9]=p=>o.value.email=p),placeholder:"Email",class:L(["input-field",{error:y.value&&o.value.email}])},null,2),[[w,o.value.email]]),b(e("input",{"onUpdate:modelValue":m[10]||(m[10]=p=>o.value.mobiles=p),placeholder:"Mobile",class:"input-field"},null,512),[[w,o.value.mobiles]]),b(e("input",{"onUpdate:modelValue":m[11]||(m[11]=p=>o.value.id_no=p),placeholder:"ID No",class:"input-field"},null,512),[[w,o.value.id_no]]),y.value?(a(),n("div",Ve,g(y.value),1)):h("",!0)]),e("div",Te,[e("button",{onClick:u,class:"btn save-btn",disabled:!f.value},"Save",8,Ue),e("button",{onClick:m[12]||(m[12]=p=>A.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},Be=F(Re,[["__scopeId","data-v-0dd6113e"]]),Oe={class:"clients-view"},Pe={class:"header"},Le={class:"content"},qe={class:"clients-table"},Ie=["onClick"],Fe=["onClick"],Me={key:0,class:"dialog-overlay"},xe={class:"dialog"},Ye={class:"form-group"},We={key:0,class:"error-message"},He={class:"dialog-actions"},Je=["disabled"],Qe={key:1,class:"dialog-overlay"},je={class:"dialog"},ze={class:"form-group"},Ge=["readonly"],Ke={key:0,class:"error-message"},Xe={class:"dialog-actions"},Ze=["disabled"],el={__name:"BrokersView",setup(P){const D=_([]),{callApi:$,error:S}=Y(),N=_(!1),A=_(!1),o=_(null),T=_(null),y=_(""),f=Q(()=>{var v;return((v=T.value)==null?void 0:v.role_id)===1}),V=v=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v),c=_({name:"",address:"",email:"",mobiles:"",id_no:""}),d=async()=>{const v=await $({query:`
      SELECT * FROM clients where is_broker = 1
      ORDER BY name ASC
    `,params:[]});v.success&&(D.value=v.data)},U=async()=>{if(!V(c.value.email)){y.value="Please enter a valid email address";return}const v=await $({query:`
      INSERT INTO clients (name, address, email, mobiles, id_no, is_broker)
      VALUES (?, ?, ?, ?, ?, 1)
    `,params:[c.value.name,c.value.address,c.value.email,c.value.mobiles,c.value.id_no]});v.success?(N.value=!1,y.value="",c.value={name:"",address:"",email:"",mobiles:"",id_no:""},await d()):(S.value=v.error,console.error("Error adding client:",v.error))},C=v=>{o.value={...v},A.value=!0},u=async()=>{if(!V(o.value.email)){y.value="Please enter a valid email address";return}const v=await $({query:`
      UPDATE clients 
      SET name = ?, address = ?, email = ?, mobiles = ?, id_no = ?, is_broker = 1
      WHERE id = ?
    `,params:[o.value.name,o.value.address,o.value.email,o.value.mobiles,o.value.id_no,o.value.id]});v.success?(A.value=!1,o.value=null,y.value="",await d()):(S.value=v.error,console.error("Error updating client:",v.error))},i=async v=>{confirm("Are you sure you want to delete this client?")&&(await $({query:"DELETE FROM clients WHERE id = ?",params:[v.id]})).success&&await d()};return W(()=>{const v=localStorage.getItem("user");v&&(T.value=JSON.parse(v),d())}),(v,m)=>(a(),n("div",Oe,[e("div",Pe,[m[13]||(m[13]=e("h2",null,"Brokers Management",-1)),e("button",{onClick:m[0]||(m[0]=p=>N.value=!0),class:"add-btn"},"Add Client")]),e("div",Le,[e("table",qe,[m[14]||(m[14]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Address"),e("th",null,"Email"),e("th",null,"Mobile"),e("th",null,"ID No"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),n(R,null,B(D.value,p=>(a(),n("tr",{key:p.id},[e("td",null,g(p.name),1),e("td",null,g(p.address),1),e("td",null,g(p.email),1),e("td",null,g(p.mobiles),1),e("td",null,g(p.id_no),1),e("td",null,[e("button",{onClick:O=>C(p),class:"btn edit-btn"},"Edit",8,Ie),f.value?(a(),n("button",{key:0,onClick:O=>i(p),class:"btn delete-btn"},"Delete",8,Fe)):h("",!0)])]))),128))])])]),N.value?(a(),n("div",Me,[e("div",xe,[m[15]||(m[15]=e("h3",null,"Add New Client",-1)),e("div",Ye,[b(e("input",{"onUpdate:modelValue":m[1]||(m[1]=p=>c.value.name=p),placeholder:"Name",class:"input-field"},null,512),[[w,c.value.name]]),b(e("input",{"onUpdate:modelValue":m[2]||(m[2]=p=>c.value.address=p),placeholder:"Address",class:"input-field"},null,512),[[w,c.value.address]]),b(e("input",{"onUpdate:modelValue":m[3]||(m[3]=p=>c.value.email=p),placeholder:"Email",class:L(["input-field",{error:y.value&&c.value.email}])},null,2),[[w,c.value.email]]),b(e("input",{"onUpdate:modelValue":m[4]||(m[4]=p=>c.value.mobiles=p),placeholder:"Mobile",class:"input-field"},null,512),[[w,c.value.mobiles]]),b(e("input",{"onUpdate:modelValue":m[5]||(m[5]=p=>c.value.id_no=p),placeholder:"ID No",class:"input-field"},null,512),[[w,c.value.id_no]]),y.value?(a(),n("div",We,g(y.value),1)):h("",!0)]),e("div",He,[e("button",{onClick:U,class:"btn save-btn",disabled:!f.value},"Add",8,Je),e("button",{onClick:m[6]||(m[6]=p=>N.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),A.value?(a(),n("div",Qe,[e("div",je,[m[16]||(m[16]=e("h3",null,"Edit Client",-1)),e("div",ze,[b(e("input",{"onUpdate:modelValue":m[7]||(m[7]=p=>o.value.name=p),placeholder:"Name",class:"input-field",readonly:!f.value},null,8,Ge),[[w,o.value.name]]),b(e("input",{"onUpdate:modelValue":m[8]||(m[8]=p=>o.value.address=p),placeholder:"Address",class:"input-field"},null,512),[[w,o.value.address]]),b(e("input",{"onUpdate:modelValue":m[9]||(m[9]=p=>o.value.email=p),placeholder:"Email",class:L(["input-field",{error:y.value&&o.value.email}])},null,2),[[w,o.value.email]]),b(e("input",{"onUpdate:modelValue":m[10]||(m[10]=p=>o.value.mobiles=p),placeholder:"Mobile",class:"input-field"},null,512),[[w,o.value.mobiles]]),b(e("input",{"onUpdate:modelValue":m[11]||(m[11]=p=>o.value.id_no=p),placeholder:"ID No",class:"input-field"},null,512),[[w,o.value.id_no]]),y.value?(a(),n("div",Ke,g(y.value),1)):h("",!0)]),e("div",Xe,[e("button",{onClick:u,class:"btn save-btn",disabled:!f.value},"Save",8,Ze),e("button",{onClick:m[12]||(m[12]=p=>A.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},ll=F(el,[["__scopeId","data-v-8051a3ee"]]),tl={class:"suppliers-view"},sl={class:"header"},al={class:"content"},ol={class:"suppliers-table"},nl=["onClick"],il=["onClick"],ul={key:0,class:"dialog-overlay"},dl={class:"dialog"},rl={class:"form-group"},vl={class:"dialog-actions"},cl={key:1,class:"dialog-overlay"},pl={class:"dialog"},bl={class:"form-group"},ml={class:"dialog-actions"},_l={__name:"SuppliersView",setup(P){const D=_([]),{callApi:$,error:S}=Y(),N=_(!1),A=_(!1),o=_(null),T=_(null),y=Q(()=>{var u;return((u=T.value)==null?void 0:u.role_id)===1}),f=_({name:"",contact_info:"",notes:""}),V=async()=>{const u=await $({query:`
      SELECT * FROM suppliers
      ORDER BY name ASC
    `,params:[]});u.success&&(D.value=u.data)},c=async()=>{const u=await $({query:`
      INSERT INTO suppliers (name, contact_info, notes)
      VALUES (?, ?, ?)
    `,params:[f.value.name,f.value.contact_info,f.value.notes]});u.success?(N.value=!1,f.value={name:"",contact_info:"",notes:""},await V()):(S.value=u.error,console.error("Error adding supplier:",u.error))},d=u=>{o.value={...u},A.value=!0},U=async()=>{const u=await $({query:`
      UPDATE suppliers 
      SET name = ?, contact_info = ?, notes = ?
      WHERE id = ?
    `,params:[o.value.name,o.value.contact_info,o.value.notes,o.value.id]});u.success?(A.value=!1,o.value=null,await V()):(S.value=u.error,console.error("Error updating supplier:",u.error))},C=async u=>{confirm("Are you sure you want to delete this supplier?")&&(await $({query:"DELETE FROM suppliers WHERE id = ?",params:[u.id]})).success&&await V()};return W(()=>{const u=localStorage.getItem("user");u&&(T.value=JSON.parse(u),V())}),(u,i)=>(a(),n("div",tl,[e("div",sl,[i[9]||(i[9]=e("h2",null,"Suppliers Management",-1)),e("button",{onClick:i[0]||(i[0]=v=>N.value=!0),class:"add-btn"},"Add Supplier")]),e("div",al,[e("table",ol,[i[10]||(i[10]=e("thead",null,[e("tr",null,[e("th",null,"Name"),e("th",null,"Contact Info"),e("th",null,"Notes"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),n(R,null,B(D.value,v=>(a(),n("tr",{key:v.id},[e("td",null,g(v.name),1),e("td",null,g(v.contact_info),1),e("td",null,g(v.notes),1),e("td",null,[e("button",{onClick:m=>d(v),class:"btn edit-btn"},"Edit",8,nl),y.value?(a(),n("button",{key:0,onClick:m=>C(v),class:"btn delete-btn"},"Delete",8,il)):h("",!0)])]))),128))])])]),N.value?(a(),n("div",ul,[e("div",dl,[i[11]||(i[11]=e("h3",null,"Add New Supplier",-1)),e("div",rl,[b(e("input",{"onUpdate:modelValue":i[1]||(i[1]=v=>f.value.name=v),placeholder:"Name",class:"input-field"},null,512),[[w,f.value.name]]),b(e("textarea",{"onUpdate:modelValue":i[2]||(i[2]=v=>f.value.contact_info=v),placeholder:"Contact Information",class:"input-field textarea"},null,512),[[w,f.value.contact_info]]),b(e("textarea",{"onUpdate:modelValue":i[3]||(i[3]=v=>f.value.notes=v),placeholder:"Notes",class:"input-field textarea"},null,512),[[w,f.value.notes]])]),e("div",vl,[e("button",{onClick:c,class:"btn save-btn"},"Save"),e("button",{onClick:i[4]||(i[4]=v=>N.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),A.value?(a(),n("div",cl,[e("div",pl,[i[12]||(i[12]=e("h3",null,"Edit Supplier",-1)),e("div",bl,[b(e("input",{"onUpdate:modelValue":i[5]||(i[5]=v=>o.value.name=v),placeholder:"Name",class:"input-field"},null,512),[[w,o.value.name]]),b(e("textarea",{"onUpdate:modelValue":i[6]||(i[6]=v=>o.value.contact_info=v),placeholder:"Contact Information",class:"input-field textarea"},null,512),[[w,o.value.contact_info]]),b(e("textarea",{"onUpdate:modelValue":i[7]||(i[7]=v=>o.value.notes=v),placeholder:"Notes",class:"input-field textarea"},null,512),[[w,o.value.notes]])]),e("div",ml,[e("button",{onClick:U,class:"btn save-btn"},"Save"),e("button",{onClick:i[8]||(i[8]=v=>A.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},gl=F(_l,[["__scopeId","data-v-c8ee631a"]]),yl={class:"models-view"},fl={class:"section"},kl={class:"header"},Cl={class:"data-table"},El=["onClick"],$l=["onClick"],wl={class:"section"},Sl={class:"header"},Al={class:"data-table"},Dl=["onClick"],hl=["onClick"],Nl={key:0,class:"dialog-overlay"},Vl={class:"dialog"},Tl={class:"form-group"},Ul={class:"dialog-actions"},Rl={key:1,class:"dialog-overlay"},Bl={class:"dialog"},Ol={class:"form-group"},Pl={class:"dialog-actions"},Ll={key:2,class:"dialog-overlay"},ql={class:"dialog"},Il={class:"form-group"},Fl={class:"form-group"},Ml=["value"],xl={class:"form-group"},Yl={class:"form-group"},Wl={class:"dialog-buttons"},Hl={key:3,class:"dialog-overlay"},Jl={class:"dialog"},Ql={class:"form-group"},jl={class:"form-group"},zl=["value"],Gl={class:"form-group"},Kl={class:"form-group"},Xl={class:"dialog-buttons"},Zl={__name:"CarModelsView",setup(P){const{callApi:D}=Y(),$=_(!1),S=_(!1),N=_(!1),A=_(!1),o=_([]),T=_([]),y=_(null),f=_(null),V=_(null),c=Q(()=>{var k;return((k=V.value)==null?void 0:k.role_id)===1}),d=_({brand:""}),U=_({car_name:"",notes:"",is_big_car:!1,id_brand:null}),C=async()=>{const k=await D({query:"SELECT * FROM brands ORDER BY brand ASC",params:[]});k.success&&(o.value=k.data)},u=async()=>{const k=await D({query:`
      SELECT cn.*, b.brand 
      FROM cars_names cn
      LEFT JOIN brands b ON cn.id_brand = b.id 
      ORDER BY cn.car_name ASC
    `,params:[]});k.success&&(T.value=k.data)},i=async()=>{const k=await D({query:"INSERT INTO brands (brand) VALUES (?)",params:[d.value.brand]});k.success?($.value=!1,d.value={brand:""},await C()):console.log(k.error)},v=async()=>{const k=await D({query:"INSERT INTO cars_names (car_name, notes, is_big_car, id_brand) VALUES (?, ?, ?, ?)",params:[U.value.car_name,U.value.notes,U.value.is_big_car?1:0,U.value.id_brand]});k.success?(N.value=!1,U.value={car_name:"",notes:"",is_big_car:!1,id_brand:null},await u()):console.log(k.error)},m=k=>{y.value={...k},S.value=!0},p=k=>{f.value={...k},A.value=!0},O=async()=>{const k=await D({query:"UPDATE brands SET brand = ? WHERE id = ?",params:[y.value.brand,y.value.id]});k.success?(S.value=!1,y.value=null,await C()):console.log(k.error)},H=async()=>{const k=await D({query:"UPDATE cars_names SET car_name = ?, notes = ?, is_big_car = ?, id_brand = ? WHERE id = ?",params:[f.value.car_name,f.value.notes,f.value.is_big_car?1:0,f.value.id_brand,f.value.id]});k.success?(A.value=!1,f.value=null,await u()):console.log(k.error)},J=async k=>{confirm("Are you sure you want to delete this brand?")&&(await D({query:"DELETE FROM brands WHERE id = ?",params:[k.id]})).success&&await C()},z=async k=>{confirm("Are you sure you want to delete this car name?")&&(await D({query:"DELETE FROM cars_names WHERE id = ?",params:[k.id]})).success&&await u()};return W(()=>{const k=localStorage.getItem("user");k&&(V.value=JSON.parse(k),C(),u())}),(k,t)=>(a(),n("div",yl,[e("div",fl,[e("div",kl,[t[16]||(t[16]=e("h2",null,"Brands Management",-1)),e("button",{onClick:t[0]||(t[0]=r=>$.value=!0),class:"add-btn"},"Add Brand")]),e("table",Cl,[t[17]||(t[17]=e("thead",null,[e("tr",null,[e("th",null,"Brand"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),n(R,null,B(o.value,r=>(a(),n("tr",{key:r.id},[e("td",null,g(r.brand),1),e("td",null,[e("button",{onClick:j=>m(r),class:"btn edit-btn"},"Edit",8,El),c.value?(a(),n("button",{key:0,onClick:j=>J(r),class:"btn delete-btn"},"Delete",8,$l)):h("",!0)])]))),128))])])]),e("div",wl,[e("div",Sl,[t[18]||(t[18]=e("h2",null,"Car Names Management",-1)),e("button",{onClick:t[1]||(t[1]=r=>N.value=!0),class:"add-btn"},"Add Car Name")]),e("table",Al,[t[19]||(t[19]=e("thead",null,[e("tr",null,[e("th",null,"Car Name"),e("th",null,"Brand"),e("th",null,"Notes"),e("th",null,"Big Car"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),n(R,null,B(T.value,r=>(a(),n("tr",{key:r.id},[e("td",null,g(r.car_name),1),e("td",null,g(r.brand),1),e("td",null,g(r.notes),1),e("td",null,g(r.is_big_car?"Yes":"No"),1),e("td",null,[e("button",{onClick:j=>p(r),class:"btn edit-btn"},"Edit",8,Dl),c.value?(a(),n("button",{key:0,onClick:j=>z(r),class:"btn delete-btn"},"Delete",8,hl)):h("",!0)])]))),128))])])]),$.value?(a(),n("div",Nl,[e("div",Vl,[t[20]||(t[20]=e("h3",null,"Add New Brand",-1)),e("div",Tl,[b(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>d.value.brand=r),placeholder:"Brand Name",class:"input-field"},null,512),[[w,d.value.brand]])]),e("div",Ul,[e("button",{onClick:i,class:"btn save-btn"},"Save"),e("button",{onClick:t[3]||(t[3]=r=>$.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),S.value?(a(),n("div",Rl,[e("div",Bl,[t[21]||(t[21]=e("h3",null,"Edit Brand",-1)),e("div",Ol,[b(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>y.value.brand=r),placeholder:"Brand Name",class:"input-field"},null,512),[[w,y.value.brand]])]),e("div",Pl,[e("button",{onClick:O,class:"btn save-btn"},"Save"),e("button",{onClick:t[5]||(t[5]=r=>S.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),N.value?(a(),n("div",Ll,[e("div",ql,[t[24]||(t[24]=e("h3",null,"Add New Car Name",-1)),e("div",Il,[b(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>U.value.car_name=r),placeholder:"Car Name"},null,512),[[w,U.value.car_name]])]),e("div",Fl,[b(e("select",{"onUpdate:modelValue":t[7]||(t[7]=r=>U.value.id_brand=r)},[t[22]||(t[22]=e("option",{value:""},"Select Brand",-1)),(a(!0),n(R,null,B(o.value,r=>(a(),n("option",{key:r.id,value:r.id},g(r.brand),9,Ml))),128))],512),[[q,U.value.id_brand]])]),e("div",xl,[b(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>U.value.notes=r),placeholder:"Notes"},null,512),[[w,U.value.notes]])]),e("div",Yl,[e("label",null,[b(e("input",{type:"checkbox","onUpdate:modelValue":t[9]||(t[9]=r=>U.value.is_big_car=r)},null,512),[[G,U.value.is_big_car]]),t[23]||(t[23]=x(" Big Car "))])]),e("div",Wl,[e("button",{onClick:v,class:"btn save-btn"},"Save"),e("button",{onClick:t[10]||(t[10]=r=>N.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),A.value?(a(),n("div",Hl,[e("div",Jl,[t[27]||(t[27]=e("h3",null,"Edit Car Name",-1)),e("div",Ql,[b(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>f.value.car_name=r),placeholder:"Car Name"},null,512),[[w,f.value.car_name]])]),e("div",jl,[b(e("select",{"onUpdate:modelValue":t[12]||(t[12]=r=>f.value.id_brand=r)},[t[25]||(t[25]=e("option",{value:""},"Select Brand",-1)),(a(!0),n(R,null,B(o.value,r=>(a(),n("option",{key:r.id,value:r.id},g(r.brand),9,zl))),128))],512),[[q,f.value.id_brand]])]),e("div",Gl,[b(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>f.value.notes=r),placeholder:"Notes"},null,512),[[w,f.value.notes]])]),e("div",Kl,[e("label",null,[b(e("input",{type:"checkbox","onUpdate:modelValue":t[14]||(t[14]=r=>f.value.is_big_car=r)},null,512),[[G,f.value.is_big_car]]),t[26]||(t[26]=x(" Big Car "))])]),e("div",Xl,[e("button",{onClick:H,class:"btn save-btn"},"Save"),e("button",{onClick:t[15]||(t[15]=r=>A.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},et=F(Zl,[["__scopeId","data-v-1ce5e605"]]),lt={class:"colors-view"},tt={class:"header"},st={class:"content"},at={class:"colors-table"},ot=["onClick"],nt=["onClick"],it={key:0,class:"dialog-overlay"},ut={class:"dialog"},dt={class:"form-group"},rt={class:"dialog-actions"},vt={key:1,class:"dialog-overlay"},ct={class:"dialog"},pt={class:"form-group"},bt={class:"dialog-actions"},mt={__name:"ColorsView",setup(P){const D=_([]),{callApi:$}=Y(),S=_(!1),N=_(!1),A=_(null),o=_(null),T=Q(()=>{var C;return((C=o.value)==null?void 0:C.role_id)===1}),y=_({color:""}),f=async()=>{const C=await $({query:"SELECT * FROM colors ORDER BY color ASC",params:[]});C.success&&(D.value=C.data)},V=async()=>{(await $({query:"INSERT INTO colors (color) VALUES (?)",params:[y.value.color]})).success&&(S.value=!1,y.value={color:""},await f())},c=C=>{A.value={...C},N.value=!0},d=async()=>{(await $({query:"UPDATE colors SET color = ? WHERE id = ?",params:[A.value.color,A.value.id]})).success&&(N.value=!1,A.value=null,await f())},U=async C=>{confirm("Are you sure you want to delete this color?")&&(await $({query:"DELETE FROM colors WHERE id = ?",params:[C.id]})).success&&await f()};return W(()=>{const C=localStorage.getItem("user");C&&(o.value=JSON.parse(C),f())}),(C,u)=>(a(),n("div",lt,[e("div",tt,[u[5]||(u[5]=e("h2",null,"Colors Management",-1)),e("button",{onClick:u[0]||(u[0]=i=>S.value=!0),class:"add-btn"},"Add Color")]),e("div",st,[e("table",at,[u[6]||(u[6]=e("thead",null,[e("tr",null,[e("th",null,"Color"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),n(R,null,B(D.value,i=>(a(),n("tr",{key:i.id},[e("td",null,g(i.color),1),e("td",null,[e("button",{onClick:v=>c(i),class:"btn edit-btn"},"Edit",8,ot),T.value?(a(),n("button",{key:0,onClick:v=>U(i),class:"btn delete-btn"},"Delete",8,nt)):h("",!0)])]))),128))])])]),S.value?(a(),n("div",it,[e("div",ut,[u[7]||(u[7]=e("h3",null,"Add New Color",-1)),e("div",dt,[b(e("input",{"onUpdate:modelValue":u[1]||(u[1]=i=>y.value.color=i),placeholder:"Color Name",class:"input-field"},null,512),[[w,y.value.color]])]),e("div",rt,[e("button",{onClick:V,class:"btn save-btn"},"Save"),e("button",{onClick:u[2]||(u[2]=i=>S.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),N.value?(a(),n("div",vt,[e("div",ct,[u[8]||(u[8]=e("h3",null,"Edit Color",-1)),e("div",pt,[b(e("input",{"onUpdate:modelValue":u[3]||(u[3]=i=>A.value.color=i),placeholder:"Color Name",class:"input-field"},null,512),[[w,A.value.color]])]),e("div",bt,[e("button",{onClick:d,class:"btn save-btn"},"Save"),e("button",{onClick:u[4]||(u[4]=i=>N.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},_t=F(mt,[["__scopeId","data-v-4eb1323d"]]),gt={class:"ports-view"},yt={class:"header"},ft={class:"content"},kt={class:"ports-table"},Ct=["onClick"],Et=["onClick"],$t={key:0,class:"dialog-overlay"},wt={class:"dialog"},St={class:"form-group"},At={class:"dialog-actions"},Dt={key:1,class:"dialog-overlay"},ht={class:"dialog"},Nt={class:"form-group"},Vt={class:"dialog-actions"},Tt={__name:"DischargePortsView",setup(P){const D=_([]),{callApi:$}=Y(),S=_(!1),N=_(!1),A=_(null),o=_(null),T=Q(()=>{var C;return((C=o.value)==null?void 0:C.role_id)===1}),y=_({discharge_port:""}),f=async()=>{const C=await $({query:"SELECT * FROM discharge_ports ORDER BY discharge_port ASC",params:[]});C.success&&(D.value=C.data)},V=async()=>{(await $({query:"INSERT INTO discharge_ports (discharge_port) VALUES (?)",params:[y.value.discharge_port]})).success&&(S.value=!1,y.value={discharge_port:""},await f())},c=C=>{A.value={...C},N.value=!0},d=async()=>{(await $({query:"UPDATE discharge_ports SET discharge_port = ? WHERE id = ?",params:[A.value.discharge_port,A.value.id]})).success&&(N.value=!1,A.value=null,await f())},U=async C=>{confirm("Are you sure you want to delete this discharge port?")&&(await $({query:"DELETE FROM discharge_ports WHERE id = ?",params:[C.id]})).success&&await f()};return W(()=>{const C=localStorage.getItem("user");C&&(o.value=JSON.parse(C),f())}),(C,u)=>(a(),n("div",gt,[e("div",yt,[u[5]||(u[5]=e("h2",null,"Discharge Ports Management",-1)),e("button",{onClick:u[0]||(u[0]=i=>S.value=!0),class:"add-btn"},"Add Discharge Port")]),e("div",ft,[e("table",kt,[u[6]||(u[6]=e("thead",null,[e("tr",null,[e("th",null,"Discharge Port"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),n(R,null,B(D.value,i=>(a(),n("tr",{key:i.id},[e("td",null,g(i.discharge_port),1),e("td",null,[e("button",{onClick:v=>c(i),class:"btn edit-btn"},"Edit",8,Ct),T.value?(a(),n("button",{key:0,onClick:v=>U(i),class:"btn delete-btn"},"Delete",8,Et)):h("",!0)])]))),128))])])]),S.value?(a(),n("div",$t,[e("div",wt,[u[7]||(u[7]=e("h3",null,"Add New Discharge Port",-1)),e("div",St,[b(e("input",{"onUpdate:modelValue":u[1]||(u[1]=i=>y.value.discharge_port=i),placeholder:"Discharge Port Name",class:"input-field"},null,512),[[w,y.value.discharge_port]])]),e("div",At,[e("button",{onClick:V,class:"btn save-btn"},"Save"),e("button",{onClick:u[2]||(u[2]=i=>S.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),N.value?(a(),n("div",Dt,[e("div",ht,[u[8]||(u[8]=e("h3",null,"Edit Discharge Port",-1)),e("div",Nt,[b(e("input",{"onUpdate:modelValue":u[3]||(u[3]=i=>A.value.discharge_port=i),placeholder:"Discharge Port Name",class:"input-field"},null,512),[[w,A.value.discharge_port]])]),e("div",Vt,[e("button",{onClick:d,class:"btn save-btn"},"Save"),e("button",{onClick:u[4]||(u[4]=i=>N.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},Ut=F(Tt,[["__scopeId","data-v-d7d6cc70"]]),Rt={class:"ports-view"},Bt={class:"header"},Ot={class:"content"},Pt={class:"ports-table"},Lt=["onClick"],qt=["onClick"],It={key:0,class:"dialog-overlay"},Ft={class:"dialog"},Mt={class:"form-group"},xt={class:"dialog-actions"},Yt={key:1,class:"dialog-overlay"},Wt={class:"dialog"},Ht={class:"form-group"},Jt={class:"dialog-actions"},Qt={__name:"LoadingPortsView",setup(P){const D=_([]),{callApi:$}=Y(),S=_(!1),N=_(!1),A=_(null),o=_(null),T=Q(()=>{var C;return((C=o.value)==null?void 0:C.role_id)===1}),y=_({loading_port:""}),f=async()=>{const C=await $({query:"SELECT * FROM loading_ports ORDER BY loading_port ASC",params:[]});C.success&&(D.value=C.data)},V=async()=>{(await $({query:"INSERT INTO loading_ports (loading_port) VALUES (?)",params:[y.value.loading_port]})).success&&(S.value=!1,y.value={loading_port:""},await f())},c=C=>{A.value={...C},N.value=!0},d=async()=>{(await $({query:"UPDATE loading_ports SET loading_port = ? WHERE id = ?",params:[A.value.loading_port,A.value.id]})).success&&(N.value=!1,A.value=null,await f())},U=async C=>{confirm("Are you sure you want to delete this loading port?")&&(await $({query:"DELETE FROM loading_ports WHERE id = ?",params:[C.id]})).success&&await f()};return W(()=>{const C=localStorage.getItem("user");C&&(o.value=JSON.parse(C),f())}),(C,u)=>(a(),n("div",Rt,[e("div",Bt,[u[5]||(u[5]=e("h2",null,"Loading Ports Management",-1)),e("button",{onClick:u[0]||(u[0]=i=>S.value=!0),class:"add-btn"},"Add Loading Port")]),e("div",Ot,[e("table",Pt,[u[6]||(u[6]=e("thead",null,[e("tr",null,[e("th",null,"Loading Port"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),n(R,null,B(D.value,i=>(a(),n("tr",{key:i.id},[e("td",null,g(i.loading_port),1),e("td",null,[e("button",{onClick:v=>c(i),class:"btn edit-btn"},"Edit",8,Lt),T.value?(a(),n("button",{key:0,onClick:v=>U(i),class:"btn delete-btn"},"Delete",8,qt)):h("",!0)])]))),128))])])]),S.value?(a(),n("div",It,[e("div",Ft,[u[7]||(u[7]=e("h3",null,"Add New Loading Port",-1)),e("div",Mt,[b(e("input",{"onUpdate:modelValue":u[1]||(u[1]=i=>y.value.loading_port=i),placeholder:"Loading Port Name",class:"input-field"},null,512),[[w,y.value.loading_port]])]),e("div",xt,[e("button",{onClick:V,class:"btn save-btn"},"Save"),e("button",{onClick:u[2]||(u[2]=i=>S.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0),N.value?(a(),n("div",Yt,[e("div",Wt,[u[8]||(u[8]=e("h3",null,"Edit Loading Port",-1)),e("div",Ht,[b(e("input",{"onUpdate:modelValue":u[3]||(u[3]=i=>A.value.loading_port=i),placeholder:"Loading Port Name",class:"input-field"},null,512),[[w,A.value.loading_port]])]),e("div",Jt,[e("button",{onClick:d,class:"btn save-btn"},"Save"),e("button",{onClick:u[4]||(u[4]=i=>N.value=!1),class:"btn cancel-btn"},"Cancel")])])])):h("",!0)]))}},jt=F(Qt,[["__scopeId","data-v-b6aa02ef"]]),zt={class:"master-section"},Gt={key:0,class:"selected-id"},Kt={class:"data-table"},Xt=["onClick"],Zt={__name:"BuyBillsTable",props:{buyBills:{type:Array,required:!0},selectedBill:{type:Object,default:null}},emits:["select-bill"],setup(P,{emit:D}){const $=D,S=N=>{$("select-bill",N)};return(N,A)=>(a(),n("div",zt,[P.selectedBill?(a(),n("div",Gt," Selected Purchase ID: "+g(P.selectedBill.id),1)):h("",!0),e("table",Kt,[A[0]||(A[0]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Date"),e("th",null,"Supplier"),e("th",null,"Amount"),e("th",null,"Paid"),e("th",null,"Balance")])],-1)),e("tbody",null,[(a(!0),n(R,null,B(P.buyBills,o=>{var T;return a(),n("tr",{key:o.id,class:L({selected:((T=P.selectedBill)==null?void 0:T.id)===o.id}),onClick:y=>S(o)},[e("td",null,g(o.id),1),e("td",null,g(new Date(o.date_buy).toLocaleDateString()),1),e("td",null,g(o.supplier_name),1),e("td",null,g(o.amount),1),e("td",null,g(o.payed),1),e("td",null,g(o.amount-o.payed),1)],10,Xt)}),128))])])]))}},es=F(Zt,[["__scopeId","data-v-871ffa9f"]]),ls={class:"detail-section"},ts={class:"detail-header"},ss={class:"button-group"},as=["disabled","title"],os={class:"data-table"},ns={class:"actions"},is=["onClick","disabled","title"],us=["onClick","disabled","title"],ds={key:0,class:"dialog-overlay"},rs={class:"dialog"},vs={class:"form-group"},cs={class:"form-group"},ps={class:"form-row"},bs={class:"form-group half"},ms={class:"form-group half"},_s={class:"form-group"},gs={class:"form-group"},ys={class:"dialog-buttons"},fs={__name:"BuyDetailsTable",props:{buyDetails:{type:Array,required:!0},isAdmin:{type:Boolean,default:!1}},emits:["add-detail","delete-detail","update-detail"],setup(P,{emit:D}){const{callApi:$}=Y(),S=P,N=D,A=_(!1),o=_(null),T=(c,d)=>{if(d){alert("Cannot delete details - Stock has already been updated");return}confirm("Are you sure you want to delete this detail?")&&N("delete-detail",c)},y=c=>{o.value={...c},A.value=!0},f=()=>{N("update-detail",o.value),A.value=!1,o.value=null},V=async()=>{if(!S.buyDetails.length){alert("No details to process");return}if(confirm("Are you sure you want to update the stock? This action cannot be undone.")){for(const d of S.buyDetails)for(let U=0;U<d.QTY;U++){const C=await $({query:`
            INSERT INTO cars_stock 
            (id_buy_details,price_cell)
            VALUES (?,?)
          `,params:[d.id,d.price_sell]});if(!C.success){alert("Error creating stock entry"),console.error("Error creating stock entry:",C.error);return}}const c=await $({query:"UPDATE buy_bill SET is_stock_updated = 1 WHERE id = ?",params:[S.buyDetails[0].id_buy_bill]});c.success?(alert("Stock has been successfully updated"),N("update-detail",S.buyDetails[0])):(console.error("Error updating is_stock_updated flag:",c.error),alert("Error updating stock"))}};return(c,d)=>{var U,C,u;return a(),n(R,null,[e("div",ls,[e("div",ts,[d[8]||(d[8]=e("h3",null,"Purchase Details",-1)),e("div",ss,[e("button",{onClick:V,class:L(["stock-btn",{disabled:(U=P.buyDetails[0])==null?void 0:U.is_stock_updated}]),disabled:(C=P.buyDetails[0])==null?void 0:C.is_stock_updated,title:(u=P.buyDetails[0])!=null&&u.is_stock_updated?"Stock has already been updated":"Update stock"}," In Stock ",10,as),e("button",{onClick:d[0]||(d[0]=i=>c.$emit("add-detail")),class:"add-btn"},"Add Detail")])]),e("table",os,[d[9]||(d[9]=e("thead",null,[e("tr",null,[e("th",null,"Car"),e("th",null,"Color"),e("th",null,"Quantity"),e("th",null,"Amount"),e("th",null,"Year"),e("th",null,"Month"),e("th",null,"Price Sell"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),n(R,null,B(P.buyDetails,i=>(a(),n("tr",{key:i.id},[e("td",null,g(i.car_name),1),e("td",null,g(i.color),1),e("td",null,g(i.QTY),1),e("td",null,g(i.amount),1),e("td",null,g(i.year),1),e("td",null,g(i.month),1),e("td",null,g(i.price_sell),1),e("td",ns,[e("button",{onClick:v=>y(i),class:L(["edit-btn",{disabled:i.is_stock_updated}]),disabled:i.is_stock_updated,title:i.is_stock_updated?"Cannot edit - Stock has been updated":"Edit this detail"}," Edit ",10,is),e("button",{onClick:v=>T(i.id,i.is_stock_updated),class:L(["delete-btn",{disabled:i.is_stock_updated}]),disabled:i.is_stock_updated,title:i.is_stock_updated?"Cannot delete - Stock has been updated":"Delete this detail"}," Delete ",10,us)])]))),128))])])]),A.value&&o.value?(a(),n("div",ds,[e("div",rs,[d[17]||(d[17]=e("h3",null,"Edit Purchase Detail",-1)),e("form",{onSubmit:K(f,["prevent"])},[e("div",vs,[d[10]||(d[10]=e("label",{for:"edit-qty"},"Quantity",-1)),b(e("input",{type:"number",id:"edit-qty","onUpdate:modelValue":d[1]||(d[1]=i=>o.value.QTY=i),min:"1",required:""},null,512),[[w,o.value.QTY]])]),e("div",cs,[d[11]||(d[11]=e("label",{for:"edit-amount"},"Amount",-1)),b(e("input",{type:"number",id:"edit-amount","onUpdate:modelValue":d[2]||(d[2]=i=>o.value.amount=i),step:"0.01",required:""},null,512),[[w,o.value.amount]])]),e("div",ps,[e("div",bs,[d[12]||(d[12]=e("label",{for:"edit-year"},"Year",-1)),b(e("input",{type:"number",id:"edit-year","onUpdate:modelValue":d[3]||(d[3]=i=>o.value.year=i),required:""},null,512),[[w,o.value.year]])]),e("div",ms,[d[13]||(d[13]=e("label",{for:"edit-month"},"Month",-1)),b(e("input",{type:"number",id:"edit-month","onUpdate:modelValue":d[4]||(d[4]=i=>o.value.month=i),min:"1",max:"12",required:""},null,512),[[w,o.value.month]])])]),e("div",_s,[d[14]||(d[14]=e("label",{for:"edit-price-sell"},"Price Sell",-1)),b(e("input",{type:"number",id:"edit-price-sell","onUpdate:modelValue":d[5]||(d[5]=i=>o.value.price_sell=i),step:"0.01",required:""},null,512),[[w,o.value.price_sell]])]),e("div",gs,[d[15]||(d[15]=e("label",{for:"edit-notes"},"Notes",-1)),b(e("textarea",{id:"edit-notes","onUpdate:modelValue":d[6]||(d[6]=i=>o.value.notes=i),rows:"3"},null,512),[[w,o.value.notes]])]),e("div",ys,[e("button",{type:"button",onClick:d[7]||(d[7]=i=>A.value=!1),class:"cancel-btn"}," Cancel "),d[16]||(d[16]=e("button",{type:"submit",class:"submit-btn"}," Save Changes ",-1))])],32)])])):h("",!0)],64)}}},ks=F(fs,[["__scopeId","data-v-6f4a0953"]]),Cs={class:"buy-view"},Es={class:"header"},$s={class:"content"},ws={class:"master-detail-vertical"},Ss={key:0,class:"dialog-overlay"},As={class:"dialog"},Ds={class:"form-group"},hs=["value"],Ns={class:"form-group"},Vs={class:"form-group"},Ts={class:"form-group"},Us={class:"form-group"},Rs={class:"dialog-buttons"},Bs={key:1,class:"dialog-overlay"},Os={class:"dialog"},Ps={class:"form-group"},Ls=["value"],qs={class:"form-group"},Is=["value"],Fs={class:"form-group"},Ms={class:"form-group"},xs={class:"form-row"},Ys={class:"form-group half"},Ws={class:"form-group half"},Hs={class:"form-group"},Js={class:"form-group"},Qs={class:"form-group checkbox"},js={class:"dialog-buttons"},zs={__name:"BuyView",setup(P){const{callApi:D}=Y(),$=_([]),S=_(null),N=_([]),A=_([]),o=_([]),T=_([]),y=_(!1),f=_(!1),V=_({id_supplier:null,date_buy:new Date().toISOString().slice(0,16),amount:0,payed:0,pi_path:""}),c=_({id_car_name:null,id_color:null,amount:0,notes:"",QTY:1,year:new Date().getFullYear(),month:new Date().getMonth()+1,is_used_car:!1,id_buy_bill:null}),d=async()=>{const k=await D({query:"SELECT * FROM suppliers ORDER BY name ASC",params:[]});k.success&&(A.value=k.data)},U=async()=>{const k=await D({query:`
      INSERT INTO buy_bill (id_supplier, date_buy, amount, payed, pi_path)
      VALUES (?, ?, ?, ?, ?)
    `,params:[V.value.id_supplier,V.value.date_buy,V.value.amount,V.value.payed,V.value.pi_path]});k.success?(y.value=!1,await C(),V.value={id_supplier:null,date_buy:new Date().toISOString().slice(0,16),amount:0,payed:0,pi_path:""}):console.error("Error adding purchase:",k.error)},C=async()=>{const k=await D({query:`
      SELECT bb.*, s.name as supplier_name 
      FROM buy_bill bb 
      LEFT JOIN suppliers s ON bb.id_supplier = s.id 
      ORDER BY bb.date_buy DESC
    `,params:[]});k.success&&($.value=k.data)},u=async k=>{const t=await D({query:`
      SELECT bd.*, cn.car_name, c.color, bb.is_stock_updated
      FROM buy_details bd
      LEFT JOIN cars_names cn ON bd.id_car_name = cn.id
      LEFT JOIN colors c ON bd.id_color = c.id
      LEFT JOIN buy_bill bb ON bd.id_buy_bill = bb.id
      WHERE bd.id_buy_bill = ?
    `,params:[k]});t.success?N.value=t.data:console.error("Error fetching details:",t.error)},i=k=>{S.value=k,u(k.id)},v=async()=>{const k=await D({query:"SELECT * FROM cars_names ORDER BY car_name ASC",params:[]});k.success&&(o.value=k.data)},m=async()=>{const k=await D({query:"SELECT * FROM colors ORDER BY color ASC",params:[]});k.success&&(T.value=k.data)},p=async()=>{const k=await D({query:`
      INSERT INTO buy_details 
      (id_car_name, id_color, amount, notes, QTY, year, month, is_used_car, id_buy_bill, price_sell)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    `,params:[c.value.id_car_name,c.value.id_color,c.value.amount,c.value.notes,c.value.QTY,c.value.year,c.value.month,c.value.is_used_car?1:0,S.value.id,c.value.price_sell]});k.success?(f.value=!1,await u(S.value.id),c.value={id_car_name:null,id_color:null,amount:0,notes:"",QTY:1,year:new Date().getFullYear(),month:new Date().getMonth()+1,is_used_car:!1,id_buy_bill:null}):console.error("Error adding detail:",k.error)},O=_(null),H=Q(()=>{var k;return((k=O.value)==null?void 0:k.role_id)===1});W(()=>{const k=localStorage.getItem("user");k&&(O.value=JSON.parse(k)),C(),d(),v(),m()});const J=async k=>{const t=await D({query:"DELETE FROM buy_details WHERE id = ?",params:[k]});t.success?await u(S.value.id):(alert("Failed to delete detail. Please try again."),console.error("Error deleting detail:",t.error))},z=async k=>{const t=await D({query:`
      UPDATE buy_details 
      SET QTY = ?, amount = ?, year = ?, month = ?, notes = ?, price_sell = ?
      WHERE id = ?
    `,params:[k.QTY,k.amount,k.year,k.month,k.notes,k.price_sell,k.id]});t.success?await u(S.value.id):(alert("Failed to update detail. Please try again."),console.error("Error updating detail:",t.error))};return(k,t)=>(a(),n("div",Cs,[e("div",Es,[t[18]||(t[18]=e("h2",null,"Buy Management",-1)),e("button",{onClick:t[0]||(t[0]=r=>y.value=!0),class:"add-btn"},"Add New Purchase")]),e("div",$s,[e("div",ws,[de(es,{buyBills:$.value,selectedBill:S.value,onSelectBill:i},null,8,["buyBills","selectedBill"]),S.value?(a(),I(ks,{key:0,buyDetails:N.value,isAdmin:H.value,onAddDetail:t[1]||(t[1]=r=>f.value=!0),onDeleteDetail:J,onUpdateDetail:z},null,8,["buyDetails","isAdmin"])):h("",!0)])]),y.value?(a(),n("div",Ss,[e("div",As,[t[26]||(t[26]=e("h3",null,"Add New Purchase",-1)),e("form",{onSubmit:K(U,["prevent"])},[e("div",Ds,[t[20]||(t[20]=e("label",null,"Supplier",-1)),b(e("select",{"onUpdate:modelValue":t[2]||(t[2]=r=>V.value.id_supplier=r),required:""},[t[19]||(t[19]=e("option",{value:""},"Select Supplier",-1)),(a(!0),n(R,null,B(A.value,r=>(a(),n("option",{key:r.id,value:r.id},g(r.name),9,hs))),128))],512),[[q,V.value.id_supplier]])]),e("div",Ns,[t[21]||(t[21]=e("label",null,"Date",-1)),b(e("input",{type:"datetime-local","onUpdate:modelValue":t[3]||(t[3]=r=>V.value.date_buy=r),required:""},null,512),[[w,V.value.date_buy]])]),e("div",Vs,[t[22]||(t[22]=e("label",null,"Amount",-1)),b(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=r=>V.value.amount=r),step:"0.01",required:""},null,512),[[w,V.value.amount]])]),e("div",Ts,[t[23]||(t[23]=e("label",null,"Paid",-1)),b(e("input",{type:"number","onUpdate:modelValue":t[5]||(t[5]=r=>V.value.payed=r),step:"0.01",required:""},null,512),[[w,V.value.payed]])]),e("div",Us,[t[24]||(t[24]=e("label",null,"PI Path",-1)),b(e("input",{type:"text","onUpdate:modelValue":t[6]||(t[6]=r=>V.value.pi_path=r)},null,512),[[w,V.value.pi_path]])]),e("div",Rs,[e("button",{type:"button",onClick:t[7]||(t[7]=r=>y.value=!1),class:"cancel-btn"}," Cancel "),t[25]||(t[25]=e("button",{type:"submit",class:"submit-btn"}," Add Purchase ",-1))])],32)])])):h("",!0),f.value?(a(),n("div",Bs,[e("div",Os,[t[39]||(t[39]=e("h3",null,"Add Purchase Detail",-1)),e("form",{onSubmit:K(p,["prevent"])},[e("div",Ps,[t[28]||(t[28]=e("label",null,"Car",-1)),b(e("select",{"onUpdate:modelValue":t[8]||(t[8]=r=>c.value.id_car_name=r),required:""},[t[27]||(t[27]=e("option",{value:""},"Select Car",-1)),(a(!0),n(R,null,B(o.value,r=>(a(),n("option",{key:r.id,value:r.id},g(r.car_name),9,Ls))),128))],512),[[q,c.value.id_car_name]])]),e("div",qs,[t[30]||(t[30]=e("label",null,"Color",-1)),b(e("select",{"onUpdate:modelValue":t[9]||(t[9]=r=>c.value.id_color=r),required:""},[t[29]||(t[29]=e("option",{value:""},"Select Color",-1)),(a(!0),n(R,null,B(T.value,r=>(a(),n("option",{key:r.id,value:r.id},g(r.color),9,Is))),128))],512),[[q,c.value.id_color]])]),e("div",Fs,[t[31]||(t[31]=e("label",null,"Quantity",-1)),b(e("input",{type:"number","onUpdate:modelValue":t[10]||(t[10]=r=>c.value.QTY=r),min:"1",required:""},null,512),[[w,c.value.QTY]])]),e("div",Ms,[t[32]||(t[32]=e("label",null,"Amount",-1)),b(e("input",{type:"number","onUpdate:modelValue":t[11]||(t[11]=r=>c.value.amount=r),step:"0.01",required:""},null,512),[[w,c.value.amount]])]),e("div",xs,[e("div",Ys,[t[33]||(t[33]=e("label",null,"Year",-1)),b(e("input",{type:"number","onUpdate:modelValue":t[12]||(t[12]=r=>c.value.year=r),required:""},null,512),[[w,c.value.year]])]),e("div",Ws,[t[34]||(t[34]=e("label",null,"Month",-1)),b(e("input",{type:"number","onUpdate:modelValue":t[13]||(t[13]=r=>c.value.month=r),min:"1",max:"12",required:""},null,512),[[w,c.value.month]])])]),e("div",Hs,[t[35]||(t[35]=e("label",null,"Price Sell",-1)),b(e("input",{type:"number","onUpdate:modelValue":t[14]||(t[14]=r=>c.value.price_sell=r),step:"0.01",required:""},null,512),[[w,c.value.price_sell]])]),e("div",Js,[t[36]||(t[36]=e("label",null,"Notes",-1)),b(e("textarea",{"onUpdate:modelValue":t[15]||(t[15]=r=>c.value.notes=r),rows:"3"},null,512),[[w,c.value.notes]])]),e("div",Qs,[e("label",null,[b(e("input",{type:"checkbox","onUpdate:modelValue":t[16]||(t[16]=r=>c.value.is_used_car=r)},null,512),[[G,c.value.is_used_car]]),t[37]||(t[37]=x(" Used Car "))])]),e("div",js,[e("button",{type:"button",onClick:t[17]||(t[17]=r=>f.value=!1),class:"cancel-btn"}," Cancel "),t[38]||(t[38]=e("button",{type:"submit",class:"submit-btn"}," Add Detail ",-1))])],32)])])):h("",!0)]))}},Gs=F(zs,[["__scopeId","data-v-e925c2f3"]]),Ks={class:"sell-view"},Xs={class:"header"},Zs={key:0,class:"selected-bill"},ea={class:"bill-id"},la={class:"content"},ta={key:0,class:"loading"},sa={key:1,class:"error"},aa={key:2,class:"tables-container"},oa={class:"sell-bills-table"},na=["onClick"],ia=["onClick"],ua=["onClick"],da={key:0,class:"car-stock-table"},ra={key:0,class:"loading"},va={key:1,class:"no-data"},ca={key:2},pa=["onClick"],ba=["onClick"],ma={key:1,class:"available-cars-table"},_a={key:0,class:"loading"},ga={key:1,class:"no-data"},ya={key:2},fa=["onClick"],ka={key:1,class:"dialog-overlay"},Ca={class:"dialog"},Ea={class:"form-group"},$a=["value"],wa={class:"form-group"},Sa={class:"form-group"},Aa=["value"],Da={class:"form-group"},ha=["value"],Na={class:"form-group"},Va={class:"dialog-buttons"},Ta={key:2,class:"dialog-overlay"},Ua={class:"dialog"},Ra={class:"form-group"},Ba=["value"],Oa={class:"form-group"},Pa={class:"form-group"},La={class:"dialog-buttons"},qa={key:3,class:"dialog-overlay"},Ia={class:"dialog"},Fa={class:"form-group"},Ma=["value"],xa={class:"form-group"},Ya={class:"form-group"},Wa=["value"],Ha={class:"form-group"},Ja=["value"],Qa={class:"form-group"},ja={class:"form-group"},za={class:"dialog-buttons"},Ga={key:4,class:"dialog-overlay"},Ka={class:"dialog"},Xa={class:"form-group"},Za=["value"],eo={class:"form-group"},lo={class:"form-group"},to=["value"],so={class:"form-group"},ao=["value"],oo={class:"form-group"},no={class:"dialog-buttons"},io={key:5,class:"dialog-overlay"},uo={class:"dialog"},ro={class:"form-group"},vo=["value"],co={class:"form-group"},po={class:"form-group"},bo={class:"dialog-buttons"},mo={key:6,class:"dialog-overlay"},_o={class:"dialog"},go={class:"form-group"},yo=["value"],fo={class:"form-group"},ko={class:"form-group"},Co={class:"dialog-buttons"},Eo={__name:"SellView",setup(P){const{callApi:D}=Y(),$=_([]),S=_([]),N=_([]),A=_(!0),o=_(!1),T=_(!1),y=_(null),f=_(null),V=_(!1),c=_(!1),d=_(null),U=_([]),C=_([]),u=_([]),i=_(!1),v=_({id:null,id_broker:null,date_sell:"",notes:""}),m=_(!1),p=_(null),O=_({id_broker:null,date_sell:new Date().toISOString().split("T")[0],notes:""}),H=_([]),J=async()=>{A.value=!0,y.value=null;try{const E=await D({query:`
        SELECT 
          sb.id,
          sb.date_sell,
          sb.notes,
          c.name as broker_name,
          c.mobiles as broker_mobile
        FROM sell_bill sb
        LEFT JOIN clients c ON sb.id_broker = c.id AND c.is_broker = 1
        ORDER BY sb.date_sell DESC
      `,params:[]});E.success?$.value=E.data:y.value=E.error||"Failed to fetch sell bills"}catch(E){y.value=E.message||"An error occurred"}finally{A.value=!1}},z=async()=>{try{const E=await D({query:`
        SELECT id, name, mobiles
        FROM clients
        WHERE is_broker = 1
        ORDER BY name ASC
      `,params:[]});E.success&&(H.value=E.data)}catch(E){console.error("Error fetching brokers:",E)}},k=async E=>{f.value=E.id,await t(E.id)},t=async E=>{o.value=!0;try{const l=await D({query:`
        SELECT 
          cs.id,
          cs.vin,
          cs.price_cell,
          cs.date_loding,
          cs.date_sell,
          cs.notes,
          cs.freight,
          cs.path_documents,
          cs.sell_pi_path,
          cs.buy_pi_path,
          c.name as client_name,
          cn.car_name,
          clr.color,
          lp.loading_port,
          dp.discharge_port,
          bd.price_sell as buy_price
        FROM cars_stock cs
        LEFT JOIN clients c ON cs.id_client = c.id
        LEFT JOIN buy_details bd ON cs.id_buy_details = bd.id
        LEFT JOIN cars_names cn ON bd.id_car_name = cn.id
        LEFT JOIN colors clr ON bd.id_color = clr.id
        LEFT JOIN loading_ports lp ON cs.id_port_loading = lp.id
        LEFT JOIN discharge_ports dp ON cs.id_port_discharge = dp.id
        WHERE cs.id_sell = ? AND cs.hidden = 0
        ORDER BY cs.id DESC
      `,params:[E]});l.success?S.value=l.data:y.value=l.error||"Failed to fetch cars stock"}catch(l){y.value=l.message||"An error occurred"}finally{o.value=!1}},r=async()=>{T.value=!0;try{const E=await D({query:`
        SELECT 
          cs.id,
          cs.vin,
          cs.price_cell,
          cs.date_loding,
          cs.notes,
          cs.freight,
          c.name as client_name,
          cn.car_name,
          clr.color,
          lp.loading_port,
          dp.discharge_port,
          bd.price_sell as buy_price
        FROM cars_stock cs
        LEFT JOIN clients c ON cs.id_client = c.id
        LEFT JOIN buy_details bd ON cs.id_buy_details = bd.id
        LEFT JOIN cars_names cn ON bd.id_car_name = cn.id
        LEFT JOIN colors clr ON bd.id_color = clr.id
        LEFT JOIN loading_ports lp ON cs.id_port_loading = lp.id
        LEFT JOIN discharge_ports dp ON cs.id_port_discharge = dp.id
        WHERE cs.id_sell IS NULL AND cs.hidden = 0
        ORDER BY cs.id DESC
      `,params:[]});E.success?N.value=E.data:y.value=E.error||"Failed to fetch available cars"}catch(E){y.value=E.message||"An error occurred"}finally{T.value=!1}},j=async()=>{try{const E=await D({query:`
        INSERT INTO sell_bill (id_broker, date_sell, notes)
        VALUES (?, ?, ?)
      `,params:[O.value.id_broker,O.value.date_sell,O.value.notes]});E.success?(V.value=!1,O.value={id_broker:null,date_sell:new Date().toISOString().split("T")[0],notes:""},await J()):y.value=E.error||"Failed to add sell bill"}catch(E){y.value=E.message||"An error occurred"}},Z=async()=>{try{const E=await D({query:"SELECT * FROM loading_ports ORDER BY loading_port ASC",params:[]});E.success&&(U.value=E.data)}catch(E){console.error("Error fetching loading ports:",E)}},ee=async()=>{try{const E=await D({query:"SELECT * FROM discharge_ports ORDER BY discharge_port ASC",params:[]});E.success&&(C.value=E.data)}catch(E){console.error("Error fetching discharge ports:",E)}},le=async()=>{try{const E=await D({query:"SELECT * FROM clients WHERE is_broker = 0 ORDER BY name ASC",params:[]});E.success&&(u.value=E.data)}catch(E){console.error("Error fetching clients:",E)}},te=E=>{d.value={...E},c.value=!0},X=async()=>{if(!f.value){alert("Please select a bill first");return}if(!d.value.id_client){alert("Client name is required");return}if(!d.value.id_port_discharge){alert("Discharge port is required");return}if(!d.value.price_cell){alert("Selling price is required");return}try{const E=await D({query:`
        UPDATE cars_stock 
        SET id_sell = ?,
            id_client = ?,
            vin = ?,
            id_port_loading = ?,
            id_port_discharge = ?,
            price_cell = ?
        WHERE id = ?
      `,params:[f.value,d.value.id_client,d.value.vin,d.value.id_port_loading,d.value.id_port_discharge,d.value.price_cell,d.value.id]});E.success?(c.value=!1,await t(f.value),await r()):y.value=E.error||"Failed to assign car to bill"}catch(E){y.value=E.message||"An error occurred"}},se=async E=>{try{const l=await D({query:`
        UPDATE cars_stock 
        SET id_client = NULL,
            id_port_discharge = NULL,
            id_sell = NULL
        WHERE id = ?
      `,params:[E]});l.success?(await t(f.value),await r()):y.value=l.error||"Failed to unassign car"}catch(l){y.value=l.message||"An error occurred"}},ae=(E,l)=>{l.stopPropagation(),v.value={id:E.id,id_broker:E.id_broker,date_sell:E.date_sell.split("T")[0],notes:E.notes||""},i.value=!0},oe=async()=>{try{const E=await D({query:`
        UPDATE sell_bill 
        SET id_broker = ?, 
            date_sell = ?, 
            notes = ?
        WHERE id = ?
      `,params:[v.value.id_broker,v.value.date_sell,v.value.notes,v.value.id]});E.success?(i.value=!1,await J(),f.value===v.value.id&&await t(f.value)):y.value=E.error||"Failed to update sell bill"}catch(E){y.value=E.message||"An error occurred"}},ne=async(E,l)=>{if(l.stopPropagation(),!!confirm("Are you sure you want to delete this sell bill? This will also unassign all cars from this bill."))try{const s=await D({query:`
        UPDATE cars_stock 
        SET id_sell = NULL 
        WHERE id_sell = ?
      `,params:[E]});if(!s.success){y.value=s.error||"Failed to unassign cars from bill";return}const M=await D({query:`
        DELETE FROM sell_bill 
        WHERE id = ?
      `,params:[E]});M.success?(f.value===E&&(f.value=null,S.value=[]),await J(),await r()):y.value=M.error||"Failed to delete sell bill"}catch(s){y.value=s.message||"An error occurred"}};W(async()=>{await J(),await z(),await r(),await Z(),await ee(),await le()});const ie=E=>{p.value={...E},m.value=!0},ue=async()=>{if(p.value)try{const E=await D({query:`
        UPDATE cars_stock 
        SET id_client = ?,
            vin = ?,
            id_port_loading = ?,
            id_port_discharge = ?,
            price_cell = ?,
            notes = ?
        WHERE id = ?
      `,params:[p.value.id_client,p.value.vin,p.value.id_port_loading,p.value.id_port_discharge,p.value.price_cell,p.value.notes,p.value.id]});E.success?(m.value=!1,await t(f.value)):y.value=E.error||"Failed to update car"}catch(E){y.value=E.message||"An error occurred"}};return(E,l)=>(a(),n("div",Ks,[e("div",Xs,[l[32]||(l[32]=e("h2",null,"Sell Bills Management",-1)),e("button",{class:"add-btn",onClick:l[0]||(l[0]=s=>V.value=!0)}," Add New Sell Bill ")]),f.value?(a(),n("div",Zs,[l[33]||(l[33]=x(" Selected Bill ID: ")),e("span",ea,g(f.value),1)])):h("",!0),e("div",la,[A.value?(a(),n("div",ta,"Loading...")):y.value?(a(),n("div",sa,g(y.value),1)):(a(),n("div",aa,[e("div",oa,[l[35]||(l[35]=e("h3",null,"Sell Bills",-1)),e("table",null,[l[34]||(l[34]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Date"),e("th",null,"Broker"),e("th",null,"Notes"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),n(R,null,B($.value,s=>(a(),n("tr",{key:s.id,onClick:M=>k(s),class:L({selected:f.value===s.id})},[e("td",null,g(s.id),1),e("td",null,g(new Date(s.date_sell).toLocaleDateString()),1),e("td",null,g(s.broker_name||"N/A"),1),e("td",null,g(s.notes||"N/A"),1),e("td",null,[e("button",{onClick:M=>ae(s,M),class:"btn edit-btn"},"Edit",8,ia),e("button",{class:"btn delete-btn",onClick:M=>ne(s.id,M)},"Delete",8,ua)])],10,na))),128))])])]),f.value?(a(),n("div",da,[l[37]||(l[37]=e("h3",null,"Cars in Selected Bill",-1)),o.value?(a(),n("div",ra,"Loading cars...")):S.value.length===0?(a(),n("div",va," No cars found for this sell bill ")):(a(),n("table",ca,[l[36]||(l[36]=e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Car"),e("th",null,"Color"),e("th",null,"VIN"),e("th",null,"Client"),e("th",null,"Loading Port"),e("th",null,"Discharge Port"),e("th",null,"Buy Price"),e("th",null,"Sell Price"),e("th",null,"Profit"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),n(R,null,B(S.value,s=>(a(),n("tr",{key:s.id},[e("td",null,g(s.id),1),e("td",null,g(s.car_name||"N/A"),1),e("td",null,g(s.color||"N/A"),1),e("td",null,g(s.vin||"N/A"),1),e("td",null,g(s.client_name||"N/A"),1),e("td",null,g(s.loading_port||"N/A"),1),e("td",null,g(s.discharge_port||"N/A"),1),e("td",null,"$"+g(s.buy_price||0),1),e("td",null,"$"+g(s.price_cell||0),1),e("td",null,"$"+g(s.price_cell-s.buy_price||0),1),e("td",null,[e("button",{onClick:M=>ie(s),class:"edit-btn"},"Edit",8,pa),e("button",{onClick:M=>se(s.id),class:"unassign-btn"},"Unassign",8,ba)])]))),128))])]))])):h("",!0),f.value?(a(),n("div",ma,[l[39]||(l[39]=e("h3",null,"Available Cars",-1)),T.value?(a(),n("div",_a,"Loading...")):N.value.length===0?(a(),n("div",ga,"No available cars")):(a(),n("table",ya,[l[38]||(l[38]=e("thead",null,[e("tr",null,[e("th",null,"Car"),e("th",null,"Color"),e("th",null,"VIN"),e("th",null,"Buy Price"),e("th",null,"Actions")])],-1)),e("tbody",null,[(a(!0),n(R,null,B(N.value,s=>(a(),n("tr",{key:s.id},[e("td",null,g(s.car_name||"N/A"),1),e("td",null,g(s.color||"N/A"),1),e("td",null,g(s.vin||"N/A"),1),e("td",null,"$"+g(s.buy_price||0),1),e("td",null,"$"+g(s.price_cell||0),1),e("td",null,"$"+g(s.price_cell-s.buy_price||0),1),e("td",null,[e("button",{onClick:M=>te(s),class:"assign-btn"},"Assign to Bill",8,fa)])]))),128))])]))])):h("",!0)]))]),c.value?(a(),n("div",ka,[e("div",Ca,[l[48]||(l[48]=e("h2",null,"Assign Car to Bill",-1)),e("div",Ea,[l[41]||(l[41]=e("label",{for:"client"},[x("Client: "),e("span",{class:"required"},"*")],-1)),b(e("select",{id:"client","onUpdate:modelValue":l[1]||(l[1]=s=>d.value.id_client=s),required:""},[l[40]||(l[40]=e("option",{value:""},"Select Client",-1)),(a(!0),n(R,null,B(u.value,s=>(a(),n("option",{key:s.id,value:s.id},g(s.name),9,$a))),128))],512),[[q,d.value.id_client]])]),e("div",wa,[l[42]||(l[42]=e("label",{for:"vin"},"VIN:",-1)),b(e("input",{type:"text",id:"vin","onUpdate:modelValue":l[2]||(l[2]=s=>d.value.vin=s)},null,512),[[w,d.value.vin]])]),e("div",Sa,[l[44]||(l[44]=e("label",{for:"loading-port"},"Loading Port:",-1)),b(e("select",{id:"loading-port","onUpdate:modelValue":l[3]||(l[3]=s=>d.value.id_port_loading=s)},[l[43]||(l[43]=e("option",{value:""},"Select Loading Port",-1)),(a(!0),n(R,null,B(U.value,s=>(a(),n("option",{key:s.id,value:s.id},g(s.loading_port),9,Aa))),128))],512),[[q,d.value.id_port_loading]])]),e("div",Da,[l[46]||(l[46]=e("label",{for:"discharge-port"},[x("Discharge Port: "),e("span",{class:"required"},"*")],-1)),b(e("select",{id:"discharge-port","onUpdate:modelValue":l[4]||(l[4]=s=>d.value.id_port_discharge=s),required:""},[l[45]||(l[45]=e("option",{value:""},"Select Discharge Port",-1)),(a(!0),n(R,null,B(C.value,s=>(a(),n("option",{key:s.id,value:s.id},g(s.discharge_port),9,ha))),128))],512),[[q,d.value.id_port_discharge]])]),e("div",Na,[l[47]||(l[47]=e("label",{for:"sell-price"},[x("Sell Price: "),e("span",{class:"required"},"*")],-1)),b(e("input",{type:"number",id:"sell-price","onUpdate:modelValue":l[5]||(l[5]=s=>d.value.price_cell=s),required:""},null,512),[[w,d.value.price_cell]])]),e("div",Va,[e("button",{onClick:X,class:"primary"},"Assign"),e("button",{onClick:l[6]||(l[6]=s=>c.value=!1)},"Cancel")])])])):h("",!0),V.value?(a(),n("div",Ta,[e("div",Ua,[l[53]||(l[53]=e("h3",null,"Add New Sell Bill",-1)),e("div",Ra,[l[50]||(l[50]=e("label",{for:"broker"},"Broker:",-1)),b(e("select",{id:"broker","onUpdate:modelValue":l[7]||(l[7]=s=>O.value.id_broker=s)},[l[49]||(l[49]=e("option",{value:""},"Select Broker",-1)),(a(!0),n(R,null,B(H.value,s=>(a(),n("option",{key:s.id,value:s.id},g(s.name),9,Ba))),128))],512),[[q,O.value.id_broker]])]),e("div",Oa,[l[51]||(l[51]=e("label",{for:"date"},"Date:",-1)),b(e("input",{type:"date",id:"date","onUpdate:modelValue":l[8]||(l[8]=s=>O.value.date_sell=s)},null,512),[[w,O.value.date_sell]])]),e("div",Pa,[l[52]||(l[52]=e("label",{for:"notes"},"Notes:",-1)),b(e("textarea",{id:"notes","onUpdate:modelValue":l[9]||(l[9]=s=>O.value.notes=s)},null,512),[[w,O.value.notes]])]),e("div",La,[e("button",{onClick:l[10]||(l[10]=s=>V.value=!1)},"Cancel"),e("button",{onClick:j,class:"primary"},"Add")])])])):h("",!0),m.value?(a(),n("div",qa,[e("div",Ia,[l[63]||(l[63]=e("h3",null,"Edit Car Details",-1)),e("div",Fa,[l[55]||(l[55]=e("label",{for:"edit-car-client"},"Client:",-1)),b(e("select",{id:"edit-car-client","onUpdate:modelValue":l[11]||(l[11]=s=>p.value.id_client=s)},[l[54]||(l[54]=e("option",{value:""},"Select Client",-1)),(a(!0),n(R,null,B(u.value,s=>(a(),n("option",{key:s.id,value:s.id},g(s.name),9,Ma))),128))],512),[[q,p.value.id_client]])]),e("div",xa,[l[56]||(l[56]=e("label",{for:"edit-car-vin"},"VIN:",-1)),b(e("input",{type:"text",id:"edit-car-vin","onUpdate:modelValue":l[12]||(l[12]=s=>p.value.vin=s)},null,512),[[w,p.value.vin]])]),e("div",Ya,[l[58]||(l[58]=e("label",{for:"edit-car-loading-port"},"Loading Port:",-1)),b(e("select",{id:"edit-car-loading-port","onUpdate:modelValue":l[13]||(l[13]=s=>p.value.id_port_loading=s)},[l[57]||(l[57]=e("option",{value:""},"Select Loading Port",-1)),(a(!0),n(R,null,B(U.value,s=>(a(),n("option",{key:s.id,value:s.id},g(s.loading_port),9,Wa))),128))],512),[[q,p.value.id_port_loading]])]),e("div",Ha,[l[60]||(l[60]=e("label",{for:"edit-car-discharge-port"},"Discharge Port:",-1)),b(e("select",{id:"edit-car-discharge-port","onUpdate:modelValue":l[14]||(l[14]=s=>p.value.id_port_discharge=s)},[l[59]||(l[59]=e("option",{value:""},"Select Discharge Port",-1)),(a(!0),n(R,null,B(C.value,s=>(a(),n("option",{key:s.id,value:s.id},g(s.discharge_port),9,Ja))),128))],512),[[q,p.value.id_port_discharge]])]),e("div",Qa,[l[61]||(l[61]=e("label",{for:"edit-car-price"},"Selling Price:",-1)),b(e("input",{type:"number",id:"edit-car-price","onUpdate:modelValue":l[15]||(l[15]=s=>p.value.price_cell=s)},null,512),[[w,p.value.price_cell]])]),e("div",ja,[l[62]||(l[62]=e("label",{for:"edit-car-notes"},"Notes:",-1)),b(e("textarea",{id:"edit-car-notes","onUpdate:modelValue":l[16]||(l[16]=s=>p.value.notes=s)},null,512),[[w,p.value.notes]])]),e("div",za,[e("button",{onClick:ue,class:"primary"},"Update"),e("button",{onClick:l[17]||(l[17]=s=>m.value=!1)},"Cancel")])])])):h("",!0),c.value?(a(),n("div",Ga,[e("div",Ka,[l[72]||(l[72]=e("h2",null,"Assign Car to Bill",-1)),e("div",Xa,[l[65]||(l[65]=e("label",{for:"client"},[x("Client: "),e("span",{class:"required"},"*")],-1)),b(e("select",{id:"client","onUpdate:modelValue":l[18]||(l[18]=s=>d.value.id_client=s),required:""},[l[64]||(l[64]=e("option",{value:""},"Select Client",-1)),(a(!0),n(R,null,B(u.value,s=>(a(),n("option",{key:s.id,value:s.id},g(s.name),9,Za))),128))],512),[[q,d.value.id_client]])]),e("div",eo,[l[66]||(l[66]=e("label",{for:"vin"},"VIN:",-1)),b(e("input",{type:"text",id:"vin","onUpdate:modelValue":l[19]||(l[19]=s=>d.value.vin=s)},null,512),[[w,d.value.vin]])]),e("div",lo,[l[68]||(l[68]=e("label",{for:"loading-port"},"Loading Port:",-1)),b(e("select",{id:"loading-port","onUpdate:modelValue":l[20]||(l[20]=s=>d.value.id_port_loading=s)},[l[67]||(l[67]=e("option",{value:""},"Select Loading Port",-1)),(a(!0),n(R,null,B(U.value,s=>(a(),n("option",{key:s.id,value:s.id},g(s.loading_port),9,to))),128))],512),[[q,d.value.id_port_loading]])]),e("div",so,[l[70]||(l[70]=e("label",{for:"discharge-port"},[x("Discharge Port: "),e("span",{class:"required"},"*")],-1)),b(e("select",{id:"discharge-port","onUpdate:modelValue":l[21]||(l[21]=s=>d.value.id_port_discharge=s),required:""},[l[69]||(l[69]=e("option",{value:""},"Select Discharge Port",-1)),(a(!0),n(R,null,B(C.value,s=>(a(),n("option",{key:s.id,value:s.id},g(s.discharge_port),9,ao))),128))],512),[[q,d.value.id_port_discharge]])]),e("div",oo,[l[71]||(l[71]=e("label",{for:"sell-price"},[x("Sell Price: "),e("span",{class:"required"},"*")],-1)),b(e("input",{type:"number",id:"sell-price","onUpdate:modelValue":l[22]||(l[22]=s=>d.value.price_cell=s),required:""},null,512),[[w,d.value.price_cell]])]),e("div",no,[e("button",{onClick:X,class:"primary"},"Assign"),e("button",{onClick:l[23]||(l[23]=s=>c.value=!1)},"Cancel")])])])):h("",!0),V.value?(a(),n("div",io,[e("div",uo,[l[77]||(l[77]=e("h3",null,"Add New Sell Bill",-1)),e("div",ro,[l[74]||(l[74]=e("label",{for:"broker"},"Broker:",-1)),b(e("select",{id:"broker","onUpdate:modelValue":l[24]||(l[24]=s=>O.value.id_broker=s)},[l[73]||(l[73]=e("option",{value:""},"Select Broker",-1)),(a(!0),n(R,null,B(H.value,s=>(a(),n("option",{key:s.id,value:s.id},g(s.name),9,vo))),128))],512),[[q,O.value.id_broker]])]),e("div",co,[l[75]||(l[75]=e("label",{for:"date"},"Date:",-1)),b(e("input",{type:"date",id:"date","onUpdate:modelValue":l[25]||(l[25]=s=>O.value.date_sell=s)},null,512),[[w,O.value.date_sell]])]),e("div",po,[l[76]||(l[76]=e("label",{for:"notes"},"Notes:",-1)),b(e("textarea",{id:"notes","onUpdate:modelValue":l[26]||(l[26]=s=>O.value.notes=s)},null,512),[[w,O.value.notes]])]),e("div",bo,[e("button",{onClick:l[27]||(l[27]=s=>V.value=!1)},"Cancel"),e("button",{onClick:j,class:"primary"},"Add")])])])):h("",!0),i.value?(a(),n("div",mo,[e("div",_o,[l[82]||(l[82]=e("h3",null,"Edit Sell Bill",-1)),e("div",go,[l[79]||(l[79]=e("label",{for:"edit-broker"},"Broker:",-1)),b(e("select",{id:"edit-broker","onUpdate:modelValue":l[28]||(l[28]=s=>v.value.id_broker=s)},[l[78]||(l[78]=e("option",{value:""},"Select Broker",-1)),(a(!0),n(R,null,B(H.value,s=>(a(),n("option",{key:s.id,value:s.id},g(s.name),9,yo))),128))],512),[[q,v.value.id_broker]])]),e("div",fo,[l[80]||(l[80]=e("label",{for:"edit-date"},"Date:",-1)),b(e("input",{type:"date",id:"edit-date","onUpdate:modelValue":l[29]||(l[29]=s=>v.value.date_sell=s)},null,512),[[w,v.value.date_sell]])]),e("div",ko,[l[81]||(l[81]=e("label",{for:"edit-notes"},"Notes:",-1)),b(e("textarea",{id:"edit-notes","onUpdate:modelValue":l[30]||(l[30]=s=>v.value.notes=s)},null,512),[[w,v.value.notes]])]),e("div",Co,[e("button",{onClick:l[31]||(l[31]=s=>i.value=!1)},"Cancel"),e("button",{onClick:oe,class:"primary"},"Update")])])])):h("",!0)]))}},$o=F(Eo,[["__scopeId","data-v-a7fbf0a4"]]),wo={class:"cars-view"},So={class:"sidebar"},Ao={class:"sidebar-top"},Do={class:"sidebar-bottom"},ho={class:"main-content"},No={class:"content"},Vo={key:0,class:"empty-state"},To={__name:"CarsView",setup(P){const D=re(),$=_(null),S=A=>{$.value=A},N=()=>{D.push("/")};return(A,o)=>(a(),n("div",wo,[e("div",So,[e("div",Ao,[e("button",{onClick:N,class:"sidebar-btn return-btn"}," Return to Dashboard "),e("button",{onClick:o[0]||(o[0]=T=>S("buy")),class:L([{active:$.value==="buy"},"sidebar-btn buy-btn"])}," Buy ",2),h("",!0),e("button",{onClick:o[2]||(o[2]=T=>S("sell-bills")),class:L([{active:$.value==="sell-bills"},"sidebar-btn sell-bills-btn"])}," Sell Bills ",2),e("button",{onClick:o[3]||(o[3]=T=>S("stock")),class:L([{active:$.value==="stock"},"sidebar-btn stock-btn"])}," Cars Stock ",2)]),e("div",Do,[o[12]||(o[12]=e("div",{class:"sidebar-section-title"},"Settings",-1)),e("button",{onClick:o[4]||(o[4]=T=>S("models")),class:L([{active:$.value==="models"},"sidebar-btn"])}," Car Models ",2),e("button",{onClick:o[5]||(o[5]=T=>S("colors")),class:L([{active:$.value==="colors"},"sidebar-btn"])}," Colors ",2),e("button",{onClick:o[6]||(o[6]=T=>S("discharge-ports")),class:L([{active:$.value==="discharge-ports"},"sidebar-btn"])}," Discharge Ports ",2),e("button",{onClick:o[7]||(o[7]=T=>S("loading-ports")),class:L([{active:$.value==="loading-ports"},"sidebar-btn"])}," Loading Ports ",2),e("button",{onClick:o[8]||(o[8]=T=>S("clients")),class:L([{active:$.value==="clients"},"sidebar-btn"])}," Clients ",2),e("button",{onClick:o[9]||(o[9]=T=>S("brokers")),class:L([{active:$.value==="brokers"},"sidebar-btn"])}," Brokers ",2),e("button",{onClick:o[10]||(o[10]=T=>S("suppliers")),class:L([{active:$.value==="suppliers"},"sidebar-btn"])}," Suppliers ",2),e("button",{onClick:o[11]||(o[11]=T=>S("warehouses")),class:L([{active:$.value==="warehouses"},"sidebar-btn warehouses-btn"])}," Warehouses ",2)])]),e("div",ho,[o[13]||(o[13]=e("h1",null,"Cars Management",-1)),e("div",No,[$.value?h("",!0):(a(),n("div",Vo," Please select an option from the sidebar ")),$.value==="buy"?(a(),I(Gs,{key:1})):h("",!0),$.value==="sell"?(a(),I($o,{key:2})):h("",!0),$.value==="sell-bills"?(a(),I(ce,{key:3})):h("",!0),$.value==="stock"?(a(),I(ve,{key:4})):h("",!0),$.value==="models"?(a(),I(et,{key:5})):h("",!0),$.value==="colors"?(a(),I(_t,{key:6})):h("",!0),$.value==="discharge-ports"?(a(),I(Ut,{key:7})):h("",!0),$.value==="loading-ports"?(a(),I(jt,{key:8})):h("",!0),$.value==="clients"?(a(),I(Be,{key:9})):h("",!0),$.value==="brokers"?(a(),I(ll,{key:10})):h("",!0),$.value==="suppliers"?(a(),I(gl,{key:11})):h("",!0),$.value==="warehouses"?(a(),I(pe,{key:12})):h("",!0)])])]))}},Po=F(To,[["__scopeId","data-v-1ed0ea31"]]);export{Po as default};
//# sourceMappingURL=CarsView.CyzgtemI.js.map
